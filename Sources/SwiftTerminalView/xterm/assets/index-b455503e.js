(function(){const m=document.createElement("link").relList;if(m&&m.supports&&m.supports("modulepreload"))return;for(const M of document.querySelectorAll('link[rel="modulepreload"]'))x(M);new MutationObserver(M=>{for(const O of M)if(O.type==="childList")for(const R of O.addedNodes)R.tagName==="LINK"&&R.rel==="modulepreload"&&x(R)}).observe(document,{childList:!0,subtree:!0});function _(M){const O={};return M.integrity&&(O.integrity=M.integrity),M.referrerPolicy&&(O.referrerPolicy=M.referrerPolicy),M.crossOrigin==="use-credentials"?O.credentials="include":M.crossOrigin==="anonymous"?O.credentials="omit":O.credentials="same-origin",O}function x(M){if(M.ep)return;M.ep=!0;const O=_(M);fetch(M.href,O)}})();const Er=!1,Br=(b,m)=>b===m,me=Symbol("solid-proxy"),Gi=Symbol("solid-track"),ji={equals:Br};let Qi=sr;const de=1,Fe=2,er={owned:null,cleanups:null,context:null,owner:null};var te=null;let Je=null,Rr=null,ee=null,re=null,le=null,Xe=0;function Lr(b,m){const _=ee,x=te,M=b.length===0,O=m===void 0?x:m,R=M?er:{owned:null,cleanups:null,context:O?O.context:null,owner:O},s=M?b:()=>b(()=>De(()=>Te(R)));te=R,ee=null;try{return xe(s,!0)}finally{ee=_,te=x}}function Ee(b,m){m=m?Object.assign({},ji,m):ji;const _={value:b,observers:null,observerSlots:null,comparator:m.equals||void 0},x=M=>(typeof M=="function"&&(M=M(_.value)),rr(_,M));return[Mr.bind(_),x]}function Dr(b,m,_){const x=ot(b,m,!0,de);Ie(x)}function fe(b,m,_){const x=ot(b,m,!1,de);Ie(x)}function tr(b,m,_){Qi=Or;const x=ot(b,m,!1,de);(!_||!_.render)&&(x.user=!0),le?le.push(x):Ie(x)}function xr(b){return xe(b,!1)}function De(b){if(ee===null)return b();const m=ee;ee=null;try{return b()}finally{ee=m}}function Ne(b){tr(()=>De(b))}function ir(b){return te===null||(te.cleanups===null?te.cleanups=[b]:te.cleanups.push(b)),b}function Qe(){return ee}function Mr(){if(this.sources&&this.state)if(this.state===de)Ie(this);else{const b=re;re=null,xe(()=>Ue(this),!1),re=b}if(ee){const b=this.observers?this.observers.length:0;ee.sources?(ee.sources.push(this),ee.sourceSlots.push(b)):(ee.sources=[this],ee.sourceSlots=[b]),this.observers?(this.observers.push(ee),this.observerSlots.push(ee.sources.length-1)):(this.observers=[ee],this.observerSlots=[ee.sources.length-1])}return this.value}function rr(b,m,_){let x=b.value;return(!b.comparator||!b.comparator(x,m))&&(b.value=m,b.observers&&b.observers.length&&xe(()=>{for(let M=0;M<b.observers.length;M+=1){const O=b.observers[M],R=Je&&Je.running;R&&Je.disposed.has(O),(R?!O.tState:!O.state)&&(O.pure?re.push(O):le.push(O),O.observers&&nr(O)),R||(O.state=de)}if(re.length>1e6)throw re=[],new Error},!1)),m}function Ie(b){if(!b.fn)return;Te(b);const m=Xe;Ar(b,b.value,m)}function Ar(b,m,_){let x;const M=te,O=ee;ee=te=b;try{x=b.fn(m)}catch(R){return b.pure&&(b.state=de,b.owned&&b.owned.forEach(Te),b.owned=null),b.updatedAt=_+1,or(R)}finally{ee=O,te=M}(!b.updatedAt||b.updatedAt<=_)&&(b.updatedAt!=null&&"observers"in b?rr(b,x):b.value=x,b.updatedAt=_)}function ot(b,m,_,x=de,M){const O={fn:b,state:x,updatedAt:null,owned:null,sources:null,sourceSlots:null,cleanups:null,value:m,owner:te,context:te?te.context:null,pure:_};return te===null||te!==er&&(te.owned?te.owned.push(O):te.owned=[O]),O}function $e(b){if(b.state===0)return;if(b.state===Fe)return Ue(b);if(b.suspense&&De(b.suspense.inFallback))return b.suspense.effects.push(b);const m=[b];for(;(b=b.owner)&&(!b.updatedAt||b.updatedAt<Xe);)b.state&&m.push(b);for(let _=m.length-1;_>=0;_--)if(b=m[_],b.state===de)Ie(b);else if(b.state===Fe){const x=re;re=null,xe(()=>Ue(b,m[0]),!1),re=x}}function xe(b,m){if(re)return b();let _=!1;m||(re=[]),le?_=!0:le=[],Xe++;try{const x=b();return Tr(_),x}catch(x){_||(le=null),re=null,or(x)}}function Tr(b){if(re&&(sr(re),re=null),b)return;const m=le;le=null,m.length&&xe(()=>Qi(m),!1)}function sr(b){for(let m=0;m<b.length;m++)$e(b[m])}function Or(b){let m,_=0;for(m=0;m<b.length;m++){const x=b[m];x.user?b[_++]=x:$e(x)}for(m=0;m<_;m++)$e(b[m])}function Ue(b,m){b.state=0;for(let _=0;_<b.sources.length;_+=1){const x=b.sources[_];if(x.sources){const M=x.state;M===de?x!==m&&(!x.updatedAt||x.updatedAt<Xe)&&$e(x):M===Fe&&Ue(x,m)}}}function nr(b){for(let m=0;m<b.observers.length;m+=1){const _=b.observers[m];_.state||(_.state=Fe,_.pure?re.push(_):le.push(_),_.observers&&nr(_))}}function Te(b){let m;if(b.sources)for(;b.sources.length;){const _=b.sources.pop(),x=b.sourceSlots.pop(),M=_.observers;if(M&&M.length){const O=M.pop(),R=_.observerSlots.pop();x<M.length&&(O.sourceSlots[R]=x,M[x]=O,_.observerSlots[x]=R)}}if(b.tOwned){for(m=b.tOwned.length-1;m>=0;m--)Te(b.tOwned[m]);delete b.tOwned}if(b.owned){for(m=b.owned.length-1;m>=0;m--)Te(b.owned[m]);b.owned=null}if(b.cleanups){for(m=b.cleanups.length-1;m>=0;m--)b.cleanups[m]();b.cleanups=null}b.state=0}function Pr(b){return b instanceof Error?b:new Error(typeof b=="string"?b:"Unknown error",{cause:b})}function or(b,m=te){throw Pr(b)}function Ge(b,m){return De(()=>b(m||{}))}const Ir=["allowfullscreen","async","autofocus","autoplay","checked","controls","default","disabled","formnovalidate","hidden","indeterminate","inert","ismap","loop","multiple","muted","nomodule","novalidate","open","playsinline","readonly","required","reversed","seamless","selected"],Hr=new Set(["className","value","readOnly","formNoValidate","isMap","noModule","playsInline",...Ir]),Wr=new Set(["innerHTML","textContent","innerText","children"]),Fr=Object.assign(Object.create(null),{className:"class",htmlFor:"for"}),Nr=Object.assign(Object.create(null),{class:"className",formnovalidate:{$:"formNoValidate",BUTTON:1,INPUT:1},ismap:{$:"isMap",IMG:1},nomodule:{$:"noModule",SCRIPT:1},playsinline:{$:"playsInline",VIDEO:1},readonly:{$:"readOnly",INPUT:1,TEXTAREA:1}});function $r(b,m){const _=Nr[b];return typeof _=="object"?_[m]?_.$:void 0:_}const Ur=new Set(["beforeinput","click","dblclick","contextmenu","focusin","focusout","input","keydown","keyup","mousedown","mousemove","mouseout","mouseover","mouseup","pointerdown","pointermove","pointerout","pointerover","pointerup","touchend","touchmove","touchstart"]),Gr={xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace"};function jr(b,m,_){let x=_.length,M=m.length,O=x,R=0,s=0,n=m[M-1].nextSibling,l=null;for(;R<M||s<O;){if(m[R]===_[s]){R++,s++;continue}for(;m[M-1]===_[O-1];)M--,O--;if(M===R){const u=O<x?s?_[s-1].nextSibling:_[O-s]:n;for(;s<O;)b.insertBefore(_[s++],u)}else if(O===s)for(;R<M;)(!l||!l.has(m[R]))&&m[R].remove(),R++;else if(m[R]===_[O-1]&&_[s]===m[M-1]){const u=m[--M].nextSibling;b.insertBefore(_[s++],m[R++].nextSibling),b.insertBefore(_[--O],u),m[M]=_[O]}else{if(!l){l=new Map;let o=s;for(;o<O;)l.set(_[o],o++)}const u=l.get(m[R]);if(u!=null)if(s<u&&u<O){let o=R,a=1,f;for(;++o<M&&o<O&&!((f=l.get(m[o]))==null||f!==u+a);)a++;if(a>u-s){const v=m[R];for(;s<u;)b.insertBefore(_[s++],v)}else b.replaceChild(_[s++],m[R++])}else R++;else m[R++].remove()}}}const zi="_$DX_DELEGATE";function zr(b,m,_,x={}){let M;return Lr(O=>{M=O,m===document?b():cr(m,b(),m.firstChild?null:void 0,_)},x.owner),()=>{M(),m.textContent=""}}function at(b,m,_,x){let M;const O=()=>{const s=x?document.createElementNS("http://www.w3.org/1998/Math/MathML","template"):document.createElement("template");return s.innerHTML=b,_?s.content.firstChild.firstChild:x?s.firstChild:s.content.firstChild},R=m?()=>De(()=>document.importNode(M||(M=O()),!0)):()=>(M||(M=O())).cloneNode(!0);return R.cloneNode=R,R}function ar(b,m=window.document){const _=m[zi]||(m[zi]=new Set);for(let x=0,M=b.length;x<M;x++){const O=b[x];_.has(O)||(_.add(O),m.addEventListener(O,Qr))}}function et(b,m,_){_==null?b.removeAttribute(m):b.setAttribute(m,_)}function Yr(b,m,_,x){x==null?b.removeAttributeNS(m,_):b.setAttributeNS(m,_,x)}function Kr(b,m,_){_?b.setAttribute(m,""):b.removeAttribute(m)}function hr(b,m){m==null?b.removeAttribute("class"):b.className=m}function qr(b,m,_,x){if(x)Array.isArray(_)?(b[`$$${m}`]=_[0],b[`$$${m}Data`]=_[1]):b[`$$${m}`]=_;else if(Array.isArray(_)){const M=_[0];b.addEventListener(m,_[0]=O=>M.call(b,_[1],O))}else b.addEventListener(m,_,typeof _!="function"&&_)}function We(b,m,_={}){const x=Object.keys(m||{}),M=Object.keys(_);let O,R;for(O=0,R=M.length;O<R;O++){const s=M[O];!s||s==="undefined"||m[s]||(Yi(b,s,!1),delete _[s])}for(O=0,R=x.length;O<R;O++){const s=x[O],n=!!m[s];!s||s==="undefined"||_[s]===n||!n||(Yi(b,s,!0),_[s]=n)}return _}function Vr(b,m,_){if(!m)return _?et(b,"style"):m;const x=b.style;if(typeof m=="string")return x.cssText=m;typeof _=="string"&&(x.cssText=_=void 0),_||(_={}),m||(m={});let M,O;for(O in _)m[O]==null&&x.removeProperty(O),delete _[O];for(O in m)M=m[O],M!==_[O]&&(x.setProperty(O,M),_[O]=M);return _}function Xr(b,m={},_,x){const M={};return x||fe(()=>M.children=Le(b,m.children,M.children)),fe(()=>typeof m.ref=="function"&&je(m.ref,b)),fe(()=>Jr(b,m,_,!0,M,!0)),M}function je(b,m,_){return De(()=>b(m,_))}function cr(b,m,_,x){if(_!==void 0&&!x&&(x=[]),typeof m!="function")return Le(b,m,x,_);fe(M=>Le(b,m(),M,_),x)}function Jr(b,m,_,x,M={},O=!1){m||(m={});for(const R in M)if(!(R in m)){if(R==="children")continue;M[R]=Ki(b,R,null,M[R],_,O,m)}for(const R in m){if(R==="children"){x||Le(b,m.children);continue}const s=m[R];M[R]=Ki(b,R,s,M[R],_,O,m)}}function Zr(b){return b.toLowerCase().replace(/-([a-z])/g,(m,_)=>_.toUpperCase())}function Yi(b,m,_){const x=m.trim().split(/\s+/);for(let M=0,O=x.length;M<O;M++)b.classList.toggle(x[M],_)}function Ki(b,m,_,x,M,O,R){let s,n,l,u,o;if(m==="style")return Vr(b,_,x);if(m==="classList")return We(b,_,x);if(_===x)return x;if(m==="ref")O||_(b);else if(m.slice(0,3)==="on:"){const a=m.slice(3);x&&b.removeEventListener(a,x,typeof x!="function"&&x),_&&b.addEventListener(a,_,typeof _!="function"&&_)}else if(m.slice(0,10)==="oncapture:"){const a=m.slice(10);x&&b.removeEventListener(a,x,!0),_&&b.addEventListener(a,_,!0)}else if(m.slice(0,2)==="on"){const a=m.slice(2).toLowerCase(),f=Ur.has(a);if(!f&&x){const v=Array.isArray(x)?x[0]:x;b.removeEventListener(a,v)}(f||_)&&(qr(b,a,_,f),f&&ar([a]))}else if(m.slice(0,5)==="attr:")et(b,m.slice(5),_);else if(m.slice(0,5)==="bool:")Kr(b,m.slice(5),_);else if((o=m.slice(0,5)==="prop:")||(l=Wr.has(m))||!M&&((u=$r(m,b.tagName))||(n=Hr.has(m)))||(s=b.nodeName.includes("-")||"is"in R))o&&(m=m.slice(5),n=!0),m==="class"||m==="className"?hr(b,_):s&&!n&&!l?b[Zr(m)]=_:b[u||m]=_;else{const a=M&&m.indexOf(":")>-1&&Gr[m.split(":")[0]];a?Yr(b,a,m,_):et(b,Fr[m]||m,_)}return _}function Qr(b){let m=b.target;const _=`$$${b.type}`,x=b.target,M=b.currentTarget,O=n=>Object.defineProperty(b,"target",{configurable:!0,value:n}),R=()=>{const n=m[_];if(n&&!m.disabled){const l=m[`${_}Data`];if(l!==void 0?n.call(m,l,b):n.call(m,b),b.cancelBubble)return}return m.host&&typeof m.host!="string"&&!m.host._$host&&m.contains(b.target)&&O(m.host),!0},s=()=>{for(;R()&&(m=m._$host||m.parentNode||m.host););};if(Object.defineProperty(b,"currentTarget",{configurable:!0,get(){return m||document}}),b.composedPath){const n=b.composedPath();O(n[0]);for(let l=0;l<n.length-2&&(m=n[l],!!R());l++){if(m._$host){m=m._$host,s();break}if(m.parentNode===M)break}}else s();O(x)}function Le(b,m,_,x,M){for(;typeof _=="function";)_=_();if(m===_)return _;const O=typeof m,R=x!==void 0;if(b=R&&_[0]&&_[0].parentNode||b,O==="string"||O==="number"){if(O==="number"&&(m=m.toString(),m===_))return _;if(R){let s=_[0];s&&s.nodeType===3?s.data!==m&&(s.data=m):s=document.createTextNode(m),_=ke(b,_,x,s)}else _!==""&&typeof _=="string"?_=b.firstChild.data=m:_=b.textContent=m}else if(m==null||O==="boolean")_=ke(b,_,x);else{if(O==="function")return fe(()=>{let s=m();for(;typeof s=="function";)s=s();_=Le(b,s,_,x)}),()=>_;if(Array.isArray(m)){const s=[],n=_&&Array.isArray(_);if(tt(s,m,_,M))return fe(()=>_=Le(b,s,_,x,!0)),()=>_;if(s.length===0){if(_=ke(b,_,x),R)return _}else n?_.length===0?qi(b,s,x):jr(b,_,s):(_&&ke(b),qi(b,s));_=s}else if(m.nodeType){if(Array.isArray(_)){if(R)return _=ke(b,_,x,m);ke(b,_,null,m)}else _==null||_===""||!b.firstChild?b.appendChild(m):b.replaceChild(m,b.firstChild);_=m}}return _}function tt(b,m,_,x){let M=!1;for(let O=0,R=m.length;O<R;O++){let s=m[O],n=_&&_[b.length],l;if(!(s==null||s===!0||s===!1))if((l=typeof s)=="object"&&s.nodeType)b.push(s);else if(Array.isArray(s))M=tt(b,s,n)||M;else if(l==="function")if(x){for(;typeof s=="function";)s=s();M=tt(b,Array.isArray(s)?s:[s],Array.isArray(n)?n:[n])||M}else b.push(s),M=!0;else{const u=String(s);n&&n.nodeType===3&&n.data===u?b.push(n):b.push(document.createTextNode(u))}}return M}function qi(b,m,_=null){for(let x=0,M=m.length;x<M;x++)b.insertBefore(m[x],_)}function ke(b,m,_,x){if(_===void 0)return b.textContent="";const M=x||document.createTextNode("");if(m.length){let O=!1;for(let R=m.length-1;R>=0;R--){const s=m[R];if(M!==s){const n=s.parentNode===b;!O&&!R?n?b.replaceChild(M,s):b.insertBefore(M,_):n&&s.remove()}else O=!0}}else b.insertBefore(M,_);return[M]}var es=typeof global=="object"&&global&&global.Object===Object&&global;const ts=es;var is=typeof self=="object"&&self&&self.Object===Object&&self,rs=ts||is||Function("return this")();const lr=rs;var ss=lr.Symbol;const ze=ss;var fr=Object.prototype,ns=fr.hasOwnProperty,os=fr.toString,Me=ze?ze.toStringTag:void 0;function as(b){var m=ns.call(b,Me),_=b[Me];try{b[Me]=void 0;var x=!0}catch{}var M=os.call(b);return x&&(m?b[Me]=_:delete b[Me]),M}var hs=Object.prototype,cs=hs.toString;function ls(b){return cs.call(b)}var fs="[object Null]",ds="[object Undefined]",Vi=ze?ze.toStringTag:void 0;function us(b){return b==null?b===void 0?ds:fs:Vi&&Vi in Object(b)?as(b):ls(b)}function _s(b){return b!=null&&typeof b=="object"}var gs="[object Symbol]";function bs(b){return typeof b=="symbol"||_s(b)&&us(b)==gs}var vs=/\s/;function ps(b){for(var m=b.length;m--&&vs.test(b.charAt(m)););return m}var ms=/^\s+/;function Ss(b){return b&&b.slice(0,ps(b)+1).replace(ms,"")}function it(b){var m=typeof b;return b!=null&&(m=="object"||m=="function")}var Xi=0/0,ws=/^[-+]0x[0-9a-f]+$/i,ys=/^0b[01]+$/i,Cs=/^0o[0-7]+$/i,ks=parseInt;function Ji(b){if(typeof b=="number")return b;if(bs(b))return Xi;if(it(b)){var m=typeof b.valueOf=="function"?b.valueOf():b;b=it(m)?m+"":m}if(typeof b!="string")return b===0?b:+b;b=Ss(b);var _=ys.test(b);return _||Cs.test(b)?ks(b.slice(2),_?2:8):ws.test(b)?Xi:+b}var Es=function(){return lr.Date.now()};const Ze=Es;var Bs="Expected a function",Rs=Math.max,Ls=Math.min;function Ds(b,m,_){var x,M,O,R,s,n,l=0,u=!1,o=!1,a=!0;if(typeof b!="function")throw new TypeError(Bs);m=Ji(m)||0,it(_)&&(u=!!_.leading,o="maxWait"in _,O=o?Rs(Ji(_.maxWait)||0,m):O,a="trailing"in _?!!_.trailing:a);function f(g){var S=x,d=M;return x=M=void 0,l=g,R=b.apply(d,S),R}function v(g){return l=g,s=setTimeout(i,m),u?f(g):R}function h(g){var S=g-n,d=g-l,w=m-S;return o?Ls(w,O-d):w}function t(g){var S=g-n,d=g-l;return n===void 0||S>=m||S<0||o&&d>=O}function i(){var g=Ze();if(t(g))return e(g);s=setTimeout(i,h(g))}function e(g){return s=void 0,a&&x?f(g):(x=M=void 0,R)}function r(){s!==void 0&&clearTimeout(s),l=0,x=n=M=s=void 0}function c(){return s===void 0?R:e(Ze())}function p(){var g=Ze(),S=t(g);if(x=arguments,M=this,n=g,S){if(s===void 0)return v(n);if(o)return clearTimeout(s),s=setTimeout(i,m),f(n)}return s===void 0&&(s=setTimeout(i,m)),R}return p.cancel=r,p.flush=c,p}var xs=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},dr={exports:{}};(function(b,m){(function(_,x){b.exports=x()})(globalThis,()=>(()=>{var _={4567:function(R,s,n){var l=this&&this.__decorate||function(e,r,c,p){var g,S=arguments.length,d=S<3?r:p===null?p=Object.getOwnPropertyDescriptor(r,c):p;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")d=Reflect.decorate(e,r,c,p);else for(var w=e.length-1;w>=0;w--)(g=e[w])&&(d=(S<3?g(d):S>3?g(r,c,d):g(r,c))||d);return S>3&&d&&Object.defineProperty(r,c,d),d},u=this&&this.__param||function(e,r){return function(c,p){r(c,p,e)}};Object.defineProperty(s,"__esModule",{value:!0}),s.AccessibilityManager=void 0;const o=n(9042),a=n(9924),f=n(844),v=n(4725),h=n(2585),t=n(3656);let i=s.AccessibilityManager=class extends f.Disposable{constructor(e,r,c,p){super(),this._terminal=e,this._coreBrowserService=c,this._renderService=p,this._rowColumns=new WeakMap,this._liveRegionLineCount=0,this._charsToConsume=[],this._charsToAnnounce="",this._accessibilityContainer=this._coreBrowserService.mainDocument.createElement("div"),this._accessibilityContainer.classList.add("xterm-accessibility"),this._rowContainer=this._coreBrowserService.mainDocument.createElement("div"),this._rowContainer.setAttribute("role","list"),this._rowContainer.classList.add("xterm-accessibility-tree"),this._rowElements=[];for(let g=0;g<this._terminal.rows;g++)this._rowElements[g]=this._createAccessibilityTreeNode(),this._rowContainer.appendChild(this._rowElements[g]);if(this._topBoundaryFocusListener=g=>this._handleBoundaryFocus(g,0),this._bottomBoundaryFocusListener=g=>this._handleBoundaryFocus(g,1),this._rowElements[0].addEventListener("focus",this._topBoundaryFocusListener),this._rowElements[this._rowElements.length-1].addEventListener("focus",this._bottomBoundaryFocusListener),this._refreshRowsDimensions(),this._accessibilityContainer.appendChild(this._rowContainer),this._liveRegion=this._coreBrowserService.mainDocument.createElement("div"),this._liveRegion.classList.add("live-region"),this._liveRegion.setAttribute("aria-live","assertive"),this._accessibilityContainer.appendChild(this._liveRegion),this._liveRegionDebouncer=this.register(new a.TimeBasedDebouncer(this._renderRows.bind(this))),!this._terminal.element)throw new Error("Cannot enable accessibility before Terminal.open");this._terminal.element.insertAdjacentElement("afterbegin",this._accessibilityContainer),this.register(this._terminal.onResize(g=>this._handleResize(g.rows))),this.register(this._terminal.onRender(g=>this._refreshRows(g.start,g.end))),this.register(this._terminal.onScroll(()=>this._refreshRows())),this.register(this._terminal.onA11yChar(g=>this._handleChar(g))),this.register(this._terminal.onLineFeed(()=>this._handleChar(`
`))),this.register(this._terminal.onA11yTab(g=>this._handleTab(g))),this.register(this._terminal.onKey(g=>this._handleKey(g.key))),this.register(this._terminal.onBlur(()=>this._clearLiveRegion())),this.register(this._renderService.onDimensionsChange(()=>this._refreshRowsDimensions())),this.register((0,t.addDisposableDomListener)(document,"selectionchange",()=>this._handleSelectionChange())),this.register(this._coreBrowserService.onDprChange(()=>this._refreshRowsDimensions())),this._refreshRows(),this.register((0,f.toDisposable)(()=>{this._accessibilityContainer.remove(),this._rowElements.length=0}))}_handleTab(e){for(let r=0;r<e;r++)this._handleChar(" ")}_handleChar(e){this._liveRegionLineCount<21&&(this._charsToConsume.length>0?this._charsToConsume.shift()!==e&&(this._charsToAnnounce+=e):this._charsToAnnounce+=e,e===`
`&&(this._liveRegionLineCount++,this._liveRegionLineCount===21&&(this._liveRegion.textContent+=o.tooMuchOutput)))}_clearLiveRegion(){this._liveRegion.textContent="",this._liveRegionLineCount=0}_handleKey(e){this._clearLiveRegion(),/\p{Control}/u.test(e)||this._charsToConsume.push(e)}_refreshRows(e,r){this._liveRegionDebouncer.refresh(e,r,this._terminal.rows)}_renderRows(e,r){const c=this._terminal.buffer,p=c.lines.length.toString();for(let g=e;g<=r;g++){const S=c.lines.get(c.ydisp+g),d=[],w=S?.translateToString(!0,void 0,void 0,d)||"",L=(c.ydisp+g+1).toString(),B=this._rowElements[g];B&&(w.length===0?(B.innerText=" ",this._rowColumns.set(B,[0,1])):(B.textContent=w,this._rowColumns.set(B,d)),B.setAttribute("aria-posinset",L),B.setAttribute("aria-setsize",p))}this._announceCharacters()}_announceCharacters(){this._charsToAnnounce.length!==0&&(this._liveRegion.textContent+=this._charsToAnnounce,this._charsToAnnounce="")}_handleBoundaryFocus(e,r){const c=e.target,p=this._rowElements[r===0?1:this._rowElements.length-2];if(c.getAttribute("aria-posinset")===(r===0?"1":`${this._terminal.buffer.lines.length}`)||e.relatedTarget!==p)return;let g,S;if(r===0?(g=c,S=this._rowElements.pop(),this._rowContainer.removeChild(S)):(g=this._rowElements.shift(),S=c,this._rowContainer.removeChild(g)),g.removeEventListener("focus",this._topBoundaryFocusListener),S.removeEventListener("focus",this._bottomBoundaryFocusListener),r===0){const d=this._createAccessibilityTreeNode();this._rowElements.unshift(d),this._rowContainer.insertAdjacentElement("afterbegin",d)}else{const d=this._createAccessibilityTreeNode();this._rowElements.push(d),this._rowContainer.appendChild(d)}this._rowElements[0].addEventListener("focus",this._topBoundaryFocusListener),this._rowElements[this._rowElements.length-1].addEventListener("focus",this._bottomBoundaryFocusListener),this._terminal.scrollLines(r===0?-1:1),this._rowElements[r===0?1:this._rowElements.length-2].focus(),e.preventDefault(),e.stopImmediatePropagation()}_handleSelectionChange(){if(this._rowElements.length===0)return;const e=document.getSelection();if(!e)return;if(e.isCollapsed)return void(this._rowContainer.contains(e.anchorNode)&&this._terminal.clearSelection());if(!e.anchorNode||!e.focusNode)return void console.error("anchorNode and/or focusNode are null");let r={node:e.anchorNode,offset:e.anchorOffset},c={node:e.focusNode,offset:e.focusOffset};if((r.node.compareDocumentPosition(c.node)&Node.DOCUMENT_POSITION_PRECEDING||r.node===c.node&&r.offset>c.offset)&&([r,c]=[c,r]),r.node.compareDocumentPosition(this._rowElements[0])&(Node.DOCUMENT_POSITION_CONTAINED_BY|Node.DOCUMENT_POSITION_FOLLOWING)&&(r={node:this._rowElements[0].childNodes[0],offset:0}),!this._rowContainer.contains(r.node))return;const p=this._rowElements.slice(-1)[0];if(c.node.compareDocumentPosition(p)&(Node.DOCUMENT_POSITION_CONTAINED_BY|Node.DOCUMENT_POSITION_PRECEDING)&&(c={node:p,offset:p.textContent?.length??0}),!this._rowContainer.contains(c.node))return;const g=({node:w,offset:L})=>{const B=w instanceof Text?w.parentNode:w;let A=parseInt(B?.getAttribute("aria-posinset"),10)-1;if(isNaN(A))return console.warn("row is invalid. Race condition?"),null;const k=this._rowColumns.get(B);if(!k)return console.warn("columns is null. Race condition?"),null;let I=L<k.length?k[L]:k.slice(-1)[0]+1;return I>=this._terminal.cols&&(++A,I=0),{row:A,column:I}},S=g(r),d=g(c);if(S&&d){if(S.row>d.row||S.row===d.row&&S.column>=d.column)throw new Error("invalid range");this._terminal.select(S.column,S.row,(d.row-S.row)*this._terminal.cols-S.column+d.column)}}_handleResize(e){this._rowElements[this._rowElements.length-1].removeEventListener("focus",this._bottomBoundaryFocusListener);for(let r=this._rowContainer.children.length;r<this._terminal.rows;r++)this._rowElements[r]=this._createAccessibilityTreeNode(),this._rowContainer.appendChild(this._rowElements[r]);for(;this._rowElements.length>e;)this._rowContainer.removeChild(this._rowElements.pop());this._rowElements[this._rowElements.length-1].addEventListener("focus",this._bottomBoundaryFocusListener),this._refreshRowsDimensions()}_createAccessibilityTreeNode(){const e=this._coreBrowserService.mainDocument.createElement("div");return e.setAttribute("role","listitem"),e.tabIndex=-1,this._refreshRowDimensions(e),e}_refreshRowsDimensions(){if(this._renderService.dimensions.css.cell.height){this._accessibilityContainer.style.width=`${this._renderService.dimensions.css.canvas.width}px`,this._rowElements.length!==this._terminal.rows&&this._handleResize(this._terminal.rows);for(let e=0;e<this._terminal.rows;e++)this._refreshRowDimensions(this._rowElements[e])}}_refreshRowDimensions(e){e.style.height=`${this._renderService.dimensions.css.cell.height}px`}};s.AccessibilityManager=i=l([u(1,h.IInstantiationService),u(2,v.ICoreBrowserService),u(3,v.IRenderService)],i)},3614:(R,s)=>{function n(a){return a.replace(/\r?\n/g,"\r")}function l(a,f){return f?"\x1B[200~"+a+"\x1B[201~":a}function u(a,f,v,h){a=l(a=n(a),v.decPrivateModes.bracketedPasteMode&&h.rawOptions.ignoreBracketedPasteMode!==!0),v.triggerDataEvent(a,!0),f.value=""}function o(a,f,v){const h=v.getBoundingClientRect(),t=a.clientX-h.left-10,i=a.clientY-h.top-10;f.style.width="20px",f.style.height="20px",f.style.left=`${t}px`,f.style.top=`${i}px`,f.style.zIndex="1000",f.focus()}Object.defineProperty(s,"__esModule",{value:!0}),s.rightClickHandler=s.moveTextAreaUnderMouseCursor=s.paste=s.handlePasteEvent=s.copyHandler=s.bracketTextForPaste=s.prepareTextForTerminal=void 0,s.prepareTextForTerminal=n,s.bracketTextForPaste=l,s.copyHandler=function(a,f){a.clipboardData&&a.clipboardData.setData("text/plain",f.selectionText),a.preventDefault()},s.handlePasteEvent=function(a,f,v,h){a.stopPropagation(),a.clipboardData&&u(a.clipboardData.getData("text/plain"),f,v,h)},s.paste=u,s.moveTextAreaUnderMouseCursor=o,s.rightClickHandler=function(a,f,v,h,t){o(a,f,v),t&&h.rightClickSelect(a),f.value=h.selectionText,f.select()}},7239:(R,s,n)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.ColorContrastCache=void 0;const l=n(1505);s.ColorContrastCache=class{constructor(){this._color=new l.TwoKeyMap,this._css=new l.TwoKeyMap}setCss(u,o,a){this._css.set(u,o,a)}getCss(u,o){return this._css.get(u,o)}setColor(u,o,a){this._color.set(u,o,a)}getColor(u,o){return this._color.get(u,o)}clear(){this._color.clear(),this._css.clear()}}},3656:(R,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.addDisposableDomListener=void 0,s.addDisposableDomListener=function(n,l,u,o){n.addEventListener(l,u,o);let a=!1;return{dispose:()=>{a||(a=!0,n.removeEventListener(l,u,o))}}}},3551:function(R,s,n){var l=this&&this.__decorate||function(i,e,r,c){var p,g=arguments.length,S=g<3?e:c===null?c=Object.getOwnPropertyDescriptor(e,r):c;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")S=Reflect.decorate(i,e,r,c);else for(var d=i.length-1;d>=0;d--)(p=i[d])&&(S=(g<3?p(S):g>3?p(e,r,S):p(e,r))||S);return g>3&&S&&Object.defineProperty(e,r,S),S},u=this&&this.__param||function(i,e){return function(r,c){e(r,c,i)}};Object.defineProperty(s,"__esModule",{value:!0}),s.Linkifier=void 0;const o=n(3656),a=n(8460),f=n(844),v=n(2585),h=n(4725);let t=s.Linkifier=class extends f.Disposable{get currentLink(){return this._currentLink}constructor(i,e,r,c,p){super(),this._element=i,this._mouseService=e,this._renderService=r,this._bufferService=c,this._linkProviderService=p,this._linkCacheDisposables=[],this._isMouseOut=!0,this._wasResized=!1,this._activeLine=-1,this._onShowLinkUnderline=this.register(new a.EventEmitter),this.onShowLinkUnderline=this._onShowLinkUnderline.event,this._onHideLinkUnderline=this.register(new a.EventEmitter),this.onHideLinkUnderline=this._onHideLinkUnderline.event,this.register((0,f.getDisposeArrayDisposable)(this._linkCacheDisposables)),this.register((0,f.toDisposable)(()=>{this._lastMouseEvent=void 0,this._activeProviderReplies?.clear()})),this.register(this._bufferService.onResize(()=>{this._clearCurrentLink(),this._wasResized=!0})),this.register((0,o.addDisposableDomListener)(this._element,"mouseleave",()=>{this._isMouseOut=!0,this._clearCurrentLink()})),this.register((0,o.addDisposableDomListener)(this._element,"mousemove",this._handleMouseMove.bind(this))),this.register((0,o.addDisposableDomListener)(this._element,"mousedown",this._handleMouseDown.bind(this))),this.register((0,o.addDisposableDomListener)(this._element,"mouseup",this._handleMouseUp.bind(this)))}_handleMouseMove(i){this._lastMouseEvent=i;const e=this._positionFromMouseEvent(i,this._element,this._mouseService);if(!e)return;this._isMouseOut=!1;const r=i.composedPath();for(let c=0;c<r.length;c++){const p=r[c];if(p.classList.contains("xterm"))break;if(p.classList.contains("xterm-hover"))return}this._lastBufferCell&&e.x===this._lastBufferCell.x&&e.y===this._lastBufferCell.y||(this._handleHover(e),this._lastBufferCell=e)}_handleHover(i){if(this._activeLine!==i.y||this._wasResized)return this._clearCurrentLink(),this._askForLink(i,!1),void(this._wasResized=!1);this._currentLink&&this._linkAtPosition(this._currentLink.link,i)||(this._clearCurrentLink(),this._askForLink(i,!0))}_askForLink(i,e){this._activeProviderReplies&&e||(this._activeProviderReplies?.forEach(c=>{c?.forEach(p=>{p.link.dispose&&p.link.dispose()})}),this._activeProviderReplies=new Map,this._activeLine=i.y);let r=!1;for(const[c,p]of this._linkProviderService.linkProviders.entries())e?this._activeProviderReplies?.get(c)&&(r=this._checkLinkProviderResult(c,i,r)):p.provideLinks(i.y,g=>{if(this._isMouseOut)return;const S=g?.map(d=>({link:d}));this._activeProviderReplies?.set(c,S),r=this._checkLinkProviderResult(c,i,r),this._activeProviderReplies?.size===this._linkProviderService.linkProviders.length&&this._removeIntersectingLinks(i.y,this._activeProviderReplies)})}_removeIntersectingLinks(i,e){const r=new Set;for(let c=0;c<e.size;c++){const p=e.get(c);if(p)for(let g=0;g<p.length;g++){const S=p[g],d=S.link.range.start.y<i?0:S.link.range.start.x,w=S.link.range.end.y>i?this._bufferService.cols:S.link.range.end.x;for(let L=d;L<=w;L++){if(r.has(L)){p.splice(g--,1);break}r.add(L)}}}}_checkLinkProviderResult(i,e,r){if(!this._activeProviderReplies)return r;const c=this._activeProviderReplies.get(i);let p=!1;for(let g=0;g<i;g++)this._activeProviderReplies.has(g)&&!this._activeProviderReplies.get(g)||(p=!0);if(!p&&c){const g=c.find(S=>this._linkAtPosition(S.link,e));g&&(r=!0,this._handleNewLink(g))}if(this._activeProviderReplies.size===this._linkProviderService.linkProviders.length&&!r)for(let g=0;g<this._activeProviderReplies.size;g++){const S=this._activeProviderReplies.get(g)?.find(d=>this._linkAtPosition(d.link,e));if(S){r=!0,this._handleNewLink(S);break}}return r}_handleMouseDown(){this._mouseDownLink=this._currentLink}_handleMouseUp(i){if(!this._currentLink)return;const e=this._positionFromMouseEvent(i,this._element,this._mouseService);e&&this._mouseDownLink===this._currentLink&&this._linkAtPosition(this._currentLink.link,e)&&this._currentLink.link.activate(i,this._currentLink.link.text)}_clearCurrentLink(i,e){this._currentLink&&this._lastMouseEvent&&(!i||!e||this._currentLink.link.range.start.y>=i&&this._currentLink.link.range.end.y<=e)&&(this._linkLeave(this._element,this._currentLink.link,this._lastMouseEvent),this._currentLink=void 0,(0,f.disposeArray)(this._linkCacheDisposables))}_handleNewLink(i){if(!this._lastMouseEvent)return;const e=this._positionFromMouseEvent(this._lastMouseEvent,this._element,this._mouseService);e&&this._linkAtPosition(i.link,e)&&(this._currentLink=i,this._currentLink.state={decorations:{underline:i.link.decorations===void 0||i.link.decorations.underline,pointerCursor:i.link.decorations===void 0||i.link.decorations.pointerCursor},isHovered:!0},this._linkHover(this._element,i.link,this._lastMouseEvent),i.link.decorations={},Object.defineProperties(i.link.decorations,{pointerCursor:{get:()=>this._currentLink?.state?.decorations.pointerCursor,set:r=>{this._currentLink?.state&&this._currentLink.state.decorations.pointerCursor!==r&&(this._currentLink.state.decorations.pointerCursor=r,this._currentLink.state.isHovered&&this._element.classList.toggle("xterm-cursor-pointer",r))}},underline:{get:()=>this._currentLink?.state?.decorations.underline,set:r=>{this._currentLink?.state&&this._currentLink?.state?.decorations.underline!==r&&(this._currentLink.state.decorations.underline=r,this._currentLink.state.isHovered&&this._fireUnderlineEvent(i.link,r))}}}),this._linkCacheDisposables.push(this._renderService.onRenderedViewportChange(r=>{if(!this._currentLink)return;const c=r.start===0?0:r.start+1+this._bufferService.buffer.ydisp,p=this._bufferService.buffer.ydisp+1+r.end;if(this._currentLink.link.range.start.y>=c&&this._currentLink.link.range.end.y<=p&&(this._clearCurrentLink(c,p),this._lastMouseEvent)){const g=this._positionFromMouseEvent(this._lastMouseEvent,this._element,this._mouseService);g&&this._askForLink(g,!1)}})))}_linkHover(i,e,r){this._currentLink?.state&&(this._currentLink.state.isHovered=!0,this._currentLink.state.decorations.underline&&this._fireUnderlineEvent(e,!0),this._currentLink.state.decorations.pointerCursor&&i.classList.add("xterm-cursor-pointer")),e.hover&&e.hover(r,e.text)}_fireUnderlineEvent(i,e){const r=i.range,c=this._bufferService.buffer.ydisp,p=this._createLinkUnderlineEvent(r.start.x-1,r.start.y-c-1,r.end.x,r.end.y-c-1,void 0);(e?this._onShowLinkUnderline:this._onHideLinkUnderline).fire(p)}_linkLeave(i,e,r){this._currentLink?.state&&(this._currentLink.state.isHovered=!1,this._currentLink.state.decorations.underline&&this._fireUnderlineEvent(e,!1),this._currentLink.state.decorations.pointerCursor&&i.classList.remove("xterm-cursor-pointer")),e.leave&&e.leave(r,e.text)}_linkAtPosition(i,e){const r=i.range.start.y*this._bufferService.cols+i.range.start.x,c=i.range.end.y*this._bufferService.cols+i.range.end.x,p=e.y*this._bufferService.cols+e.x;return r<=p&&p<=c}_positionFromMouseEvent(i,e,r){const c=r.getCoords(i,e,this._bufferService.cols,this._bufferService.rows);if(c)return{x:c[0],y:c[1]+this._bufferService.buffer.ydisp}}_createLinkUnderlineEvent(i,e,r,c,p){return{x1:i,y1:e,x2:r,y2:c,cols:this._bufferService.cols,fg:p}}};s.Linkifier=t=l([u(1,h.IMouseService),u(2,h.IRenderService),u(3,v.IBufferService),u(4,h.ILinkProviderService)],t)},9042:(R,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.tooMuchOutput=s.promptLabel=void 0,s.promptLabel="Terminal input",s.tooMuchOutput="Too much output to announce, navigate to rows manually to read"},3730:function(R,s,n){var l=this&&this.__decorate||function(h,t,i,e){var r,c=arguments.length,p=c<3?t:e===null?e=Object.getOwnPropertyDescriptor(t,i):e;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")p=Reflect.decorate(h,t,i,e);else for(var g=h.length-1;g>=0;g--)(r=h[g])&&(p=(c<3?r(p):c>3?r(t,i,p):r(t,i))||p);return c>3&&p&&Object.defineProperty(t,i,p),p},u=this&&this.__param||function(h,t){return function(i,e){t(i,e,h)}};Object.defineProperty(s,"__esModule",{value:!0}),s.OscLinkProvider=void 0;const o=n(511),a=n(2585);let f=s.OscLinkProvider=class{constructor(h,t,i){this._bufferService=h,this._optionsService=t,this._oscLinkService=i}provideLinks(h,t){const i=this._bufferService.buffer.lines.get(h-1);if(!i)return void t(void 0);const e=[],r=this._optionsService.rawOptions.linkHandler,c=new o.CellData,p=i.getTrimmedLength();let g=-1,S=-1,d=!1;for(let w=0;w<p;w++)if(S!==-1||i.hasContent(w)){if(i.loadCell(w,c),c.hasExtendedAttrs()&&c.extended.urlId){if(S===-1){S=w,g=c.extended.urlId;continue}d=c.extended.urlId!==g}else S!==-1&&(d=!0);if(d||S!==-1&&w===p-1){const L=this._oscLinkService.getLinkData(g)?.uri;if(L){const B={start:{x:S+1,y:h},end:{x:w+(d||w!==p-1?0:1),y:h}};let A=!1;if(!r?.allowNonHttpProtocols)try{const k=new URL(L);["http:","https:"].includes(k.protocol)||(A=!0)}catch{A=!0}A||e.push({text:L,range:B,activate:(k,I)=>r?r.activate(k,I,B):v(0,I),hover:(k,I)=>r?.hover?.(k,I,B),leave:(k,I)=>r?.leave?.(k,I,B)})}d=!1,c.hasExtendedAttrs()&&c.extended.urlId?(S=w,g=c.extended.urlId):(S=-1,g=-1)}}t(e)}};function v(h,t){if(confirm(`Do you want to navigate to ${t}?

WARNING: This link could potentially be dangerous`)){const i=window.open();if(i){try{i.opener=null}catch{}i.location.href=t}else console.warn("Opening link blocked as opener could not be cleared")}}s.OscLinkProvider=f=l([u(0,a.IBufferService),u(1,a.IOptionsService),u(2,a.IOscLinkService)],f)},6193:(R,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.RenderDebouncer=void 0,s.RenderDebouncer=class{constructor(n,l){this._renderCallback=n,this._coreBrowserService=l,this._refreshCallbacks=[]}dispose(){this._animationFrame&&(this._coreBrowserService.window.cancelAnimationFrame(this._animationFrame),this._animationFrame=void 0)}addRefreshCallback(n){return this._refreshCallbacks.push(n),this._animationFrame||(this._animationFrame=this._coreBrowserService.window.requestAnimationFrame(()=>this._innerRefresh())),this._animationFrame}refresh(n,l,u){this._rowCount=u,n=n!==void 0?n:0,l=l!==void 0?l:this._rowCount-1,this._rowStart=this._rowStart!==void 0?Math.min(this._rowStart,n):n,this._rowEnd=this._rowEnd!==void 0?Math.max(this._rowEnd,l):l,this._animationFrame||(this._animationFrame=this._coreBrowserService.window.requestAnimationFrame(()=>this._innerRefresh()))}_innerRefresh(){if(this._animationFrame=void 0,this._rowStart===void 0||this._rowEnd===void 0||this._rowCount===void 0)return void this._runRefreshCallbacks();const n=Math.max(this._rowStart,0),l=Math.min(this._rowEnd,this._rowCount-1);this._rowStart=void 0,this._rowEnd=void 0,this._renderCallback(n,l),this._runRefreshCallbacks()}_runRefreshCallbacks(){for(const n of this._refreshCallbacks)n(0);this._refreshCallbacks=[]}}},3236:(R,s,n)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.Terminal=void 0;const l=n(3614),u=n(3656),o=n(3551),a=n(9042),f=n(3730),v=n(1680),h=n(3107),t=n(5744),i=n(2950),e=n(1296),r=n(428),c=n(4269),p=n(5114),g=n(8934),S=n(3230),d=n(9312),w=n(4725),L=n(6731),B=n(8055),A=n(8969),k=n(8460),I=n(844),W=n(6114),U=n(8437),Y=n(2584),$=n(7399),y=n(5941),E=n(9074),D=n(2585),T=n(5435),F=n(4567),G=n(779);class K extends A.CoreTerminal{get onFocus(){return this._onFocus.event}get onBlur(){return this._onBlur.event}get onA11yChar(){return this._onA11yCharEmitter.event}get onA11yTab(){return this._onA11yTabEmitter.event}get onWillOpen(){return this._onWillOpen.event}constructor(P={}){super(P),this.browser=W,this._keyDownHandled=!1,this._keyDownSeen=!1,this._keyPressHandled=!1,this._unprocessedDeadKey=!1,this._accessibilityManager=this.register(new I.MutableDisposable),this._onCursorMove=this.register(new k.EventEmitter),this.onCursorMove=this._onCursorMove.event,this._onKey=this.register(new k.EventEmitter),this.onKey=this._onKey.event,this._onRender=this.register(new k.EventEmitter),this.onRender=this._onRender.event,this._onSelectionChange=this.register(new k.EventEmitter),this.onSelectionChange=this._onSelectionChange.event,this._onTitleChange=this.register(new k.EventEmitter),this.onTitleChange=this._onTitleChange.event,this._onBell=this.register(new k.EventEmitter),this.onBell=this._onBell.event,this._onFocus=this.register(new k.EventEmitter),this._onBlur=this.register(new k.EventEmitter),this._onA11yCharEmitter=this.register(new k.EventEmitter),this._onA11yTabEmitter=this.register(new k.EventEmitter),this._onWillOpen=this.register(new k.EventEmitter),this._setup(),this._decorationService=this._instantiationService.createInstance(E.DecorationService),this._instantiationService.setService(D.IDecorationService,this._decorationService),this._linkProviderService=this._instantiationService.createInstance(G.LinkProviderService),this._instantiationService.setService(w.ILinkProviderService,this._linkProviderService),this._linkProviderService.registerLinkProvider(this._instantiationService.createInstance(f.OscLinkProvider)),this.register(this._inputHandler.onRequestBell(()=>this._onBell.fire())),this.register(this._inputHandler.onRequestRefreshRows((C,H)=>this.refresh(C,H))),this.register(this._inputHandler.onRequestSendFocus(()=>this._reportFocus())),this.register(this._inputHandler.onRequestReset(()=>this.reset())),this.register(this._inputHandler.onRequestWindowsOptionsReport(C=>this._reportWindowsOptions(C))),this.register(this._inputHandler.onColor(C=>this._handleColorEvent(C))),this.register((0,k.forwardEvent)(this._inputHandler.onCursorMove,this._onCursorMove)),this.register((0,k.forwardEvent)(this._inputHandler.onTitleChange,this._onTitleChange)),this.register((0,k.forwardEvent)(this._inputHandler.onA11yChar,this._onA11yCharEmitter)),this.register((0,k.forwardEvent)(this._inputHandler.onA11yTab,this._onA11yTabEmitter)),this.register(this._bufferService.onResize(C=>this._afterResize(C.cols,C.rows))),this.register((0,I.toDisposable)(()=>{this._customKeyEventHandler=void 0,this.element?.parentNode?.removeChild(this.element)}))}_handleColorEvent(P){if(this._themeService)for(const C of P){let H,N="";switch(C.index){case 256:H="foreground",N="10";break;case 257:H="background",N="11";break;case 258:H="cursor",N="12";break;default:H="ansi",N="4;"+C.index}switch(C.type){case 0:const z=B.color.toColorRGB(H==="ansi"?this._themeService.colors.ansi[C.index]:this._themeService.colors[H]);this.coreService.triggerDataEvent(`${Y.C0.ESC}]${N};${(0,y.toRgbString)(z)}${Y.C1_ESCAPED.ST}`);break;case 1:if(H==="ansi")this._themeService.modifyColors(j=>j.ansi[C.index]=B.channels.toColor(...C.color));else{const j=H;this._themeService.modifyColors(X=>X[j]=B.channels.toColor(...C.color))}break;case 2:this._themeService.restoreColor(C.index)}}}_setup(){super._setup(),this._customKeyEventHandler=void 0}get buffer(){return this.buffers.active}focus(){this.textarea&&this.textarea.focus({preventScroll:!0})}_handleScreenReaderModeOptionChange(P){P?!this._accessibilityManager.value&&this._renderService&&(this._accessibilityManager.value=this._instantiationService.createInstance(F.AccessibilityManager,this)):this._accessibilityManager.clear()}_handleTextAreaFocus(P){this.coreService.decPrivateModes.sendFocus&&this.coreService.triggerDataEvent(Y.C0.ESC+"[I"),this.element.classList.add("focus"),this._showCursor(),this._onFocus.fire()}blur(){return this.textarea?.blur()}_handleTextAreaBlur(){this.textarea.value="",this.refresh(this.buffer.y,this.buffer.y),this.coreService.decPrivateModes.sendFocus&&this.coreService.triggerDataEvent(Y.C0.ESC+"[O"),this.element.classList.remove("focus"),this._onBlur.fire()}_syncTextArea(){if(!this.textarea||!this.buffer.isCursorInViewport||this._compositionHelper.isComposing||!this._renderService)return;const P=this.buffer.ybase+this.buffer.y,C=this.buffer.lines.get(P);if(!C)return;const H=Math.min(this.buffer.x,this.cols-1),N=this._renderService.dimensions.css.cell.height,z=C.getWidth(H),j=this._renderService.dimensions.css.cell.width*z,X=this.buffer.y*this._renderService.dimensions.css.cell.height,Z=H*this._renderService.dimensions.css.cell.width;this.textarea.style.left=Z+"px",this.textarea.style.top=X+"px",this.textarea.style.width=j+"px",this.textarea.style.height=N+"px",this.textarea.style.lineHeight=N+"px",this.textarea.style.zIndex="-5"}_initGlobal(){this._bindKeys(),this.register((0,u.addDisposableDomListener)(this.element,"copy",C=>{this.hasSelection()&&(0,l.copyHandler)(C,this._selectionService)}));const P=C=>(0,l.handlePasteEvent)(C,this.textarea,this.coreService,this.optionsService);this.register((0,u.addDisposableDomListener)(this.textarea,"paste",P)),this.register((0,u.addDisposableDomListener)(this.element,"paste",P)),W.isFirefox?this.register((0,u.addDisposableDomListener)(this.element,"mousedown",C=>{C.button===2&&(0,l.rightClickHandler)(C,this.textarea,this.screenElement,this._selectionService,this.options.rightClickSelectsWord)})):this.register((0,u.addDisposableDomListener)(this.element,"contextmenu",C=>{(0,l.rightClickHandler)(C,this.textarea,this.screenElement,this._selectionService,this.options.rightClickSelectsWord)})),W.isLinux&&this.register((0,u.addDisposableDomListener)(this.element,"auxclick",C=>{C.button===1&&(0,l.moveTextAreaUnderMouseCursor)(C,this.textarea,this.screenElement)}))}_bindKeys(){this.register((0,u.addDisposableDomListener)(this.textarea,"keyup",P=>this._keyUp(P),!0)),this.register((0,u.addDisposableDomListener)(this.textarea,"keydown",P=>this._keyDown(P),!0)),this.register((0,u.addDisposableDomListener)(this.textarea,"keypress",P=>this._keyPress(P),!0)),this.register((0,u.addDisposableDomListener)(this.textarea,"compositionstart",()=>this._compositionHelper.compositionstart())),this.register((0,u.addDisposableDomListener)(this.textarea,"compositionupdate",P=>this._compositionHelper.compositionupdate(P))),this.register((0,u.addDisposableDomListener)(this.textarea,"compositionend",()=>this._compositionHelper.compositionend())),this.register((0,u.addDisposableDomListener)(this.textarea,"input",P=>this._inputEvent(P),!0)),this.register(this.onRender(()=>this._compositionHelper.updateCompositionElements()))}open(P){if(!P)throw new Error("Terminal requires a parent element.");if(P.isConnected||this._logService.debug("Terminal.open was called on an element that was not attached to the DOM"),this.element?.ownerDocument.defaultView&&this._coreBrowserService)return void(this.element.ownerDocument.defaultView!==this._coreBrowserService.window&&(this._coreBrowserService.window=this.element.ownerDocument.defaultView));this._document=P.ownerDocument,this.options.documentOverride&&this.options.documentOverride instanceof Document&&(this._document=this.optionsService.rawOptions.documentOverride),this.element=this._document.createElement("div"),this.element.dir="ltr",this.element.classList.add("terminal"),this.element.classList.add("xterm"),P.appendChild(this.element);const C=this._document.createDocumentFragment();this._viewportElement=this._document.createElement("div"),this._viewportElement.classList.add("xterm-viewport"),C.appendChild(this._viewportElement),this._viewportScrollArea=this._document.createElement("div"),this._viewportScrollArea.classList.add("xterm-scroll-area"),this._viewportElement.appendChild(this._viewportScrollArea),this.screenElement=this._document.createElement("div"),this.screenElement.classList.add("xterm-screen"),this.register((0,u.addDisposableDomListener)(this.screenElement,"mousemove",H=>this.updateCursorStyle(H))),this._helperContainer=this._document.createElement("div"),this._helperContainer.classList.add("xterm-helpers"),this.screenElement.appendChild(this._helperContainer),C.appendChild(this.screenElement),this.textarea=this._document.createElement("textarea"),this.textarea.classList.add("xterm-helper-textarea"),this.textarea.setAttribute("aria-label",a.promptLabel),W.isChromeOS||this.textarea.setAttribute("aria-multiline","false"),this.textarea.setAttribute("autocorrect","off"),this.textarea.setAttribute("autocapitalize","off"),this.textarea.setAttribute("spellcheck","false"),this.textarea.tabIndex=0,this._coreBrowserService=this.register(this._instantiationService.createInstance(p.CoreBrowserService,this.textarea,P.ownerDocument.defaultView??window,this._document??typeof window<"u"?window.document:null)),this._instantiationService.setService(w.ICoreBrowserService,this._coreBrowserService),this.register((0,u.addDisposableDomListener)(this.textarea,"focus",H=>this._handleTextAreaFocus(H))),this.register((0,u.addDisposableDomListener)(this.textarea,"blur",()=>this._handleTextAreaBlur())),this._helperContainer.appendChild(this.textarea),this._charSizeService=this._instantiationService.createInstance(r.CharSizeService,this._document,this._helperContainer),this._instantiationService.setService(w.ICharSizeService,this._charSizeService),this._themeService=this._instantiationService.createInstance(L.ThemeService),this._instantiationService.setService(w.IThemeService,this._themeService),this._characterJoinerService=this._instantiationService.createInstance(c.CharacterJoinerService),this._instantiationService.setService(w.ICharacterJoinerService,this._characterJoinerService),this._renderService=this.register(this._instantiationService.createInstance(S.RenderService,this.rows,this.screenElement)),this._instantiationService.setService(w.IRenderService,this._renderService),this.register(this._renderService.onRenderedViewportChange(H=>this._onRender.fire(H))),this.onResize(H=>this._renderService.resize(H.cols,H.rows)),this._compositionView=this._document.createElement("div"),this._compositionView.classList.add("composition-view"),this._compositionHelper=this._instantiationService.createInstance(i.CompositionHelper,this.textarea,this._compositionView),this._helperContainer.appendChild(this._compositionView),this._mouseService=this._instantiationService.createInstance(g.MouseService),this._instantiationService.setService(w.IMouseService,this._mouseService),this.linkifier=this.register(this._instantiationService.createInstance(o.Linkifier,this.screenElement)),this.element.appendChild(C);try{this._onWillOpen.fire(this.element)}catch{}this._renderService.hasRenderer()||this._renderService.setRenderer(this._createRenderer()),this.viewport=this._instantiationService.createInstance(v.Viewport,this._viewportElement,this._viewportScrollArea),this.viewport.onRequestScrollLines(H=>this.scrollLines(H.amount,H.suppressScrollEvent,1)),this.register(this._inputHandler.onRequestSyncScrollBar(()=>this.viewport.syncScrollArea())),this.register(this.viewport),this.register(this.onCursorMove(()=>{this._renderService.handleCursorMove(),this._syncTextArea()})),this.register(this.onResize(()=>this._renderService.handleResize(this.cols,this.rows))),this.register(this.onBlur(()=>this._renderService.handleBlur())),this.register(this.onFocus(()=>this._renderService.handleFocus())),this.register(this._renderService.onDimensionsChange(()=>this.viewport.syncScrollArea())),this._selectionService=this.register(this._instantiationService.createInstance(d.SelectionService,this.element,this.screenElement,this.linkifier)),this._instantiationService.setService(w.ISelectionService,this._selectionService),this.register(this._selectionService.onRequestScrollLines(H=>this.scrollLines(H.amount,H.suppressScrollEvent))),this.register(this._selectionService.onSelectionChange(()=>this._onSelectionChange.fire())),this.register(this._selectionService.onRequestRedraw(H=>this._renderService.handleSelectionChanged(H.start,H.end,H.columnSelectMode))),this.register(this._selectionService.onLinuxMouseSelection(H=>{this.textarea.value=H,this.textarea.focus(),this.textarea.select()})),this.register(this._onScroll.event(H=>{this.viewport.syncScrollArea(),this._selectionService.refresh()})),this.register((0,u.addDisposableDomListener)(this._viewportElement,"scroll",()=>this._selectionService.refresh())),this.register(this._instantiationService.createInstance(h.BufferDecorationRenderer,this.screenElement)),this.register((0,u.addDisposableDomListener)(this.element,"mousedown",H=>this._selectionService.handleMouseDown(H))),this.coreMouseService.areMouseEventsActive?(this._selectionService.disable(),this.element.classList.add("enable-mouse-events")):this._selectionService.enable(),this.options.screenReaderMode&&(this._accessibilityManager.value=this._instantiationService.createInstance(F.AccessibilityManager,this)),this.register(this.optionsService.onSpecificOptionChange("screenReaderMode",H=>this._handleScreenReaderModeOptionChange(H))),this.options.overviewRulerWidth&&(this._overviewRulerRenderer=this.register(this._instantiationService.createInstance(t.OverviewRulerRenderer,this._viewportElement,this.screenElement))),this.optionsService.onSpecificOptionChange("overviewRulerWidth",H=>{!this._overviewRulerRenderer&&H&&this._viewportElement&&this.screenElement&&(this._overviewRulerRenderer=this.register(this._instantiationService.createInstance(t.OverviewRulerRenderer,this._viewportElement,this.screenElement)))}),this._charSizeService.measure(),this.refresh(0,this.rows-1),this._initGlobal(),this.bindMouse()}_createRenderer(){return this._instantiationService.createInstance(e.DomRenderer,this,this._document,this.element,this.screenElement,this._viewportElement,this._helperContainer,this.linkifier)}bindMouse(){const P=this,C=this.element;function H(j){const X=P._mouseService.getMouseReportCoords(j,P.screenElement);if(!X)return!1;let Z,Q;switch(j.overrideType||j.type){case"mousemove":Q=32,j.buttons===void 0?(Z=3,j.button!==void 0&&(Z=j.button<3?j.button:3)):Z=1&j.buttons?0:4&j.buttons?1:2&j.buttons?2:3;break;case"mouseup":Q=0,Z=j.button<3?j.button:3;break;case"mousedown":Q=1,Z=j.button<3?j.button:3;break;case"wheel":if(P._customWheelEventHandler&&P._customWheelEventHandler(j)===!1||P.viewport.getLinesScrolled(j)===0)return!1;Q=j.deltaY<0?0:1,Z=4;break;default:return!1}return!(Q===void 0||Z===void 0||Z>4)&&P.coreMouseService.triggerMouseEvent({col:X.col,row:X.row,x:X.x,y:X.y,button:Z,action:Q,ctrl:j.ctrlKey,alt:j.altKey,shift:j.shiftKey})}const N={mouseup:null,wheel:null,mousedrag:null,mousemove:null},z={mouseup:j=>(H(j),j.buttons||(this._document.removeEventListener("mouseup",N.mouseup),N.mousedrag&&this._document.removeEventListener("mousemove",N.mousedrag)),this.cancel(j)),wheel:j=>(H(j),this.cancel(j,!0)),mousedrag:j=>{j.buttons&&H(j)},mousemove:j=>{j.buttons||H(j)}};this.register(this.coreMouseService.onProtocolChange(j=>{j?(this.optionsService.rawOptions.logLevel==="debug"&&this._logService.debug("Binding to mouse events:",this.coreMouseService.explainEvents(j)),this.element.classList.add("enable-mouse-events"),this._selectionService.disable()):(this._logService.debug("Unbinding from mouse events."),this.element.classList.remove("enable-mouse-events"),this._selectionService.enable()),8&j?N.mousemove||(C.addEventListener("mousemove",z.mousemove),N.mousemove=z.mousemove):(C.removeEventListener("mousemove",N.mousemove),N.mousemove=null),16&j?N.wheel||(C.addEventListener("wheel",z.wheel,{passive:!1}),N.wheel=z.wheel):(C.removeEventListener("wheel",N.wheel),N.wheel=null),2&j?N.mouseup||(N.mouseup=z.mouseup):(this._document.removeEventListener("mouseup",N.mouseup),N.mouseup=null),4&j?N.mousedrag||(N.mousedrag=z.mousedrag):(this._document.removeEventListener("mousemove",N.mousedrag),N.mousedrag=null)})),this.coreMouseService.activeProtocol=this.coreMouseService.activeProtocol,this.register((0,u.addDisposableDomListener)(C,"mousedown",j=>{if(j.preventDefault(),this.focus(),this.coreMouseService.areMouseEventsActive&&!this._selectionService.shouldForceSelection(j))return H(j),N.mouseup&&this._document.addEventListener("mouseup",N.mouseup),N.mousedrag&&this._document.addEventListener("mousemove",N.mousedrag),this.cancel(j)})),this.register((0,u.addDisposableDomListener)(C,"wheel",j=>{if(!N.wheel){if(this._customWheelEventHandler&&this._customWheelEventHandler(j)===!1)return!1;if(!this.buffer.hasScrollback){const X=this.viewport.getLinesScrolled(j);if(X===0)return;const Z=Y.C0.ESC+(this.coreService.decPrivateModes.applicationCursorKeys?"O":"[")+(j.deltaY<0?"A":"B");let Q="";for(let ie=0;ie<Math.abs(X);ie++)Q+=Z;return this.coreService.triggerDataEvent(Q,!0),this.cancel(j,!0)}return this.viewport.handleWheel(j)?this.cancel(j):void 0}},{passive:!1})),this.register((0,u.addDisposableDomListener)(C,"touchstart",j=>{if(!this.coreMouseService.areMouseEventsActive)return this.viewport.handleTouchStart(j),this.cancel(j)},{passive:!0})),this.register((0,u.addDisposableDomListener)(C,"touchmove",j=>{if(!this.coreMouseService.areMouseEventsActive)return this.viewport.handleTouchMove(j)?void 0:this.cancel(j)},{passive:!1}))}refresh(P,C){this._renderService?.refreshRows(P,C)}updateCursorStyle(P){this._selectionService?.shouldColumnSelect(P)?this.element.classList.add("column-select"):this.element.classList.remove("column-select")}_showCursor(){this.coreService.isCursorInitialized||(this.coreService.isCursorInitialized=!0,this.refresh(this.buffer.y,this.buffer.y))}scrollLines(P,C,H=0){H===1?(super.scrollLines(P,C,H),this.refresh(0,this.rows-1)):this.viewport?.scrollLines(P)}paste(P){(0,l.paste)(P,this.textarea,this.coreService,this.optionsService)}attachCustomKeyEventHandler(P){this._customKeyEventHandler=P}attachCustomWheelEventHandler(P){this._customWheelEventHandler=P}registerLinkProvider(P){return this._linkProviderService.registerLinkProvider(P)}registerCharacterJoiner(P){if(!this._characterJoinerService)throw new Error("Terminal must be opened first");const C=this._characterJoinerService.register(P);return this.refresh(0,this.rows-1),C}deregisterCharacterJoiner(P){if(!this._characterJoinerService)throw new Error("Terminal must be opened first");this._characterJoinerService.deregister(P)&&this.refresh(0,this.rows-1)}get markers(){return this.buffer.markers}registerMarker(P){return this.buffer.addMarker(this.buffer.ybase+this.buffer.y+P)}registerDecoration(P){return this._decorationService.registerDecoration(P)}hasSelection(){return!!this._selectionService&&this._selectionService.hasSelection}select(P,C,H){this._selectionService.setSelection(P,C,H)}getSelection(){return this._selectionService?this._selectionService.selectionText:""}getSelectionPosition(){if(this._selectionService&&this._selectionService.hasSelection)return{start:{x:this._selectionService.selectionStart[0],y:this._selectionService.selectionStart[1]},end:{x:this._selectionService.selectionEnd[0],y:this._selectionService.selectionEnd[1]}}}clearSelection(){this._selectionService?.clearSelection()}selectAll(){this._selectionService?.selectAll()}selectLines(P,C){this._selectionService?.selectLines(P,C)}_keyDown(P){if(this._keyDownHandled=!1,this._keyDownSeen=!0,this._customKeyEventHandler&&this._customKeyEventHandler(P)===!1)return!1;const C=this.browser.isMac&&this.options.macOptionIsMeta&&P.altKey;if(!C&&!this._compositionHelper.keydown(P))return this.options.scrollOnUserInput&&this.buffer.ybase!==this.buffer.ydisp&&this.scrollToBottom(),!1;C||P.key!=="Dead"&&P.key!=="AltGraph"||(this._unprocessedDeadKey=!0);const H=(0,$.evaluateKeyboardEvent)(P,this.coreService.decPrivateModes.applicationCursorKeys,this.browser.isMac,this.options.macOptionIsMeta);if(this.updateCursorStyle(P),H.type===3||H.type===2){const N=this.rows-1;return this.scrollLines(H.type===2?-N:N),this.cancel(P,!0)}return H.type===1&&this.selectAll(),!!this._isThirdLevelShift(this.browser,P)||(H.cancel&&this.cancel(P,!0),!H.key||!!(P.key&&!P.ctrlKey&&!P.altKey&&!P.metaKey&&P.key.length===1&&P.key.charCodeAt(0)>=65&&P.key.charCodeAt(0)<=90)||(this._unprocessedDeadKey?(this._unprocessedDeadKey=!1,!0):(H.key!==Y.C0.ETX&&H.key!==Y.C0.CR||(this.textarea.value=""),this._onKey.fire({key:H.key,domEvent:P}),this._showCursor(),this.coreService.triggerDataEvent(H.key,!0),!this.optionsService.rawOptions.screenReaderMode||P.altKey||P.ctrlKey?this.cancel(P,!0):void(this._keyDownHandled=!0))))}_isThirdLevelShift(P,C){const H=P.isMac&&!this.options.macOptionIsMeta&&C.altKey&&!C.ctrlKey&&!C.metaKey||P.isWindows&&C.altKey&&C.ctrlKey&&!C.metaKey||P.isWindows&&C.getModifierState("AltGraph");return C.type==="keypress"?H:H&&(!C.keyCode||C.keyCode>47)}_keyUp(P){this._keyDownSeen=!1,this._customKeyEventHandler&&this._customKeyEventHandler(P)===!1||(function(C){return C.keyCode===16||C.keyCode===17||C.keyCode===18}(P)||this.focus(),this.updateCursorStyle(P),this._keyPressHandled=!1)}_keyPress(P){let C;if(this._keyPressHandled=!1,this._keyDownHandled||this._customKeyEventHandler&&this._customKeyEventHandler(P)===!1)return!1;if(this.cancel(P),P.charCode)C=P.charCode;else if(P.which===null||P.which===void 0)C=P.keyCode;else{if(P.which===0||P.charCode===0)return!1;C=P.which}return!(!C||(P.altKey||P.ctrlKey||P.metaKey)&&!this._isThirdLevelShift(this.browser,P)||(C=String.fromCharCode(C),this._onKey.fire({key:C,domEvent:P}),this._showCursor(),this.coreService.triggerDataEvent(C,!0),this._keyPressHandled=!0,this._unprocessedDeadKey=!1,0))}_inputEvent(P){if(P.data&&P.inputType==="insertText"&&(!P.composed||!this._keyDownSeen)&&!this.optionsService.rawOptions.screenReaderMode){if(this._keyPressHandled)return!1;this._unprocessedDeadKey=!1;const C=P.data;return this.coreService.triggerDataEvent(C,!0),this.cancel(P),!0}return!1}resize(P,C){P!==this.cols||C!==this.rows?super.resize(P,C):this._charSizeService&&!this._charSizeService.hasValidSize&&this._charSizeService.measure()}_afterResize(P,C){this._charSizeService?.measure(),this.viewport?.syncScrollArea(!0)}clear(){if(this.buffer.ybase!==0||this.buffer.y!==0){this.buffer.clearAllMarkers(),this.buffer.lines.set(0,this.buffer.lines.get(this.buffer.ybase+this.buffer.y)),this.buffer.lines.length=1,this.buffer.ydisp=0,this.buffer.ybase=0,this.buffer.y=0;for(let P=1;P<this.rows;P++)this.buffer.lines.push(this.buffer.getBlankLine(U.DEFAULT_ATTR_DATA));this._onScroll.fire({position:this.buffer.ydisp,source:0}),this.viewport?.reset(),this.refresh(0,this.rows-1)}}reset(){this.options.rows=this.rows,this.options.cols=this.cols;const P=this._customKeyEventHandler;this._setup(),super.reset(),this._selectionService?.reset(),this._decorationService.reset(),this.viewport?.reset(),this._customKeyEventHandler=P,this.refresh(0,this.rows-1)}clearTextureAtlas(){this._renderService?.clearTextureAtlas()}_reportFocus(){this.element?.classList.contains("focus")?this.coreService.triggerDataEvent(Y.C0.ESC+"[I"):this.coreService.triggerDataEvent(Y.C0.ESC+"[O")}_reportWindowsOptions(P){if(this._renderService)switch(P){case T.WindowsOptionsReportType.GET_WIN_SIZE_PIXELS:const C=this._renderService.dimensions.css.canvas.width.toFixed(0),H=this._renderService.dimensions.css.canvas.height.toFixed(0);this.coreService.triggerDataEvent(`${Y.C0.ESC}[4;${H};${C}t`);break;case T.WindowsOptionsReportType.GET_CELL_SIZE_PIXELS:const N=this._renderService.dimensions.css.cell.width.toFixed(0),z=this._renderService.dimensions.css.cell.height.toFixed(0);this.coreService.triggerDataEvent(`${Y.C0.ESC}[6;${z};${N}t`)}}cancel(P,C){if(this.options.cancelEvents||C)return P.preventDefault(),P.stopPropagation(),!1}}s.Terminal=K},9924:(R,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.TimeBasedDebouncer=void 0,s.TimeBasedDebouncer=class{constructor(n,l=1e3){this._renderCallback=n,this._debounceThresholdMS=l,this._lastRefreshMs=0,this._additionalRefreshRequested=!1}dispose(){this._refreshTimeoutID&&clearTimeout(this._refreshTimeoutID)}refresh(n,l,u){this._rowCount=u,n=n!==void 0?n:0,l=l!==void 0?l:this._rowCount-1,this._rowStart=this._rowStart!==void 0?Math.min(this._rowStart,n):n,this._rowEnd=this._rowEnd!==void 0?Math.max(this._rowEnd,l):l;const o=Date.now();if(o-this._lastRefreshMs>=this._debounceThresholdMS)this._lastRefreshMs=o,this._innerRefresh();else if(!this._additionalRefreshRequested){const a=o-this._lastRefreshMs,f=this._debounceThresholdMS-a;this._additionalRefreshRequested=!0,this._refreshTimeoutID=window.setTimeout(()=>{this._lastRefreshMs=Date.now(),this._innerRefresh(),this._additionalRefreshRequested=!1,this._refreshTimeoutID=void 0},f)}}_innerRefresh(){if(this._rowStart===void 0||this._rowEnd===void 0||this._rowCount===void 0)return;const n=Math.max(this._rowStart,0),l=Math.min(this._rowEnd,this._rowCount-1);this._rowStart=void 0,this._rowEnd=void 0,this._renderCallback(n,l)}}},1680:function(R,s,n){var l=this&&this.__decorate||function(i,e,r,c){var p,g=arguments.length,S=g<3?e:c===null?c=Object.getOwnPropertyDescriptor(e,r):c;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")S=Reflect.decorate(i,e,r,c);else for(var d=i.length-1;d>=0;d--)(p=i[d])&&(S=(g<3?p(S):g>3?p(e,r,S):p(e,r))||S);return g>3&&S&&Object.defineProperty(e,r,S),S},u=this&&this.__param||function(i,e){return function(r,c){e(r,c,i)}};Object.defineProperty(s,"__esModule",{value:!0}),s.Viewport=void 0;const o=n(3656),a=n(4725),f=n(8460),v=n(844),h=n(2585);let t=s.Viewport=class extends v.Disposable{constructor(i,e,r,c,p,g,S,d){super(),this._viewportElement=i,this._scrollArea=e,this._bufferService=r,this._optionsService=c,this._charSizeService=p,this._renderService=g,this._coreBrowserService=S,this.scrollBarWidth=0,this._currentRowHeight=0,this._currentDeviceCellHeight=0,this._lastRecordedBufferLength=0,this._lastRecordedViewportHeight=0,this._lastRecordedBufferHeight=0,this._lastTouchY=0,this._lastScrollTop=0,this._wheelPartialScroll=0,this._refreshAnimationFrame=null,this._ignoreNextScrollEvent=!1,this._smoothScrollState={startTime:0,origin:-1,target:-1},this._onRequestScrollLines=this.register(new f.EventEmitter),this.onRequestScrollLines=this._onRequestScrollLines.event,this.scrollBarWidth=this._viewportElement.offsetWidth-this._scrollArea.offsetWidth||15,this.register((0,o.addDisposableDomListener)(this._viewportElement,"scroll",this._handleScroll.bind(this))),this._activeBuffer=this._bufferService.buffer,this.register(this._bufferService.buffers.onBufferActivate(w=>this._activeBuffer=w.activeBuffer)),this._renderDimensions=this._renderService.dimensions,this.register(this._renderService.onDimensionsChange(w=>this._renderDimensions=w)),this._handleThemeChange(d.colors),this.register(d.onChangeColors(w=>this._handleThemeChange(w))),this.register(this._optionsService.onSpecificOptionChange("scrollback",()=>this.syncScrollArea())),setTimeout(()=>this.syncScrollArea())}_handleThemeChange(i){this._viewportElement.style.backgroundColor=i.background.css}reset(){this._currentRowHeight=0,this._currentDeviceCellHeight=0,this._lastRecordedBufferLength=0,this._lastRecordedViewportHeight=0,this._lastRecordedBufferHeight=0,this._lastTouchY=0,this._lastScrollTop=0,this._coreBrowserService.window.requestAnimationFrame(()=>this.syncScrollArea())}_refresh(i){if(i)return this._innerRefresh(),void(this._refreshAnimationFrame!==null&&this._coreBrowserService.window.cancelAnimationFrame(this._refreshAnimationFrame));this._refreshAnimationFrame===null&&(this._refreshAnimationFrame=this._coreBrowserService.window.requestAnimationFrame(()=>this._innerRefresh()))}_innerRefresh(){if(this._charSizeService.height>0){this._currentRowHeight=this._renderDimensions.device.cell.height/this._coreBrowserService.dpr,this._currentDeviceCellHeight=this._renderDimensions.device.cell.height,this._lastRecordedViewportHeight=this._viewportElement.offsetHeight;const e=Math.round(this._currentRowHeight*this._lastRecordedBufferLength)+(this._lastRecordedViewportHeight-this._renderDimensions.css.canvas.height);this._lastRecordedBufferHeight!==e&&(this._lastRecordedBufferHeight=e,this._scrollArea.style.height=this._lastRecordedBufferHeight+"px")}const i=this._bufferService.buffer.ydisp*this._currentRowHeight;this._viewportElement.scrollTop!==i&&(this._ignoreNextScrollEvent=!0,this._viewportElement.scrollTop=i),this._refreshAnimationFrame=null}syncScrollArea(i=!1){if(this._lastRecordedBufferLength!==this._bufferService.buffer.lines.length)return this._lastRecordedBufferLength=this._bufferService.buffer.lines.length,void this._refresh(i);this._lastRecordedViewportHeight===this._renderService.dimensions.css.canvas.height&&this._lastScrollTop===this._activeBuffer.ydisp*this._currentRowHeight&&this._renderDimensions.device.cell.height===this._currentDeviceCellHeight||this._refresh(i)}_handleScroll(i){if(this._lastScrollTop=this._viewportElement.scrollTop,!this._viewportElement.offsetParent)return;if(this._ignoreNextScrollEvent)return this._ignoreNextScrollEvent=!1,void this._onRequestScrollLines.fire({amount:0,suppressScrollEvent:!0});const e=Math.round(this._lastScrollTop/this._currentRowHeight)-this._bufferService.buffer.ydisp;this._onRequestScrollLines.fire({amount:e,suppressScrollEvent:!0})}_smoothScroll(){if(this._isDisposed||this._smoothScrollState.origin===-1||this._smoothScrollState.target===-1)return;const i=this._smoothScrollPercent();this._viewportElement.scrollTop=this._smoothScrollState.origin+Math.round(i*(this._smoothScrollState.target-this._smoothScrollState.origin)),i<1?this._coreBrowserService.window.requestAnimationFrame(()=>this._smoothScroll()):this._clearSmoothScrollState()}_smoothScrollPercent(){return this._optionsService.rawOptions.smoothScrollDuration&&this._smoothScrollState.startTime?Math.max(Math.min((Date.now()-this._smoothScrollState.startTime)/this._optionsService.rawOptions.smoothScrollDuration,1),0):1}_clearSmoothScrollState(){this._smoothScrollState.startTime=0,this._smoothScrollState.origin=-1,this._smoothScrollState.target=-1}_bubbleScroll(i,e){const r=this._viewportElement.scrollTop+this._lastRecordedViewportHeight;return!(e<0&&this._viewportElement.scrollTop!==0||e>0&&r<this._lastRecordedBufferHeight)||(i.cancelable&&i.preventDefault(),!1)}handleWheel(i){const e=this._getPixelsScrolled(i);return e!==0&&(this._optionsService.rawOptions.smoothScrollDuration?(this._smoothScrollState.startTime=Date.now(),this._smoothScrollPercent()<1?(this._smoothScrollState.origin=this._viewportElement.scrollTop,this._smoothScrollState.target===-1?this._smoothScrollState.target=this._viewportElement.scrollTop+e:this._smoothScrollState.target+=e,this._smoothScrollState.target=Math.max(Math.min(this._smoothScrollState.target,this._viewportElement.scrollHeight),0),this._smoothScroll()):this._clearSmoothScrollState()):this._viewportElement.scrollTop+=e,this._bubbleScroll(i,e))}scrollLines(i){if(i!==0)if(this._optionsService.rawOptions.smoothScrollDuration){const e=i*this._currentRowHeight;this._smoothScrollState.startTime=Date.now(),this._smoothScrollPercent()<1?(this._smoothScrollState.origin=this._viewportElement.scrollTop,this._smoothScrollState.target=this._smoothScrollState.origin+e,this._smoothScrollState.target=Math.max(Math.min(this._smoothScrollState.target,this._viewportElement.scrollHeight),0),this._smoothScroll()):this._clearSmoothScrollState()}else this._onRequestScrollLines.fire({amount:i,suppressScrollEvent:!1})}_getPixelsScrolled(i){if(i.deltaY===0||i.shiftKey)return 0;let e=this._applyScrollModifier(i.deltaY,i);return i.deltaMode===WheelEvent.DOM_DELTA_LINE?e*=this._currentRowHeight:i.deltaMode===WheelEvent.DOM_DELTA_PAGE&&(e*=this._currentRowHeight*this._bufferService.rows),e}getBufferElements(i,e){let r,c="";const p=[],g=e??this._bufferService.buffer.lines.length,S=this._bufferService.buffer.lines;for(let d=i;d<g;d++){const w=S.get(d);if(!w)continue;const L=S.get(d+1)?.isWrapped;if(c+=w.translateToString(!L),!L||d===S.length-1){const B=document.createElement("div");B.textContent=c,p.push(B),c.length>0&&(r=B),c=""}}return{bufferElements:p,cursorElement:r}}getLinesScrolled(i){if(i.deltaY===0||i.shiftKey)return 0;let e=this._applyScrollModifier(i.deltaY,i);return i.deltaMode===WheelEvent.DOM_DELTA_PIXEL?(e/=this._currentRowHeight+0,this._wheelPartialScroll+=e,e=Math.floor(Math.abs(this._wheelPartialScroll))*(this._wheelPartialScroll>0?1:-1),this._wheelPartialScroll%=1):i.deltaMode===WheelEvent.DOM_DELTA_PAGE&&(e*=this._bufferService.rows),e}_applyScrollModifier(i,e){const r=this._optionsService.rawOptions.fastScrollModifier;return r==="alt"&&e.altKey||r==="ctrl"&&e.ctrlKey||r==="shift"&&e.shiftKey?i*this._optionsService.rawOptions.fastScrollSensitivity*this._optionsService.rawOptions.scrollSensitivity:i*this._optionsService.rawOptions.scrollSensitivity}handleTouchStart(i){this._lastTouchY=i.touches[0].pageY}handleTouchMove(i){const e=this._lastTouchY-i.touches[0].pageY;return this._lastTouchY=i.touches[0].pageY,e!==0&&(this._viewportElement.scrollTop+=e,this._bubbleScroll(i,e))}};s.Viewport=t=l([u(2,h.IBufferService),u(3,h.IOptionsService),u(4,a.ICharSizeService),u(5,a.IRenderService),u(6,a.ICoreBrowserService),u(7,a.IThemeService)],t)},3107:function(R,s,n){var l=this&&this.__decorate||function(h,t,i,e){var r,c=arguments.length,p=c<3?t:e===null?e=Object.getOwnPropertyDescriptor(t,i):e;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")p=Reflect.decorate(h,t,i,e);else for(var g=h.length-1;g>=0;g--)(r=h[g])&&(p=(c<3?r(p):c>3?r(t,i,p):r(t,i))||p);return c>3&&p&&Object.defineProperty(t,i,p),p},u=this&&this.__param||function(h,t){return function(i,e){t(i,e,h)}};Object.defineProperty(s,"__esModule",{value:!0}),s.BufferDecorationRenderer=void 0;const o=n(4725),a=n(844),f=n(2585);let v=s.BufferDecorationRenderer=class extends a.Disposable{constructor(h,t,i,e,r){super(),this._screenElement=h,this._bufferService=t,this._coreBrowserService=i,this._decorationService=e,this._renderService=r,this._decorationElements=new Map,this._altBufferIsActive=!1,this._dimensionsChanged=!1,this._container=document.createElement("div"),this._container.classList.add("xterm-decoration-container"),this._screenElement.appendChild(this._container),this.register(this._renderService.onRenderedViewportChange(()=>this._doRefreshDecorations())),this.register(this._renderService.onDimensionsChange(()=>{this._dimensionsChanged=!0,this._queueRefresh()})),this.register(this._coreBrowserService.onDprChange(()=>this._queueRefresh())),this.register(this._bufferService.buffers.onBufferActivate(()=>{this._altBufferIsActive=this._bufferService.buffer===this._bufferService.buffers.alt})),this.register(this._decorationService.onDecorationRegistered(()=>this._queueRefresh())),this.register(this._decorationService.onDecorationRemoved(c=>this._removeDecoration(c))),this.register((0,a.toDisposable)(()=>{this._container.remove(),this._decorationElements.clear()}))}_queueRefresh(){this._animationFrame===void 0&&(this._animationFrame=this._renderService.addRefreshCallback(()=>{this._doRefreshDecorations(),this._animationFrame=void 0}))}_doRefreshDecorations(){for(const h of this._decorationService.decorations)this._renderDecoration(h);this._dimensionsChanged=!1}_renderDecoration(h){this._refreshStyle(h),this._dimensionsChanged&&this._refreshXPosition(h)}_createElement(h){const t=this._coreBrowserService.mainDocument.createElement("div");t.classList.add("xterm-decoration"),t.classList.toggle("xterm-decoration-top-layer",h?.options?.layer==="top"),t.style.width=`${Math.round((h.options.width||1)*this._renderService.dimensions.css.cell.width)}px`,t.style.height=(h.options.height||1)*this._renderService.dimensions.css.cell.height+"px",t.style.top=(h.marker.line-this._bufferService.buffers.active.ydisp)*this._renderService.dimensions.css.cell.height+"px",t.style.lineHeight=`${this._renderService.dimensions.css.cell.height}px`;const i=h.options.x??0;return i&&i>this._bufferService.cols&&(t.style.display="none"),this._refreshXPosition(h,t),t}_refreshStyle(h){const t=h.marker.line-this._bufferService.buffers.active.ydisp;if(t<0||t>=this._bufferService.rows)h.element&&(h.element.style.display="none",h.onRenderEmitter.fire(h.element));else{let i=this._decorationElements.get(h);i||(i=this._createElement(h),h.element=i,this._decorationElements.set(h,i),this._container.appendChild(i),h.onDispose(()=>{this._decorationElements.delete(h),i.remove()})),i.style.top=t*this._renderService.dimensions.css.cell.height+"px",i.style.display=this._altBufferIsActive?"none":"block",h.onRenderEmitter.fire(i)}}_refreshXPosition(h,t=h.element){if(!t)return;const i=h.options.x??0;(h.options.anchor||"left")==="right"?t.style.right=i?i*this._renderService.dimensions.css.cell.width+"px":"":t.style.left=i?i*this._renderService.dimensions.css.cell.width+"px":""}_removeDecoration(h){this._decorationElements.get(h)?.remove(),this._decorationElements.delete(h),h.dispose()}};s.BufferDecorationRenderer=v=l([u(1,f.IBufferService),u(2,o.ICoreBrowserService),u(3,f.IDecorationService),u(4,o.IRenderService)],v)},5871:(R,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.ColorZoneStore=void 0,s.ColorZoneStore=class{constructor(){this._zones=[],this._zonePool=[],this._zonePoolIndex=0,this._linePadding={full:0,left:0,center:0,right:0}}get zones(){return this._zonePool.length=Math.min(this._zonePool.length,this._zones.length),this._zones}clear(){this._zones.length=0,this._zonePoolIndex=0}addDecoration(n){if(n.options.overviewRulerOptions){for(const l of this._zones)if(l.color===n.options.overviewRulerOptions.color&&l.position===n.options.overviewRulerOptions.position){if(this._lineIntersectsZone(l,n.marker.line))return;if(this._lineAdjacentToZone(l,n.marker.line,n.options.overviewRulerOptions.position))return void this._addLineToZone(l,n.marker.line)}if(this._zonePoolIndex<this._zonePool.length)return this._zonePool[this._zonePoolIndex].color=n.options.overviewRulerOptions.color,this._zonePool[this._zonePoolIndex].position=n.options.overviewRulerOptions.position,this._zonePool[this._zonePoolIndex].startBufferLine=n.marker.line,this._zonePool[this._zonePoolIndex].endBufferLine=n.marker.line,void this._zones.push(this._zonePool[this._zonePoolIndex++]);this._zones.push({color:n.options.overviewRulerOptions.color,position:n.options.overviewRulerOptions.position,startBufferLine:n.marker.line,endBufferLine:n.marker.line}),this._zonePool.push(this._zones[this._zones.length-1]),this._zonePoolIndex++}}setPadding(n){this._linePadding=n}_lineIntersectsZone(n,l){return l>=n.startBufferLine&&l<=n.endBufferLine}_lineAdjacentToZone(n,l,u){return l>=n.startBufferLine-this._linePadding[u||"full"]&&l<=n.endBufferLine+this._linePadding[u||"full"]}_addLineToZone(n,l){n.startBufferLine=Math.min(n.startBufferLine,l),n.endBufferLine=Math.max(n.endBufferLine,l)}}},5744:function(R,s,n){var l=this&&this.__decorate||function(r,c,p,g){var S,d=arguments.length,w=d<3?c:g===null?g=Object.getOwnPropertyDescriptor(c,p):g;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")w=Reflect.decorate(r,c,p,g);else for(var L=r.length-1;L>=0;L--)(S=r[L])&&(w=(d<3?S(w):d>3?S(c,p,w):S(c,p))||w);return d>3&&w&&Object.defineProperty(c,p,w),w},u=this&&this.__param||function(r,c){return function(p,g){c(p,g,r)}};Object.defineProperty(s,"__esModule",{value:!0}),s.OverviewRulerRenderer=void 0;const o=n(5871),a=n(4725),f=n(844),v=n(2585),h={full:0,left:0,center:0,right:0},t={full:0,left:0,center:0,right:0},i={full:0,left:0,center:0,right:0};let e=s.OverviewRulerRenderer=class extends f.Disposable{get _width(){return this._optionsService.options.overviewRulerWidth||0}constructor(r,c,p,g,S,d,w){super(),this._viewportElement=r,this._screenElement=c,this._bufferService=p,this._decorationService=g,this._renderService=S,this._optionsService=d,this._coreBrowserService=w,this._colorZoneStore=new o.ColorZoneStore,this._shouldUpdateDimensions=!0,this._shouldUpdateAnchor=!0,this._lastKnownBufferLength=0,this._canvas=this._coreBrowserService.mainDocument.createElement("canvas"),this._canvas.classList.add("xterm-decoration-overview-ruler"),this._refreshCanvasDimensions(),this._viewportElement.parentElement?.insertBefore(this._canvas,this._viewportElement);const L=this._canvas.getContext("2d");if(!L)throw new Error("Ctx cannot be null");this._ctx=L,this._registerDecorationListeners(),this._registerBufferChangeListeners(),this._registerDimensionChangeListeners(),this.register((0,f.toDisposable)(()=>{this._canvas?.remove()}))}_registerDecorationListeners(){this.register(this._decorationService.onDecorationRegistered(()=>this._queueRefresh(void 0,!0))),this.register(this._decorationService.onDecorationRemoved(()=>this._queueRefresh(void 0,!0)))}_registerBufferChangeListeners(){this.register(this._renderService.onRenderedViewportChange(()=>this._queueRefresh())),this.register(this._bufferService.buffers.onBufferActivate(()=>{this._canvas.style.display=this._bufferService.buffer===this._bufferService.buffers.alt?"none":"block"})),this.register(this._bufferService.onScroll(()=>{this._lastKnownBufferLength!==this._bufferService.buffers.normal.lines.length&&(this._refreshDrawHeightConstants(),this._refreshColorZonePadding())}))}_registerDimensionChangeListeners(){this.register(this._renderService.onRender(()=>{this._containerHeight&&this._containerHeight===this._screenElement.clientHeight||(this._queueRefresh(!0),this._containerHeight=this._screenElement.clientHeight)})),this.register(this._optionsService.onSpecificOptionChange("overviewRulerWidth",()=>this._queueRefresh(!0))),this.register(this._coreBrowserService.onDprChange(()=>this._queueRefresh(!0))),this._queueRefresh(!0)}_refreshDrawConstants(){const r=Math.floor(this._canvas.width/3),c=Math.ceil(this._canvas.width/3);t.full=this._canvas.width,t.left=r,t.center=c,t.right=r,this._refreshDrawHeightConstants(),i.full=0,i.left=0,i.center=t.left,i.right=t.left+t.center}_refreshDrawHeightConstants(){h.full=Math.round(2*this._coreBrowserService.dpr);const r=this._canvas.height/this._bufferService.buffer.lines.length,c=Math.round(Math.max(Math.min(r,12),6)*this._coreBrowserService.dpr);h.left=c,h.center=c,h.right=c}_refreshColorZonePadding(){this._colorZoneStore.setPadding({full:Math.floor(this._bufferService.buffers.active.lines.length/(this._canvas.height-1)*h.full),left:Math.floor(this._bufferService.buffers.active.lines.length/(this._canvas.height-1)*h.left),center:Math.floor(this._bufferService.buffers.active.lines.length/(this._canvas.height-1)*h.center),right:Math.floor(this._bufferService.buffers.active.lines.length/(this._canvas.height-1)*h.right)}),this._lastKnownBufferLength=this._bufferService.buffers.normal.lines.length}_refreshCanvasDimensions(){this._canvas.style.width=`${this._width}px`,this._canvas.width=Math.round(this._width*this._coreBrowserService.dpr),this._canvas.style.height=`${this._screenElement.clientHeight}px`,this._canvas.height=Math.round(this._screenElement.clientHeight*this._coreBrowserService.dpr),this._refreshDrawConstants(),this._refreshColorZonePadding()}_refreshDecorations(){this._shouldUpdateDimensions&&this._refreshCanvasDimensions(),this._ctx.clearRect(0,0,this._canvas.width,this._canvas.height),this._colorZoneStore.clear();for(const c of this._decorationService.decorations)this._colorZoneStore.addDecoration(c);this._ctx.lineWidth=1;const r=this._colorZoneStore.zones;for(const c of r)c.position!=="full"&&this._renderColorZone(c);for(const c of r)c.position==="full"&&this._renderColorZone(c);this._shouldUpdateDimensions=!1,this._shouldUpdateAnchor=!1}_renderColorZone(r){this._ctx.fillStyle=r.color,this._ctx.fillRect(i[r.position||"full"],Math.round((this._canvas.height-1)*(r.startBufferLine/this._bufferService.buffers.active.lines.length)-h[r.position||"full"]/2),t[r.position||"full"],Math.round((this._canvas.height-1)*((r.endBufferLine-r.startBufferLine)/this._bufferService.buffers.active.lines.length)+h[r.position||"full"]))}_queueRefresh(r,c){this._shouldUpdateDimensions=r||this._shouldUpdateDimensions,this._shouldUpdateAnchor=c||this._shouldUpdateAnchor,this._animationFrame===void 0&&(this._animationFrame=this._coreBrowserService.window.requestAnimationFrame(()=>{this._refreshDecorations(),this._animationFrame=void 0}))}};s.OverviewRulerRenderer=e=l([u(2,v.IBufferService),u(3,v.IDecorationService),u(4,a.IRenderService),u(5,v.IOptionsService),u(6,a.ICoreBrowserService)],e)},2950:function(R,s,n){var l=this&&this.__decorate||function(h,t,i,e){var r,c=arguments.length,p=c<3?t:e===null?e=Object.getOwnPropertyDescriptor(t,i):e;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")p=Reflect.decorate(h,t,i,e);else for(var g=h.length-1;g>=0;g--)(r=h[g])&&(p=(c<3?r(p):c>3?r(t,i,p):r(t,i))||p);return c>3&&p&&Object.defineProperty(t,i,p),p},u=this&&this.__param||function(h,t){return function(i,e){t(i,e,h)}};Object.defineProperty(s,"__esModule",{value:!0}),s.CompositionHelper=void 0;const o=n(4725),a=n(2585),f=n(2584);let v=s.CompositionHelper=class{get isComposing(){return this._isComposing}constructor(h,t,i,e,r,c){this._textarea=h,this._compositionView=t,this._bufferService=i,this._optionsService=e,this._coreService=r,this._renderService=c,this._isComposing=!1,this._isSendingComposition=!1,this._compositionPosition={start:0,end:0},this._dataAlreadySent=""}compositionstart(){this._isComposing=!0,this._compositionPosition.start=this._textarea.value.length,this._compositionView.textContent="",this._dataAlreadySent="",this._compositionView.classList.add("active")}compositionupdate(h){this._compositionView.textContent=h.data,this.updateCompositionElements(),setTimeout(()=>{this._compositionPosition.end=this._textarea.value.length},0)}compositionend(){this._finalizeComposition(!0)}keydown(h){if(this._isComposing||this._isSendingComposition){if(h.keyCode===229||h.keyCode===16||h.keyCode===17||h.keyCode===18)return!1;this._finalizeComposition(!1)}return h.keyCode!==229||(this._handleAnyTextareaChanges(),!1)}_finalizeComposition(h){if(this._compositionView.classList.remove("active"),this._isComposing=!1,h){const t={start:this._compositionPosition.start,end:this._compositionPosition.end};this._isSendingComposition=!0,setTimeout(()=>{if(this._isSendingComposition){let i;this._isSendingComposition=!1,t.start+=this._dataAlreadySent.length,i=this._isComposing?this._textarea.value.substring(t.start,t.end):this._textarea.value.substring(t.start),i.length>0&&this._coreService.triggerDataEvent(i,!0)}},0)}else{this._isSendingComposition=!1;const t=this._textarea.value.substring(this._compositionPosition.start,this._compositionPosition.end);this._coreService.triggerDataEvent(t,!0)}}_handleAnyTextareaChanges(){const h=this._textarea.value;setTimeout(()=>{if(!this._isComposing){const t=this._textarea.value,i=t.replace(h,"");this._dataAlreadySent=i,t.length>h.length?this._coreService.triggerDataEvent(i,!0):t.length<h.length?this._coreService.triggerDataEvent(`${f.C0.DEL}`,!0):t.length===h.length&&t!==h&&this._coreService.triggerDataEvent(t,!0)}},0)}updateCompositionElements(h){if(this._isComposing){if(this._bufferService.buffer.isCursorInViewport){const t=Math.min(this._bufferService.buffer.x,this._bufferService.cols-1),i=this._renderService.dimensions.css.cell.height,e=this._bufferService.buffer.y*this._renderService.dimensions.css.cell.height,r=t*this._renderService.dimensions.css.cell.width;this._compositionView.style.left=r+"px",this._compositionView.style.top=e+"px",this._compositionView.style.height=i+"px",this._compositionView.style.lineHeight=i+"px",this._compositionView.style.fontFamily=this._optionsService.rawOptions.fontFamily,this._compositionView.style.fontSize=this._optionsService.rawOptions.fontSize+"px";const c=this._compositionView.getBoundingClientRect();this._textarea.style.left=r+"px",this._textarea.style.top=e+"px",this._textarea.style.width=Math.max(c.width,1)+"px",this._textarea.style.height=Math.max(c.height,1)+"px",this._textarea.style.lineHeight=c.height+"px"}h||setTimeout(()=>this.updateCompositionElements(!0),0)}}};s.CompositionHelper=v=l([u(2,a.IBufferService),u(3,a.IOptionsService),u(4,a.ICoreService),u(5,o.IRenderService)],v)},9806:(R,s)=>{function n(l,u,o){const a=o.getBoundingClientRect(),f=l.getComputedStyle(o),v=parseInt(f.getPropertyValue("padding-left")),h=parseInt(f.getPropertyValue("padding-top"));return[u.clientX-a.left-v,u.clientY-a.top-h]}Object.defineProperty(s,"__esModule",{value:!0}),s.getCoords=s.getCoordsRelativeToElement=void 0,s.getCoordsRelativeToElement=n,s.getCoords=function(l,u,o,a,f,v,h,t,i){if(!v)return;const e=n(l,u,o);return e?(e[0]=Math.ceil((e[0]+(i?h/2:0))/h),e[1]=Math.ceil(e[1]/t),e[0]=Math.min(Math.max(e[0],1),a+(i?1:0)),e[1]=Math.min(Math.max(e[1],1),f),e):void 0}},9504:(R,s,n)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.moveToCellSequence=void 0;const l=n(2584);function u(t,i,e,r){const c=t-o(t,e),p=i-o(i,e),g=Math.abs(c-p)-function(S,d,w){let L=0;const B=S-o(S,w),A=d-o(d,w);for(let k=0;k<Math.abs(B-A);k++){const I=a(S,d)==="A"?-1:1;w.buffer.lines.get(B+I*k)?.isWrapped&&L++}return L}(t,i,e);return h(g,v(a(t,i),r))}function o(t,i){let e=0,r=i.buffer.lines.get(t),c=r?.isWrapped;for(;c&&t>=0&&t<i.rows;)e++,r=i.buffer.lines.get(--t),c=r?.isWrapped;return e}function a(t,i){return t>i?"A":"B"}function f(t,i,e,r,c,p){let g=t,S=i,d="";for(;g!==e||S!==r;)g+=c?1:-1,c&&g>p.cols-1?(d+=p.buffer.translateBufferLineToString(S,!1,t,g),g=0,t=0,S++):!c&&g<0&&(d+=p.buffer.translateBufferLineToString(S,!1,0,t+1),g=p.cols-1,t=g,S--);return d+p.buffer.translateBufferLineToString(S,!1,t,g)}function v(t,i){const e=i?"O":"[";return l.C0.ESC+e+t}function h(t,i){t=Math.floor(t);let e="";for(let r=0;r<t;r++)e+=i;return e}s.moveToCellSequence=function(t,i,e,r){const c=e.buffer.x,p=e.buffer.y;if(!e.buffer.hasScrollback)return function(d,w,L,B,A,k){return u(w,B,A,k).length===0?"":h(f(d,w,d,w-o(w,A),!1,A).length,v("D",k))}(c,p,0,i,e,r)+u(p,i,e,r)+function(d,w,L,B,A,k){let I;I=u(w,B,A,k).length>0?B-o(B,A):w;const W=B,U=function(Y,$,y,E,D,T){let F;return F=u(y,E,D,T).length>0?E-o(E,D):$,Y<y&&F<=E||Y>=y&&F<E?"C":"D"}(d,w,L,B,A,k);return h(f(d,I,L,W,U==="C",A).length,v(U,k))}(c,p,t,i,e,r);let g;if(p===i)return g=c>t?"D":"C",h(Math.abs(c-t),v(g,r));g=p>i?"D":"C";const S=Math.abs(p-i);return h(function(d,w){return w.cols-d}(p>i?t:c,e)+(S-1)*e.cols+1+((p>i?c:t)-1),v(g,r))}},1296:function(R,s,n){var l=this&&this.__decorate||function(k,I,W,U){var Y,$=arguments.length,y=$<3?I:U===null?U=Object.getOwnPropertyDescriptor(I,W):U;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")y=Reflect.decorate(k,I,W,U);else for(var E=k.length-1;E>=0;E--)(Y=k[E])&&(y=($<3?Y(y):$>3?Y(I,W,y):Y(I,W))||y);return $>3&&y&&Object.defineProperty(I,W,y),y},u=this&&this.__param||function(k,I){return function(W,U){I(W,U,k)}};Object.defineProperty(s,"__esModule",{value:!0}),s.DomRenderer=void 0;const o=n(3787),a=n(2550),f=n(2223),v=n(6171),h=n(6052),t=n(4725),i=n(8055),e=n(8460),r=n(844),c=n(2585),p="xterm-dom-renderer-owner-",g="xterm-rows",S="xterm-fg-",d="xterm-bg-",w="xterm-focus",L="xterm-selection";let B=1,A=s.DomRenderer=class extends r.Disposable{constructor(k,I,W,U,Y,$,y,E,D,T,F,G,K){super(),this._terminal=k,this._document=I,this._element=W,this._screenElement=U,this._viewportElement=Y,this._helperContainer=$,this._linkifier2=y,this._charSizeService=D,this._optionsService=T,this._bufferService=F,this._coreBrowserService=G,this._themeService=K,this._terminalClass=B++,this._rowElements=[],this._selectionRenderModel=(0,h.createSelectionRenderModel)(),this.onRequestRedraw=this.register(new e.EventEmitter).event,this._rowContainer=this._document.createElement("div"),this._rowContainer.classList.add(g),this._rowContainer.style.lineHeight="normal",this._rowContainer.setAttribute("aria-hidden","true"),this._refreshRowElements(this._bufferService.cols,this._bufferService.rows),this._selectionContainer=this._document.createElement("div"),this._selectionContainer.classList.add(L),this._selectionContainer.setAttribute("aria-hidden","true"),this.dimensions=(0,v.createRenderDimensions)(),this._updateDimensions(),this.register(this._optionsService.onOptionChange(()=>this._handleOptionsChanged())),this.register(this._themeService.onChangeColors(q=>this._injectCss(q))),this._injectCss(this._themeService.colors),this._rowFactory=E.createInstance(o.DomRendererRowFactory,document),this._element.classList.add(p+this._terminalClass),this._screenElement.appendChild(this._rowContainer),this._screenElement.appendChild(this._selectionContainer),this.register(this._linkifier2.onShowLinkUnderline(q=>this._handleLinkHover(q))),this.register(this._linkifier2.onHideLinkUnderline(q=>this._handleLinkLeave(q))),this.register((0,r.toDisposable)(()=>{this._element.classList.remove(p+this._terminalClass),this._rowContainer.remove(),this._selectionContainer.remove(),this._widthCache.dispose(),this._themeStyleElement.remove(),this._dimensionsStyleElement.remove()})),this._widthCache=new a.WidthCache(this._document,this._helperContainer),this._widthCache.setFont(this._optionsService.rawOptions.fontFamily,this._optionsService.rawOptions.fontSize,this._optionsService.rawOptions.fontWeight,this._optionsService.rawOptions.fontWeightBold),this._setDefaultSpacing()}_updateDimensions(){const k=this._coreBrowserService.dpr;this.dimensions.device.char.width=this._charSizeService.width*k,this.dimensions.device.char.height=Math.ceil(this._charSizeService.height*k),this.dimensions.device.cell.width=this.dimensions.device.char.width+Math.round(this._optionsService.rawOptions.letterSpacing),this.dimensions.device.cell.height=Math.floor(this.dimensions.device.char.height*this._optionsService.rawOptions.lineHeight),this.dimensions.device.char.left=0,this.dimensions.device.char.top=0,this.dimensions.device.canvas.width=this.dimensions.device.cell.width*this._bufferService.cols,this.dimensions.device.canvas.height=this.dimensions.device.cell.height*this._bufferService.rows,this.dimensions.css.canvas.width=Math.round(this.dimensions.device.canvas.width/k),this.dimensions.css.canvas.height=Math.round(this.dimensions.device.canvas.height/k),this.dimensions.css.cell.width=this.dimensions.css.canvas.width/this._bufferService.cols,this.dimensions.css.cell.height=this.dimensions.css.canvas.height/this._bufferService.rows;for(const W of this._rowElements)W.style.width=`${this.dimensions.css.canvas.width}px`,W.style.height=`${this.dimensions.css.cell.height}px`,W.style.lineHeight=`${this.dimensions.css.cell.height}px`,W.style.overflow="hidden";this._dimensionsStyleElement||(this._dimensionsStyleElement=this._document.createElement("style"),this._screenElement.appendChild(this._dimensionsStyleElement));const I=`${this._terminalSelector} .${g} span { display: inline-block; height: 100%; vertical-align: top;}`;this._dimensionsStyleElement.textContent=I,this._selectionContainer.style.height=this._viewportElement.style.height,this._screenElement.style.width=`${this.dimensions.css.canvas.width}px`,this._screenElement.style.height=`${this.dimensions.css.canvas.height}px`}_injectCss(k){this._themeStyleElement||(this._themeStyleElement=this._document.createElement("style"),this._screenElement.appendChild(this._themeStyleElement));let I=`${this._terminalSelector} .${g} { color: ${k.foreground.css}; font-family: ${this._optionsService.rawOptions.fontFamily}; font-size: ${this._optionsService.rawOptions.fontSize}px; font-kerning: none; white-space: pre}`;I+=`${this._terminalSelector} .${g} .xterm-dim { color: ${i.color.multiplyOpacity(k.foreground,.5).css};}`,I+=`${this._terminalSelector} span:not(.xterm-bold) { font-weight: ${this._optionsService.rawOptions.fontWeight};}${this._terminalSelector} span.xterm-bold { font-weight: ${this._optionsService.rawOptions.fontWeightBold};}${this._terminalSelector} span.xterm-italic { font-style: italic;}`;const W=`blink_underline_${this._terminalClass}`,U=`blink_bar_${this._terminalClass}`,Y=`blink_block_${this._terminalClass}`;I+=`@keyframes ${W} { 50% {  border-bottom-style: hidden; }}`,I+=`@keyframes ${U} { 50% {  box-shadow: none; }}`,I+=`@keyframes ${Y} { 0% {  background-color: ${k.cursor.css};  color: ${k.cursorAccent.css}; } 50% {  background-color: inherit;  color: ${k.cursor.css}; }}`,I+=`${this._terminalSelector} .${g}.${w} .xterm-cursor.xterm-cursor-blink.xterm-cursor-underline { animation: ${W} 1s step-end infinite;}${this._terminalSelector} .${g}.${w} .xterm-cursor.xterm-cursor-blink.xterm-cursor-bar { animation: ${U} 1s step-end infinite;}${this._terminalSelector} .${g}.${w} .xterm-cursor.xterm-cursor-blink.xterm-cursor-block { animation: ${Y} 1s step-end infinite;}${this._terminalSelector} .${g} .xterm-cursor.xterm-cursor-block { background-color: ${k.cursor.css}; color: ${k.cursorAccent.css};}${this._terminalSelector} .${g} .xterm-cursor.xterm-cursor-block:not(.xterm-cursor-blink) { background-color: ${k.cursor.css} !important; color: ${k.cursorAccent.css} !important;}${this._terminalSelector} .${g} .xterm-cursor.xterm-cursor-outline { outline: 1px solid ${k.cursor.css}; outline-offset: -1px;}${this._terminalSelector} .${g} .xterm-cursor.xterm-cursor-bar { box-shadow: ${this._optionsService.rawOptions.cursorWidth}px 0 0 ${k.cursor.css} inset;}${this._terminalSelector} .${g} .xterm-cursor.xterm-cursor-underline { border-bottom: 1px ${k.cursor.css}; border-bottom-style: solid; height: calc(100% - 1px);}`,I+=`${this._terminalSelector} .${L} { position: absolute; top: 0; left: 0; z-index: 1; pointer-events: none;}${this._terminalSelector}.focus .${L} div { position: absolute; background-color: ${k.selectionBackgroundOpaque.css};}${this._terminalSelector} .${L} div { position: absolute; background-color: ${k.selectionInactiveBackgroundOpaque.css};}`;for(const[$,y]of k.ansi.entries())I+=`${this._terminalSelector} .${S}${$} { color: ${y.css}; }${this._terminalSelector} .${S}${$}.xterm-dim { color: ${i.color.multiplyOpacity(y,.5).css}; }${this._terminalSelector} .${d}${$} { background-color: ${y.css}; }`;I+=`${this._terminalSelector} .${S}${f.INVERTED_DEFAULT_COLOR} { color: ${i.color.opaque(k.background).css}; }${this._terminalSelector} .${S}${f.INVERTED_DEFAULT_COLOR}.xterm-dim { color: ${i.color.multiplyOpacity(i.color.opaque(k.background),.5).css}; }${this._terminalSelector} .${d}${f.INVERTED_DEFAULT_COLOR} { background-color: ${k.foreground.css}; }`,this._themeStyleElement.textContent=I}_setDefaultSpacing(){const k=this.dimensions.css.cell.width-this._widthCache.get("W",!1,!1);this._rowContainer.style.letterSpacing=`${k}px`,this._rowFactory.defaultSpacing=k}handleDevicePixelRatioChange(){this._updateDimensions(),this._widthCache.clear(),this._setDefaultSpacing()}_refreshRowElements(k,I){for(let W=this._rowElements.length;W<=I;W++){const U=this._document.createElement("div");this._rowContainer.appendChild(U),this._rowElements.push(U)}for(;this._rowElements.length>I;)this._rowContainer.removeChild(this._rowElements.pop())}handleResize(k,I){this._refreshRowElements(k,I),this._updateDimensions(),this.handleSelectionChanged(this._selectionRenderModel.selectionStart,this._selectionRenderModel.selectionEnd,this._selectionRenderModel.columnSelectMode)}handleCharSizeChanged(){this._updateDimensions(),this._widthCache.clear(),this._setDefaultSpacing()}handleBlur(){this._rowContainer.classList.remove(w),this.renderRows(0,this._bufferService.rows-1)}handleFocus(){this._rowContainer.classList.add(w),this.renderRows(this._bufferService.buffer.y,this._bufferService.buffer.y)}handleSelectionChanged(k,I,W){if(this._selectionContainer.replaceChildren(),this._rowFactory.handleSelectionChanged(k,I,W),this.renderRows(0,this._bufferService.rows-1),!k||!I)return;this._selectionRenderModel.update(this._terminal,k,I,W);const U=this._selectionRenderModel.viewportStartRow,Y=this._selectionRenderModel.viewportEndRow,$=this._selectionRenderModel.viewportCappedStartRow,y=this._selectionRenderModel.viewportCappedEndRow;if($>=this._bufferService.rows||y<0)return;const E=this._document.createDocumentFragment();if(W){const D=k[0]>I[0];E.appendChild(this._createSelectionElement($,D?I[0]:k[0],D?k[0]:I[0],y-$+1))}else{const D=U===$?k[0]:0,T=$===Y?I[0]:this._bufferService.cols;E.appendChild(this._createSelectionElement($,D,T));const F=y-$-1;if(E.appendChild(this._createSelectionElement($+1,0,this._bufferService.cols,F)),$!==y){const G=Y===y?I[0]:this._bufferService.cols;E.appendChild(this._createSelectionElement(y,0,G))}}this._selectionContainer.appendChild(E)}_createSelectionElement(k,I,W,U=1){const Y=this._document.createElement("div"),$=I*this.dimensions.css.cell.width;let y=this.dimensions.css.cell.width*(W-I);return $+y>this.dimensions.css.canvas.width&&(y=this.dimensions.css.canvas.width-$),Y.style.height=U*this.dimensions.css.cell.height+"px",Y.style.top=k*this.dimensions.css.cell.height+"px",Y.style.left=`${$}px`,Y.style.width=`${y}px`,Y}handleCursorMove(){}_handleOptionsChanged(){this._updateDimensions(),this._injectCss(this._themeService.colors),this._widthCache.setFont(this._optionsService.rawOptions.fontFamily,this._optionsService.rawOptions.fontSize,this._optionsService.rawOptions.fontWeight,this._optionsService.rawOptions.fontWeightBold),this._setDefaultSpacing()}clear(){for(const k of this._rowElements)k.replaceChildren()}renderRows(k,I){const W=this._bufferService.buffer,U=W.ybase+W.y,Y=Math.min(W.x,this._bufferService.cols-1),$=this._optionsService.rawOptions.cursorBlink,y=this._optionsService.rawOptions.cursorStyle,E=this._optionsService.rawOptions.cursorInactiveStyle;for(let D=k;D<=I;D++){const T=D+W.ydisp,F=this._rowElements[D],G=W.lines.get(T);if(!F||!G)break;F.replaceChildren(...this._rowFactory.createRow(G,T,T===U,y,E,Y,$,this.dimensions.css.cell.width,this._widthCache,-1,-1))}}get _terminalSelector(){return`.${p}${this._terminalClass}`}_handleLinkHover(k){this._setCellUnderline(k.x1,k.x2,k.y1,k.y2,k.cols,!0)}_handleLinkLeave(k){this._setCellUnderline(k.x1,k.x2,k.y1,k.y2,k.cols,!1)}_setCellUnderline(k,I,W,U,Y,$){W<0&&(k=0),U<0&&(I=0);const y=this._bufferService.rows-1;W=Math.max(Math.min(W,y),0),U=Math.max(Math.min(U,y),0),Y=Math.min(Y,this._bufferService.cols);const E=this._bufferService.buffer,D=E.ybase+E.y,T=Math.min(E.x,Y-1),F=this._optionsService.rawOptions.cursorBlink,G=this._optionsService.rawOptions.cursorStyle,K=this._optionsService.rawOptions.cursorInactiveStyle;for(let q=W;q<=U;++q){const P=q+E.ydisp,C=this._rowElements[q],H=E.lines.get(P);if(!C||!H)break;C.replaceChildren(...this._rowFactory.createRow(H,P,P===D,G,K,T,F,this.dimensions.css.cell.width,this._widthCache,$?q===W?k:0:-1,$?(q===U?I:Y)-1:-1))}}};s.DomRenderer=A=l([u(7,c.IInstantiationService),u(8,t.ICharSizeService),u(9,c.IOptionsService),u(10,c.IBufferService),u(11,t.ICoreBrowserService),u(12,t.IThemeService)],A)},3787:function(R,s,n){var l=this&&this.__decorate||function(g,S,d,w){var L,B=arguments.length,A=B<3?S:w===null?w=Object.getOwnPropertyDescriptor(S,d):w;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")A=Reflect.decorate(g,S,d,w);else for(var k=g.length-1;k>=0;k--)(L=g[k])&&(A=(B<3?L(A):B>3?L(S,d,A):L(S,d))||A);return B>3&&A&&Object.defineProperty(S,d,A),A},u=this&&this.__param||function(g,S){return function(d,w){S(d,w,g)}};Object.defineProperty(s,"__esModule",{value:!0}),s.DomRendererRowFactory=void 0;const o=n(2223),a=n(643),f=n(511),v=n(2585),h=n(8055),t=n(4725),i=n(4269),e=n(6171),r=n(3734);let c=s.DomRendererRowFactory=class{constructor(g,S,d,w,L,B,A){this._document=g,this._characterJoinerService=S,this._optionsService=d,this._coreBrowserService=w,this._coreService=L,this._decorationService=B,this._themeService=A,this._workCell=new f.CellData,this._columnSelectMode=!1,this.defaultSpacing=0}handleSelectionChanged(g,S,d){this._selectionStart=g,this._selectionEnd=S,this._columnSelectMode=d}createRow(g,S,d,w,L,B,A,k,I,W,U){const Y=[],$=this._characterJoinerService.getJoinedCharacters(S),y=this._themeService.colors;let E,D=g.getNoBgTrimmedLength();d&&D<B+1&&(D=B+1);let T=0,F="",G=0,K=0,q=0,P=!1,C=0,H=!1,N=0;const z=[],j=W!==-1&&U!==-1;for(let X=0;X<D;X++){g.loadCell(X,this._workCell);let Z=this._workCell.getWidth();if(Z===0)continue;let Q=!1,ie=X,V=this._workCell;if($.length>0&&X===$[0][0]){Q=!0;const J=$.shift();V=new i.JoinedCellData(this._workCell,g.translateToString(!0,J[0],J[1]),J[1]-J[0]),ie=J[1]-1,Z=V.getWidth()}const ue=this._isCellInSelection(X,S),Se=d&&X===B,we=j&&X>=W&&X<=U;let ye=!1;this._decorationService.forEachDecorationAtCell(X,S,void 0,J=>{ye=!0});let ve=V.getChars()||a.WHITESPACE_CELL_CHAR;if(ve===" "&&(V.isUnderline()||V.isOverline())&&(ve=" "),N=Z*k-I.get(ve,V.isBold(),V.isItalic()),E){if(T&&(ue&&H||!ue&&!H&&V.bg===G)&&(ue&&H&&y.selectionForeground||V.fg===K)&&V.extended.ext===q&&we===P&&N===C&&!Se&&!Q&&!ye){V.isInvisible()?F+=a.WHITESPACE_CELL_CHAR:F+=ve,T++;continue}T&&(E.textContent=F),E=this._document.createElement("span"),T=0,F=""}else E=this._document.createElement("span");if(G=V.bg,K=V.fg,q=V.extended.ext,P=we,C=N,H=ue,Q&&B>=X&&B<=ie&&(B=X),!this._coreService.isCursorHidden&&Se&&this._coreService.isCursorInitialized){if(z.push("xterm-cursor"),this._coreBrowserService.isFocused)A&&z.push("xterm-cursor-blink"),z.push(w==="bar"?"xterm-cursor-bar":w==="underline"?"xterm-cursor-underline":"xterm-cursor-block");else if(L)switch(L){case"outline":z.push("xterm-cursor-outline");break;case"block":z.push("xterm-cursor-block");break;case"bar":z.push("xterm-cursor-bar");break;case"underline":z.push("xterm-cursor-underline")}}if(V.isBold()&&z.push("xterm-bold"),V.isItalic()&&z.push("xterm-italic"),V.isDim()&&z.push("xterm-dim"),F=V.isInvisible()?a.WHITESPACE_CELL_CHAR:V.getChars()||a.WHITESPACE_CELL_CHAR,V.isUnderline()&&(z.push(`xterm-underline-${V.extended.underlineStyle}`),F===" "&&(F=" "),!V.isUnderlineColorDefault()))if(V.isUnderlineColorRGB())E.style.textDecorationColor=`rgb(${r.AttributeData.toColorRGB(V.getUnderlineColor()).join(",")})`;else{let J=V.getUnderlineColor();this._optionsService.rawOptions.drawBoldTextInBrightColors&&V.isBold()&&J<8&&(J+=8),E.style.textDecorationColor=y.ansi[J].css}V.isOverline()&&(z.push("xterm-overline"),F===" "&&(F=" ")),V.isStrikethrough()&&z.push("xterm-strikethrough"),we&&(E.style.textDecoration="underline");let se=V.getFgColor(),_e=V.getFgColorMode(),ne=V.getBgColor(),ge=V.getBgColorMode();const Ce=!!V.isInverse();if(Ce){const J=se;se=ne,ne=J;const He=_e;_e=ge,ge=He}let oe,pe,ae,be=!1;switch(this._decorationService.forEachDecorationAtCell(X,S,void 0,J=>{J.options.layer!=="top"&&be||(J.backgroundColorRGB&&(ge=50331648,ne=J.backgroundColorRGB.rgba>>8&16777215,oe=J.backgroundColorRGB),J.foregroundColorRGB&&(_e=50331648,se=J.foregroundColorRGB.rgba>>8&16777215,pe=J.foregroundColorRGB),be=J.options.layer==="top")}),!be&&ue&&(oe=this._coreBrowserService.isFocused?y.selectionBackgroundOpaque:y.selectionInactiveBackgroundOpaque,ne=oe.rgba>>8&16777215,ge=50331648,be=!0,y.selectionForeground&&(_e=50331648,se=y.selectionForeground.rgba>>8&16777215,pe=y.selectionForeground)),be&&z.push("xterm-decoration-top"),ge){case 16777216:case 33554432:ae=y.ansi[ne],z.push(`xterm-bg-${ne}`);break;case 50331648:ae=h.channels.toColor(ne>>16,ne>>8&255,255&ne),this._addStyle(E,`background-color:#${p((ne>>>0).toString(16),"0",6)}`);break;default:Ce?(ae=y.foreground,z.push(`xterm-bg-${o.INVERTED_DEFAULT_COLOR}`)):ae=y.background}switch(oe||V.isDim()&&(oe=h.color.multiplyOpacity(ae,.5)),_e){case 16777216:case 33554432:V.isBold()&&se<8&&this._optionsService.rawOptions.drawBoldTextInBrightColors&&(se+=8),this._applyMinimumContrast(E,ae,y.ansi[se],V,oe,void 0)||z.push(`xterm-fg-${se}`);break;case 50331648:const J=h.channels.toColor(se>>16&255,se>>8&255,255&se);this._applyMinimumContrast(E,ae,J,V,oe,pe)||this._addStyle(E,`color:#${p(se.toString(16),"0",6)}`);break;default:this._applyMinimumContrast(E,ae,y.foreground,V,oe,pe)||Ce&&z.push(`xterm-fg-${o.INVERTED_DEFAULT_COLOR}`)}z.length&&(E.className=z.join(" "),z.length=0),Se||Q||ye?E.textContent=F:T++,N!==this.defaultSpacing&&(E.style.letterSpacing=`${N}px`),Y.push(E),X=ie}return E&&T&&(E.textContent=F),Y}_applyMinimumContrast(g,S,d,w,L,B){if(this._optionsService.rawOptions.minimumContrastRatio===1||(0,e.treatGlyphAsBackgroundColor)(w.getCode()))return!1;const A=this._getContrastCache(w);let k;if(L||B||(k=A.getColor(S.rgba,d.rgba)),k===void 0){const I=this._optionsService.rawOptions.minimumContrastRatio/(w.isDim()?2:1);k=h.color.ensureContrastRatio(L||S,B||d,I),A.setColor((L||S).rgba,(B||d).rgba,k??null)}return!!k&&(this._addStyle(g,`color:${k.css}`),!0)}_getContrastCache(g){return g.isDim()?this._themeService.colors.halfContrastCache:this._themeService.colors.contrastCache}_addStyle(g,S){g.setAttribute("style",`${g.getAttribute("style")||""}${S};`)}_isCellInSelection(g,S){const d=this._selectionStart,w=this._selectionEnd;return!(!d||!w)&&(this._columnSelectMode?d[0]<=w[0]?g>=d[0]&&S>=d[1]&&g<w[0]&&S<=w[1]:g<d[0]&&S>=d[1]&&g>=w[0]&&S<=w[1]:S>d[1]&&S<w[1]||d[1]===w[1]&&S===d[1]&&g>=d[0]&&g<w[0]||d[1]<w[1]&&S===w[1]&&g<w[0]||d[1]<w[1]&&S===d[1]&&g>=d[0])}};function p(g,S,d){for(;g.length<d;)g=S+g;return g}s.DomRendererRowFactory=c=l([u(1,t.ICharacterJoinerService),u(2,v.IOptionsService),u(3,t.ICoreBrowserService),u(4,v.ICoreService),u(5,v.IDecorationService),u(6,t.IThemeService)],c)},2550:(R,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.WidthCache=void 0,s.WidthCache=class{constructor(n,l){this._flat=new Float32Array(256),this._font="",this._fontSize=0,this._weight="normal",this._weightBold="bold",this._measureElements=[],this._container=n.createElement("div"),this._container.classList.add("xterm-width-cache-measure-container"),this._container.setAttribute("aria-hidden","true"),this._container.style.whiteSpace="pre",this._container.style.fontKerning="none";const u=n.createElement("span");u.classList.add("xterm-char-measure-element");const o=n.createElement("span");o.classList.add("xterm-char-measure-element"),o.style.fontWeight="bold";const a=n.createElement("span");a.classList.add("xterm-char-measure-element"),a.style.fontStyle="italic";const f=n.createElement("span");f.classList.add("xterm-char-measure-element"),f.style.fontWeight="bold",f.style.fontStyle="italic",this._measureElements=[u,o,a,f],this._container.appendChild(u),this._container.appendChild(o),this._container.appendChild(a),this._container.appendChild(f),l.appendChild(this._container),this.clear()}dispose(){this._container.remove(),this._measureElements.length=0,this._holey=void 0}clear(){this._flat.fill(-9999),this._holey=new Map}setFont(n,l,u,o){n===this._font&&l===this._fontSize&&u===this._weight&&o===this._weightBold||(this._font=n,this._fontSize=l,this._weight=u,this._weightBold=o,this._container.style.fontFamily=this._font,this._container.style.fontSize=`${this._fontSize}px`,this._measureElements[0].style.fontWeight=`${u}`,this._measureElements[1].style.fontWeight=`${o}`,this._measureElements[2].style.fontWeight=`${u}`,this._measureElements[3].style.fontWeight=`${o}`,this.clear())}get(n,l,u){let o=0;if(!l&&!u&&n.length===1&&(o=n.charCodeAt(0))<256){if(this._flat[o]!==-9999)return this._flat[o];const v=this._measure(n,0);return v>0&&(this._flat[o]=v),v}let a=n;l&&(a+="B"),u&&(a+="I");let f=this._holey.get(a);if(f===void 0){let v=0;l&&(v|=1),u&&(v|=2),f=this._measure(n,v),f>0&&this._holey.set(a,f)}return f}_measure(n,l){const u=this._measureElements[l];return u.textContent=n.repeat(32),u.offsetWidth/32}}},2223:(R,s,n)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.TEXT_BASELINE=s.DIM_OPACITY=s.INVERTED_DEFAULT_COLOR=void 0;const l=n(6114);s.INVERTED_DEFAULT_COLOR=257,s.DIM_OPACITY=.5,s.TEXT_BASELINE=l.isFirefox||l.isLegacyEdge?"bottom":"ideographic"},6171:(R,s)=>{function n(u){return 57508<=u&&u<=57558}function l(u){return u>=128512&&u<=128591||u>=127744&&u<=128511||u>=128640&&u<=128767||u>=9728&&u<=9983||u>=9984&&u<=10175||u>=65024&&u<=65039||u>=129280&&u<=129535||u>=127462&&u<=127487}Object.defineProperty(s,"__esModule",{value:!0}),s.computeNextVariantOffset=s.createRenderDimensions=s.treatGlyphAsBackgroundColor=s.allowRescaling=s.isEmoji=s.isRestrictedPowerlineGlyph=s.isPowerlineGlyph=s.throwIfFalsy=void 0,s.throwIfFalsy=function(u){if(!u)throw new Error("value must not be falsy");return u},s.isPowerlineGlyph=n,s.isRestrictedPowerlineGlyph=function(u){return 57520<=u&&u<=57527},s.isEmoji=l,s.allowRescaling=function(u,o,a,f){return o===1&&a>Math.ceil(1.5*f)&&u!==void 0&&u>255&&!l(u)&&!n(u)&&!function(v){return 57344<=v&&v<=63743}(u)},s.treatGlyphAsBackgroundColor=function(u){return n(u)||function(o){return 9472<=o&&o<=9631}(u)},s.createRenderDimensions=function(){return{css:{canvas:{width:0,height:0},cell:{width:0,height:0}},device:{canvas:{width:0,height:0},cell:{width:0,height:0},char:{width:0,height:0,left:0,top:0}}}},s.computeNextVariantOffset=function(u,o,a=0){return(u-(2*Math.round(o)-a))%(2*Math.round(o))}},6052:(R,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.createSelectionRenderModel=void 0;class n{constructor(){this.clear()}clear(){this.hasSelection=!1,this.columnSelectMode=!1,this.viewportStartRow=0,this.viewportEndRow=0,this.viewportCappedStartRow=0,this.viewportCappedEndRow=0,this.startCol=0,this.endCol=0,this.selectionStart=void 0,this.selectionEnd=void 0}update(u,o,a,f=!1){if(this.selectionStart=o,this.selectionEnd=a,!o||!a||o[0]===a[0]&&o[1]===a[1])return void this.clear();const v=u.buffers.active.ydisp,h=o[1]-v,t=a[1]-v,i=Math.max(h,0),e=Math.min(t,u.rows-1);i>=u.rows||e<0?this.clear():(this.hasSelection=!0,this.columnSelectMode=f,this.viewportStartRow=h,this.viewportEndRow=t,this.viewportCappedStartRow=i,this.viewportCappedEndRow=e,this.startCol=o[0],this.endCol=a[0])}isCellSelected(u,o,a){return!!this.hasSelection&&(a-=u.buffer.active.viewportY,this.columnSelectMode?this.startCol<=this.endCol?o>=this.startCol&&a>=this.viewportCappedStartRow&&o<this.endCol&&a<=this.viewportCappedEndRow:o<this.startCol&&a>=this.viewportCappedStartRow&&o>=this.endCol&&a<=this.viewportCappedEndRow:a>this.viewportStartRow&&a<this.viewportEndRow||this.viewportStartRow===this.viewportEndRow&&a===this.viewportStartRow&&o>=this.startCol&&o<this.endCol||this.viewportStartRow<this.viewportEndRow&&a===this.viewportEndRow&&o<this.endCol||this.viewportStartRow<this.viewportEndRow&&a===this.viewportStartRow&&o>=this.startCol)}}s.createSelectionRenderModel=function(){return new n}},456:(R,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.SelectionModel=void 0,s.SelectionModel=class{constructor(n){this._bufferService=n,this.isSelectAllActive=!1,this.selectionStartLength=0}clearSelection(){this.selectionStart=void 0,this.selectionEnd=void 0,this.isSelectAllActive=!1,this.selectionStartLength=0}get finalSelectionStart(){return this.isSelectAllActive?[0,0]:this.selectionEnd&&this.selectionStart&&this.areSelectionValuesReversed()?this.selectionEnd:this.selectionStart}get finalSelectionEnd(){if(this.isSelectAllActive)return[this._bufferService.cols,this._bufferService.buffer.ybase+this._bufferService.rows-1];if(this.selectionStart){if(!this.selectionEnd||this.areSelectionValuesReversed()){const n=this.selectionStart[0]+this.selectionStartLength;return n>this._bufferService.cols?n%this._bufferService.cols==0?[this._bufferService.cols,this.selectionStart[1]+Math.floor(n/this._bufferService.cols)-1]:[n%this._bufferService.cols,this.selectionStart[1]+Math.floor(n/this._bufferService.cols)]:[n,this.selectionStart[1]]}if(this.selectionStartLength&&this.selectionEnd[1]===this.selectionStart[1]){const n=this.selectionStart[0]+this.selectionStartLength;return n>this._bufferService.cols?[n%this._bufferService.cols,this.selectionStart[1]+Math.floor(n/this._bufferService.cols)]:[Math.max(n,this.selectionEnd[0]),this.selectionEnd[1]]}return this.selectionEnd}}areSelectionValuesReversed(){const n=this.selectionStart,l=this.selectionEnd;return!(!n||!l)&&(n[1]>l[1]||n[1]===l[1]&&n[0]>l[0])}handleTrim(n){return this.selectionStart&&(this.selectionStart[1]-=n),this.selectionEnd&&(this.selectionEnd[1]-=n),this.selectionEnd&&this.selectionEnd[1]<0?(this.clearSelection(),!0):(this.selectionStart&&this.selectionStart[1]<0&&(this.selectionStart[1]=0),!1)}}},428:function(R,s,n){var l=this&&this.__decorate||function(e,r,c,p){var g,S=arguments.length,d=S<3?r:p===null?p=Object.getOwnPropertyDescriptor(r,c):p;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")d=Reflect.decorate(e,r,c,p);else for(var w=e.length-1;w>=0;w--)(g=e[w])&&(d=(S<3?g(d):S>3?g(r,c,d):g(r,c))||d);return S>3&&d&&Object.defineProperty(r,c,d),d},u=this&&this.__param||function(e,r){return function(c,p){r(c,p,e)}};Object.defineProperty(s,"__esModule",{value:!0}),s.CharSizeService=void 0;const o=n(2585),a=n(8460),f=n(844);let v=s.CharSizeService=class extends f.Disposable{get hasValidSize(){return this.width>0&&this.height>0}constructor(e,r,c){super(),this._optionsService=c,this.width=0,this.height=0,this._onCharSizeChange=this.register(new a.EventEmitter),this.onCharSizeChange=this._onCharSizeChange.event;try{this._measureStrategy=this.register(new i(this._optionsService))}catch{this._measureStrategy=this.register(new t(e,r,this._optionsService))}this.register(this._optionsService.onMultipleOptionChange(["fontFamily","fontSize"],()=>this.measure()))}measure(){const e=this._measureStrategy.measure();e.width===this.width&&e.height===this.height||(this.width=e.width,this.height=e.height,this._onCharSizeChange.fire())}};s.CharSizeService=v=l([u(2,o.IOptionsService)],v);class h extends f.Disposable{constructor(){super(...arguments),this._result={width:0,height:0}}_validateAndSet(r,c){r!==void 0&&r>0&&c!==void 0&&c>0&&(this._result.width=r,this._result.height=c)}}class t extends h{constructor(r,c,p){super(),this._document=r,this._parentElement=c,this._optionsService=p,this._measureElement=this._document.createElement("span"),this._measureElement.classList.add("xterm-char-measure-element"),this._measureElement.textContent="W".repeat(32),this._measureElement.setAttribute("aria-hidden","true"),this._measureElement.style.whiteSpace="pre",this._measureElement.style.fontKerning="none",this._parentElement.appendChild(this._measureElement)}measure(){return this._measureElement.style.fontFamily=this._optionsService.rawOptions.fontFamily,this._measureElement.style.fontSize=`${this._optionsService.rawOptions.fontSize}px`,this._validateAndSet(Number(this._measureElement.offsetWidth)/32,Number(this._measureElement.offsetHeight)),this._result}}class i extends h{constructor(r){super(),this._optionsService=r,this._canvas=new OffscreenCanvas(100,100),this._ctx=this._canvas.getContext("2d");const c=this._ctx.measureText("W");if(!("width"in c&&"fontBoundingBoxAscent"in c&&"fontBoundingBoxDescent"in c))throw new Error("Required font metrics not supported")}measure(){this._ctx.font=`${this._optionsService.rawOptions.fontSize}px ${this._optionsService.rawOptions.fontFamily}`;const r=this._ctx.measureText("W");return this._validateAndSet(r.width,r.fontBoundingBoxAscent+r.fontBoundingBoxDescent),this._result}}},4269:function(R,s,n){var l=this&&this.__decorate||function(i,e,r,c){var p,g=arguments.length,S=g<3?e:c===null?c=Object.getOwnPropertyDescriptor(e,r):c;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")S=Reflect.decorate(i,e,r,c);else for(var d=i.length-1;d>=0;d--)(p=i[d])&&(S=(g<3?p(S):g>3?p(e,r,S):p(e,r))||S);return g>3&&S&&Object.defineProperty(e,r,S),S},u=this&&this.__param||function(i,e){return function(r,c){e(r,c,i)}};Object.defineProperty(s,"__esModule",{value:!0}),s.CharacterJoinerService=s.JoinedCellData=void 0;const o=n(3734),a=n(643),f=n(511),v=n(2585);class h extends o.AttributeData{constructor(e,r,c){super(),this.content=0,this.combinedData="",this.fg=e.fg,this.bg=e.bg,this.combinedData=r,this._width=c}isCombined(){return 2097152}getWidth(){return this._width}getChars(){return this.combinedData}getCode(){return 2097151}setFromCharData(e){throw new Error("not implemented")}getAsCharData(){return[this.fg,this.getChars(),this.getWidth(),this.getCode()]}}s.JoinedCellData=h;let t=s.CharacterJoinerService=class ur{constructor(e){this._bufferService=e,this._characterJoiners=[],this._nextCharacterJoinerId=0,this._workCell=new f.CellData}register(e){const r={id:this._nextCharacterJoinerId++,handler:e};return this._characterJoiners.push(r),r.id}deregister(e){for(let r=0;r<this._characterJoiners.length;r++)if(this._characterJoiners[r].id===e)return this._characterJoiners.splice(r,1),!0;return!1}getJoinedCharacters(e){if(this._characterJoiners.length===0)return[];const r=this._bufferService.buffer.lines.get(e);if(!r||r.length===0)return[];const c=[],p=r.translateToString(!0);let g=0,S=0,d=0,w=r.getFg(0),L=r.getBg(0);for(let B=0;B<r.getTrimmedLength();B++)if(r.loadCell(B,this._workCell),this._workCell.getWidth()!==0){if(this._workCell.fg!==w||this._workCell.bg!==L){if(B-g>1){const A=this._getJoinedRanges(p,d,S,r,g);for(let k=0;k<A.length;k++)c.push(A[k])}g=B,d=S,w=this._workCell.fg,L=this._workCell.bg}S+=this._workCell.getChars().length||a.WHITESPACE_CELL_CHAR.length}if(this._bufferService.cols-g>1){const B=this._getJoinedRanges(p,d,S,r,g);for(let A=0;A<B.length;A++)c.push(B[A])}return c}_getJoinedRanges(e,r,c,p,g){const S=e.substring(r,c);let d=[];try{d=this._characterJoiners[0].handler(S)}catch(w){console.error(w)}for(let w=1;w<this._characterJoiners.length;w++)try{const L=this._characterJoiners[w].handler(S);for(let B=0;B<L.length;B++)ur._mergeRanges(d,L[B])}catch(L){console.error(L)}return this._stringRangesToCellRanges(d,p,g),d}_stringRangesToCellRanges(e,r,c){let p=0,g=!1,S=0,d=e[p];if(d){for(let w=c;w<this._bufferService.cols;w++){const L=r.getWidth(w),B=r.getString(w).length||a.WHITESPACE_CELL_CHAR.length;if(L!==0){if(!g&&d[0]<=S&&(d[0]=w,g=!0),d[1]<=S){if(d[1]=w,d=e[++p],!d)break;d[0]<=S?(d[0]=w,g=!0):g=!1}S+=B}}d&&(d[1]=this._bufferService.cols)}}static _mergeRanges(e,r){let c=!1;for(let p=0;p<e.length;p++){const g=e[p];if(c){if(r[1]<=g[0])return e[p-1][1]=r[1],e;if(r[1]<=g[1])return e[p-1][1]=Math.max(r[1],g[1]),e.splice(p,1),e;e.splice(p,1),p--}else{if(r[1]<=g[0])return e.splice(p,0,r),e;if(r[1]<=g[1])return g[0]=Math.min(r[0],g[0]),e;r[0]<g[1]&&(g[0]=Math.min(r[0],g[0]),c=!0)}}return c?e[e.length-1][1]=r[1]:e.push(r),e}};s.CharacterJoinerService=t=l([u(0,v.IBufferService)],t)},5114:(R,s,n)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.CoreBrowserService=void 0;const l=n(844),u=n(8460),o=n(3656);class a extends l.Disposable{constructor(h,t,i){super(),this._textarea=h,this._window=t,this.mainDocument=i,this._isFocused=!1,this._cachedIsFocused=void 0,this._screenDprMonitor=new f(this._window),this._onDprChange=this.register(new u.EventEmitter),this.onDprChange=this._onDprChange.event,this._onWindowChange=this.register(new u.EventEmitter),this.onWindowChange=this._onWindowChange.event,this.register(this.onWindowChange(e=>this._screenDprMonitor.setWindow(e))),this.register((0,u.forwardEvent)(this._screenDprMonitor.onDprChange,this._onDprChange)),this._textarea.addEventListener("focus",()=>this._isFocused=!0),this._textarea.addEventListener("blur",()=>this._isFocused=!1)}get window(){return this._window}set window(h){this._window!==h&&(this._window=h,this._onWindowChange.fire(this._window))}get dpr(){return this.window.devicePixelRatio}get isFocused(){return this._cachedIsFocused===void 0&&(this._cachedIsFocused=this._isFocused&&this._textarea.ownerDocument.hasFocus(),queueMicrotask(()=>this._cachedIsFocused=void 0)),this._cachedIsFocused}}s.CoreBrowserService=a;class f extends l.Disposable{constructor(h){super(),this._parentWindow=h,this._windowResizeListener=this.register(new l.MutableDisposable),this._onDprChange=this.register(new u.EventEmitter),this.onDprChange=this._onDprChange.event,this._outerListener=()=>this._setDprAndFireIfDiffers(),this._currentDevicePixelRatio=this._parentWindow.devicePixelRatio,this._updateDpr(),this._setWindowResizeListener(),this.register((0,l.toDisposable)(()=>this.clearListener()))}setWindow(h){this._parentWindow=h,this._setWindowResizeListener(),this._setDprAndFireIfDiffers()}_setWindowResizeListener(){this._windowResizeListener.value=(0,o.addDisposableDomListener)(this._parentWindow,"resize",()=>this._setDprAndFireIfDiffers())}_setDprAndFireIfDiffers(){this._parentWindow.devicePixelRatio!==this._currentDevicePixelRatio&&this._onDprChange.fire(this._parentWindow.devicePixelRatio),this._updateDpr()}_updateDpr(){this._outerListener&&(this._resolutionMediaMatchList?.removeListener(this._outerListener),this._currentDevicePixelRatio=this._parentWindow.devicePixelRatio,this._resolutionMediaMatchList=this._parentWindow.matchMedia(`screen and (resolution: ${this._parentWindow.devicePixelRatio}dppx)`),this._resolutionMediaMatchList.addListener(this._outerListener))}clearListener(){this._resolutionMediaMatchList&&this._outerListener&&(this._resolutionMediaMatchList.removeListener(this._outerListener),this._resolutionMediaMatchList=void 0,this._outerListener=void 0)}}},779:(R,s,n)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.LinkProviderService=void 0;const l=n(844);class u extends l.Disposable{constructor(){super(),this.linkProviders=[],this.register((0,l.toDisposable)(()=>this.linkProviders.length=0))}registerLinkProvider(a){return this.linkProviders.push(a),{dispose:()=>{const f=this.linkProviders.indexOf(a);f!==-1&&this.linkProviders.splice(f,1)}}}}s.LinkProviderService=u},8934:function(R,s,n){var l=this&&this.__decorate||function(v,h,t,i){var e,r=arguments.length,c=r<3?h:i===null?i=Object.getOwnPropertyDescriptor(h,t):i;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")c=Reflect.decorate(v,h,t,i);else for(var p=v.length-1;p>=0;p--)(e=v[p])&&(c=(r<3?e(c):r>3?e(h,t,c):e(h,t))||c);return r>3&&c&&Object.defineProperty(h,t,c),c},u=this&&this.__param||function(v,h){return function(t,i){h(t,i,v)}};Object.defineProperty(s,"__esModule",{value:!0}),s.MouseService=void 0;const o=n(4725),a=n(9806);let f=s.MouseService=class{constructor(v,h){this._renderService=v,this._charSizeService=h}getCoords(v,h,t,i,e){return(0,a.getCoords)(window,v,h,t,i,this._charSizeService.hasValidSize,this._renderService.dimensions.css.cell.width,this._renderService.dimensions.css.cell.height,e)}getMouseReportCoords(v,h){const t=(0,a.getCoordsRelativeToElement)(window,v,h);if(this._charSizeService.hasValidSize)return t[0]=Math.min(Math.max(t[0],0),this._renderService.dimensions.css.canvas.width-1),t[1]=Math.min(Math.max(t[1],0),this._renderService.dimensions.css.canvas.height-1),{col:Math.floor(t[0]/this._renderService.dimensions.css.cell.width),row:Math.floor(t[1]/this._renderService.dimensions.css.cell.height),x:Math.floor(t[0]),y:Math.floor(t[1])}}};s.MouseService=f=l([u(0,o.IRenderService),u(1,o.ICharSizeService)],f)},3230:function(R,s,n){var l=this&&this.__decorate||function(e,r,c,p){var g,S=arguments.length,d=S<3?r:p===null?p=Object.getOwnPropertyDescriptor(r,c):p;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")d=Reflect.decorate(e,r,c,p);else for(var w=e.length-1;w>=0;w--)(g=e[w])&&(d=(S<3?g(d):S>3?g(r,c,d):g(r,c))||d);return S>3&&d&&Object.defineProperty(r,c,d),d},u=this&&this.__param||function(e,r){return function(c,p){r(c,p,e)}};Object.defineProperty(s,"__esModule",{value:!0}),s.RenderService=void 0;const o=n(6193),a=n(4725),f=n(8460),v=n(844),h=n(7226),t=n(2585);let i=s.RenderService=class extends v.Disposable{get dimensions(){return this._renderer.value.dimensions}constructor(e,r,c,p,g,S,d,w){super(),this._rowCount=e,this._charSizeService=p,this._renderer=this.register(new v.MutableDisposable),this._pausedResizeTask=new h.DebouncedIdleTask,this._observerDisposable=this.register(new v.MutableDisposable),this._isPaused=!1,this._needsFullRefresh=!1,this._isNextRenderRedrawOnly=!0,this._needsSelectionRefresh=!1,this._canvasWidth=0,this._canvasHeight=0,this._selectionState={start:void 0,end:void 0,columnSelectMode:!1},this._onDimensionsChange=this.register(new f.EventEmitter),this.onDimensionsChange=this._onDimensionsChange.event,this._onRenderedViewportChange=this.register(new f.EventEmitter),this.onRenderedViewportChange=this._onRenderedViewportChange.event,this._onRender=this.register(new f.EventEmitter),this.onRender=this._onRender.event,this._onRefreshRequest=this.register(new f.EventEmitter),this.onRefreshRequest=this._onRefreshRequest.event,this._renderDebouncer=new o.RenderDebouncer((L,B)=>this._renderRows(L,B),d),this.register(this._renderDebouncer),this.register(d.onDprChange(()=>this.handleDevicePixelRatioChange())),this.register(S.onResize(()=>this._fullRefresh())),this.register(S.buffers.onBufferActivate(()=>this._renderer.value?.clear())),this.register(c.onOptionChange(()=>this._handleOptionsChanged())),this.register(this._charSizeService.onCharSizeChange(()=>this.handleCharSizeChanged())),this.register(g.onDecorationRegistered(()=>this._fullRefresh())),this.register(g.onDecorationRemoved(()=>this._fullRefresh())),this.register(c.onMultipleOptionChange(["customGlyphs","drawBoldTextInBrightColors","letterSpacing","lineHeight","fontFamily","fontSize","fontWeight","fontWeightBold","minimumContrastRatio","rescaleOverlappingGlyphs"],()=>{this.clear(),this.handleResize(S.cols,S.rows),this._fullRefresh()})),this.register(c.onMultipleOptionChange(["cursorBlink","cursorStyle"],()=>this.refreshRows(S.buffer.y,S.buffer.y,!0))),this.register(w.onChangeColors(()=>this._fullRefresh())),this._registerIntersectionObserver(d.window,r),this.register(d.onWindowChange(L=>this._registerIntersectionObserver(L,r)))}_registerIntersectionObserver(e,r){if("IntersectionObserver"in e){const c=new e.IntersectionObserver(p=>this._handleIntersectionChange(p[p.length-1]),{threshold:0});c.observe(r),this._observerDisposable.value=(0,v.toDisposable)(()=>c.disconnect())}}_handleIntersectionChange(e){this._isPaused=e.isIntersecting===void 0?e.intersectionRatio===0:!e.isIntersecting,this._isPaused||this._charSizeService.hasValidSize||this._charSizeService.measure(),!this._isPaused&&this._needsFullRefresh&&(this._pausedResizeTask.flush(),this.refreshRows(0,this._rowCount-1),this._needsFullRefresh=!1)}refreshRows(e,r,c=!1){this._isPaused?this._needsFullRefresh=!0:(c||(this._isNextRenderRedrawOnly=!1),this._renderDebouncer.refresh(e,r,this._rowCount))}_renderRows(e,r){this._renderer.value&&(e=Math.min(e,this._rowCount-1),r=Math.min(r,this._rowCount-1),this._renderer.value.renderRows(e,r),this._needsSelectionRefresh&&(this._renderer.value.handleSelectionChanged(this._selectionState.start,this._selectionState.end,this._selectionState.columnSelectMode),this._needsSelectionRefresh=!1),this._isNextRenderRedrawOnly||this._onRenderedViewportChange.fire({start:e,end:r}),this._onRender.fire({start:e,end:r}),this._isNextRenderRedrawOnly=!0)}resize(e,r){this._rowCount=r,this._fireOnCanvasResize()}_handleOptionsChanged(){this._renderer.value&&(this.refreshRows(0,this._rowCount-1),this._fireOnCanvasResize())}_fireOnCanvasResize(){this._renderer.value&&(this._renderer.value.dimensions.css.canvas.width===this._canvasWidth&&this._renderer.value.dimensions.css.canvas.height===this._canvasHeight||this._onDimensionsChange.fire(this._renderer.value.dimensions))}hasRenderer(){return!!this._renderer.value}setRenderer(e){this._renderer.value=e,this._renderer.value&&(this._renderer.value.onRequestRedraw(r=>this.refreshRows(r.start,r.end,!0)),this._needsSelectionRefresh=!0,this._fullRefresh())}addRefreshCallback(e){return this._renderDebouncer.addRefreshCallback(e)}_fullRefresh(){this._isPaused?this._needsFullRefresh=!0:this.refreshRows(0,this._rowCount-1)}clearTextureAtlas(){this._renderer.value&&(this._renderer.value.clearTextureAtlas?.(),this._fullRefresh())}handleDevicePixelRatioChange(){this._charSizeService.measure(),this._renderer.value&&(this._renderer.value.handleDevicePixelRatioChange(),this.refreshRows(0,this._rowCount-1))}handleResize(e,r){this._renderer.value&&(this._isPaused?this._pausedResizeTask.set(()=>this._renderer.value?.handleResize(e,r)):this._renderer.value.handleResize(e,r),this._fullRefresh())}handleCharSizeChanged(){this._renderer.value?.handleCharSizeChanged()}handleBlur(){this._renderer.value?.handleBlur()}handleFocus(){this._renderer.value?.handleFocus()}handleSelectionChanged(e,r,c){this._selectionState.start=e,this._selectionState.end=r,this._selectionState.columnSelectMode=c,this._renderer.value?.handleSelectionChanged(e,r,c)}handleCursorMove(){this._renderer.value?.handleCursorMove()}clear(){this._renderer.value?.clear()}};s.RenderService=i=l([u(2,t.IOptionsService),u(3,a.ICharSizeService),u(4,t.IDecorationService),u(5,t.IBufferService),u(6,a.ICoreBrowserService),u(7,a.IThemeService)],i)},9312:function(R,s,n){var l=this&&this.__decorate||function(d,w,L,B){var A,k=arguments.length,I=k<3?w:B===null?B=Object.getOwnPropertyDescriptor(w,L):B;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")I=Reflect.decorate(d,w,L,B);else for(var W=d.length-1;W>=0;W--)(A=d[W])&&(I=(k<3?A(I):k>3?A(w,L,I):A(w,L))||I);return k>3&&I&&Object.defineProperty(w,L,I),I},u=this&&this.__param||function(d,w){return function(L,B){w(L,B,d)}};Object.defineProperty(s,"__esModule",{value:!0}),s.SelectionService=void 0;const o=n(9806),a=n(9504),f=n(456),v=n(4725),h=n(8460),t=n(844),i=n(6114),e=n(4841),r=n(511),c=n(2585),p=String.fromCharCode(160),g=new RegExp(p,"g");let S=s.SelectionService=class extends t.Disposable{constructor(d,w,L,B,A,k,I,W,U){super(),this._element=d,this._screenElement=w,this._linkifier=L,this._bufferService=B,this._coreService=A,this._mouseService=k,this._optionsService=I,this._renderService=W,this._coreBrowserService=U,this._dragScrollAmount=0,this._enabled=!0,this._workCell=new r.CellData,this._mouseDownTimeStamp=0,this._oldHasSelection=!1,this._oldSelectionStart=void 0,this._oldSelectionEnd=void 0,this._onLinuxMouseSelection=this.register(new h.EventEmitter),this.onLinuxMouseSelection=this._onLinuxMouseSelection.event,this._onRedrawRequest=this.register(new h.EventEmitter),this.onRequestRedraw=this._onRedrawRequest.event,this._onSelectionChange=this.register(new h.EventEmitter),this.onSelectionChange=this._onSelectionChange.event,this._onRequestScrollLines=this.register(new h.EventEmitter),this.onRequestScrollLines=this._onRequestScrollLines.event,this._mouseMoveListener=Y=>this._handleMouseMove(Y),this._mouseUpListener=Y=>this._handleMouseUp(Y),this._coreService.onUserInput(()=>{this.hasSelection&&this.clearSelection()}),this._trimListener=this._bufferService.buffer.lines.onTrim(Y=>this._handleTrim(Y)),this.register(this._bufferService.buffers.onBufferActivate(Y=>this._handleBufferActivate(Y))),this.enable(),this._model=new f.SelectionModel(this._bufferService),this._activeSelectionMode=0,this.register((0,t.toDisposable)(()=>{this._removeMouseDownListeners()}))}reset(){this.clearSelection()}disable(){this.clearSelection(),this._enabled=!1}enable(){this._enabled=!0}get selectionStart(){return this._model.finalSelectionStart}get selectionEnd(){return this._model.finalSelectionEnd}get hasSelection(){const d=this._model.finalSelectionStart,w=this._model.finalSelectionEnd;return!(!d||!w||d[0]===w[0]&&d[1]===w[1])}get selectionText(){const d=this._model.finalSelectionStart,w=this._model.finalSelectionEnd;if(!d||!w)return"";const L=this._bufferService.buffer,B=[];if(this._activeSelectionMode===3){if(d[0]===w[0])return"";const A=d[0]<w[0]?d[0]:w[0],k=d[0]<w[0]?w[0]:d[0];for(let I=d[1];I<=w[1];I++){const W=L.translateBufferLineToString(I,!0,A,k);B.push(W)}}else{const A=d[1]===w[1]?w[0]:void 0;B.push(L.translateBufferLineToString(d[1],!0,d[0],A));for(let k=d[1]+1;k<=w[1]-1;k++){const I=L.lines.get(k),W=L.translateBufferLineToString(k,!0);I?.isWrapped?B[B.length-1]+=W:B.push(W)}if(d[1]!==w[1]){const k=L.lines.get(w[1]),I=L.translateBufferLineToString(w[1],!0,0,w[0]);k&&k.isWrapped?B[B.length-1]+=I:B.push(I)}}return B.map(A=>A.replace(g," ")).join(i.isWindows?`\r
`:`
`)}clearSelection(){this._model.clearSelection(),this._removeMouseDownListeners(),this.refresh(),this._onSelectionChange.fire()}refresh(d){this._refreshAnimationFrame||(this._refreshAnimationFrame=this._coreBrowserService.window.requestAnimationFrame(()=>this._refresh())),i.isLinux&&d&&this.selectionText.length&&this._onLinuxMouseSelection.fire(this.selectionText)}_refresh(){this._refreshAnimationFrame=void 0,this._onRedrawRequest.fire({start:this._model.finalSelectionStart,end:this._model.finalSelectionEnd,columnSelectMode:this._activeSelectionMode===3})}_isClickInSelection(d){const w=this._getMouseBufferCoords(d),L=this._model.finalSelectionStart,B=this._model.finalSelectionEnd;return!!(L&&B&&w)&&this._areCoordsInSelection(w,L,B)}isCellInSelection(d,w){const L=this._model.finalSelectionStart,B=this._model.finalSelectionEnd;return!(!L||!B)&&this._areCoordsInSelection([d,w],L,B)}_areCoordsInSelection(d,w,L){return d[1]>w[1]&&d[1]<L[1]||w[1]===L[1]&&d[1]===w[1]&&d[0]>=w[0]&&d[0]<L[0]||w[1]<L[1]&&d[1]===L[1]&&d[0]<L[0]||w[1]<L[1]&&d[1]===w[1]&&d[0]>=w[0]}_selectWordAtCursor(d,w){const L=this._linkifier.currentLink?.link?.range;if(L)return this._model.selectionStart=[L.start.x-1,L.start.y-1],this._model.selectionStartLength=(0,e.getRangeLength)(L,this._bufferService.cols),this._model.selectionEnd=void 0,!0;const B=this._getMouseBufferCoords(d);return!!B&&(this._selectWordAt(B,w),this._model.selectionEnd=void 0,!0)}selectAll(){this._model.isSelectAllActive=!0,this.refresh(),this._onSelectionChange.fire()}selectLines(d,w){this._model.clearSelection(),d=Math.max(d,0),w=Math.min(w,this._bufferService.buffer.lines.length-1),this._model.selectionStart=[0,d],this._model.selectionEnd=[this._bufferService.cols,w],this.refresh(),this._onSelectionChange.fire()}_handleTrim(d){this._model.handleTrim(d)&&this.refresh()}_getMouseBufferCoords(d){const w=this._mouseService.getCoords(d,this._screenElement,this._bufferService.cols,this._bufferService.rows,!0);if(w)return w[0]--,w[1]--,w[1]+=this._bufferService.buffer.ydisp,w}_getMouseEventScrollAmount(d){let w=(0,o.getCoordsRelativeToElement)(this._coreBrowserService.window,d,this._screenElement)[1];const L=this._renderService.dimensions.css.canvas.height;return w>=0&&w<=L?0:(w>L&&(w-=L),w=Math.min(Math.max(w,-50),50),w/=50,w/Math.abs(w)+Math.round(14*w))}shouldForceSelection(d){return i.isMac?d.altKey&&this._optionsService.rawOptions.macOptionClickForcesSelection:d.shiftKey}handleMouseDown(d){if(this._mouseDownTimeStamp=d.timeStamp,(d.button!==2||!this.hasSelection)&&d.button===0){if(!this._enabled){if(!this.shouldForceSelection(d))return;d.stopPropagation()}d.preventDefault(),this._dragScrollAmount=0,this._enabled&&d.shiftKey?this._handleIncrementalClick(d):d.detail===1?this._handleSingleClick(d):d.detail===2?this._handleDoubleClick(d):d.detail===3&&this._handleTripleClick(d),this._addMouseDownListeners(),this.refresh(!0)}}_addMouseDownListeners(){this._screenElement.ownerDocument&&(this._screenElement.ownerDocument.addEventListener("mousemove",this._mouseMoveListener),this._screenElement.ownerDocument.addEventListener("mouseup",this._mouseUpListener)),this._dragScrollIntervalTimer=this._coreBrowserService.window.setInterval(()=>this._dragScroll(),50)}_removeMouseDownListeners(){this._screenElement.ownerDocument&&(this._screenElement.ownerDocument.removeEventListener("mousemove",this._mouseMoveListener),this._screenElement.ownerDocument.removeEventListener("mouseup",this._mouseUpListener)),this._coreBrowserService.window.clearInterval(this._dragScrollIntervalTimer),this._dragScrollIntervalTimer=void 0}_handleIncrementalClick(d){this._model.selectionStart&&(this._model.selectionEnd=this._getMouseBufferCoords(d))}_handleSingleClick(d){if(this._model.selectionStartLength=0,this._model.isSelectAllActive=!1,this._activeSelectionMode=this.shouldColumnSelect(d)?3:0,this._model.selectionStart=this._getMouseBufferCoords(d),!this._model.selectionStart)return;this._model.selectionEnd=void 0;const w=this._bufferService.buffer.lines.get(this._model.selectionStart[1]);w&&w.length!==this._model.selectionStart[0]&&w.hasWidth(this._model.selectionStart[0])===0&&this._model.selectionStart[0]++}_handleDoubleClick(d){this._selectWordAtCursor(d,!0)&&(this._activeSelectionMode=1)}_handleTripleClick(d){const w=this._getMouseBufferCoords(d);w&&(this._activeSelectionMode=2,this._selectLineAt(w[1]))}shouldColumnSelect(d){return d.altKey&&!(i.isMac&&this._optionsService.rawOptions.macOptionClickForcesSelection)}_handleMouseMove(d){if(d.stopImmediatePropagation(),!this._model.selectionStart)return;const w=this._model.selectionEnd?[this._model.selectionEnd[0],this._model.selectionEnd[1]]:null;if(this._model.selectionEnd=this._getMouseBufferCoords(d),!this._model.selectionEnd)return void this.refresh(!0);this._activeSelectionMode===2?this._model.selectionEnd[1]<this._model.selectionStart[1]?this._model.selectionEnd[0]=0:this._model.selectionEnd[0]=this._bufferService.cols:this._activeSelectionMode===1&&this._selectToWordAt(this._model.selectionEnd),this._dragScrollAmount=this._getMouseEventScrollAmount(d),this._activeSelectionMode!==3&&(this._dragScrollAmount>0?this._model.selectionEnd[0]=this._bufferService.cols:this._dragScrollAmount<0&&(this._model.selectionEnd[0]=0));const L=this._bufferService.buffer;if(this._model.selectionEnd[1]<L.lines.length){const B=L.lines.get(this._model.selectionEnd[1]);B&&B.hasWidth(this._model.selectionEnd[0])===0&&this._model.selectionEnd[0]<this._bufferService.cols&&this._model.selectionEnd[0]++}w&&w[0]===this._model.selectionEnd[0]&&w[1]===this._model.selectionEnd[1]||this.refresh(!0)}_dragScroll(){if(this._model.selectionEnd&&this._model.selectionStart&&this._dragScrollAmount){this._onRequestScrollLines.fire({amount:this._dragScrollAmount,suppressScrollEvent:!1});const d=this._bufferService.buffer;this._dragScrollAmount>0?(this._activeSelectionMode!==3&&(this._model.selectionEnd[0]=this._bufferService.cols),this._model.selectionEnd[1]=Math.min(d.ydisp+this._bufferService.rows,d.lines.length-1)):(this._activeSelectionMode!==3&&(this._model.selectionEnd[0]=0),this._model.selectionEnd[1]=d.ydisp),this.refresh()}}_handleMouseUp(d){const w=d.timeStamp-this._mouseDownTimeStamp;if(this._removeMouseDownListeners(),this.selectionText.length<=1&&w<500&&d.altKey&&this._optionsService.rawOptions.altClickMovesCursor){if(this._bufferService.buffer.ybase===this._bufferService.buffer.ydisp){const L=this._mouseService.getCoords(d,this._element,this._bufferService.cols,this._bufferService.rows,!1);if(L&&L[0]!==void 0&&L[1]!==void 0){const B=(0,a.moveToCellSequence)(L[0]-1,L[1]-1,this._bufferService,this._coreService.decPrivateModes.applicationCursorKeys);this._coreService.triggerDataEvent(B,!0)}}}else this._fireEventIfSelectionChanged()}_fireEventIfSelectionChanged(){const d=this._model.finalSelectionStart,w=this._model.finalSelectionEnd,L=!(!d||!w||d[0]===w[0]&&d[1]===w[1]);L?d&&w&&(this._oldSelectionStart&&this._oldSelectionEnd&&d[0]===this._oldSelectionStart[0]&&d[1]===this._oldSelectionStart[1]&&w[0]===this._oldSelectionEnd[0]&&w[1]===this._oldSelectionEnd[1]||this._fireOnSelectionChange(d,w,L)):this._oldHasSelection&&this._fireOnSelectionChange(d,w,L)}_fireOnSelectionChange(d,w,L){this._oldSelectionStart=d,this._oldSelectionEnd=w,this._oldHasSelection=L,this._onSelectionChange.fire()}_handleBufferActivate(d){this.clearSelection(),this._trimListener.dispose(),this._trimListener=d.activeBuffer.lines.onTrim(w=>this._handleTrim(w))}_convertViewportColToCharacterIndex(d,w){let L=w;for(let B=0;w>=B;B++){const A=d.loadCell(B,this._workCell).getChars().length;this._workCell.getWidth()===0?L--:A>1&&w!==B&&(L+=A-1)}return L}setSelection(d,w,L){this._model.clearSelection(),this._removeMouseDownListeners(),this._model.selectionStart=[d,w],this._model.selectionStartLength=L,this.refresh(),this._fireEventIfSelectionChanged()}rightClickSelect(d){this._isClickInSelection(d)||(this._selectWordAtCursor(d,!1)&&this.refresh(!0),this._fireEventIfSelectionChanged())}_getWordAt(d,w,L=!0,B=!0){if(d[0]>=this._bufferService.cols)return;const A=this._bufferService.buffer,k=A.lines.get(d[1]);if(!k)return;const I=A.translateBufferLineToString(d[1],!1);let W=this._convertViewportColToCharacterIndex(k,d[0]),U=W;const Y=d[0]-W;let $=0,y=0,E=0,D=0;if(I.charAt(W)===" "){for(;W>0&&I.charAt(W-1)===" ";)W--;for(;U<I.length&&I.charAt(U+1)===" ";)U++}else{let G=d[0],K=d[0];k.getWidth(G)===0&&($++,G--),k.getWidth(K)===2&&(y++,K++);const q=k.getString(K).length;for(q>1&&(D+=q-1,U+=q-1);G>0&&W>0&&!this._isCharWordSeparator(k.loadCell(G-1,this._workCell));){k.loadCell(G-1,this._workCell);const P=this._workCell.getChars().length;this._workCell.getWidth()===0?($++,G--):P>1&&(E+=P-1,W-=P-1),W--,G--}for(;K<k.length&&U+1<I.length&&!this._isCharWordSeparator(k.loadCell(K+1,this._workCell));){k.loadCell(K+1,this._workCell);const P=this._workCell.getChars().length;this._workCell.getWidth()===2?(y++,K++):P>1&&(D+=P-1,U+=P-1),U++,K++}}U++;let T=W+Y-$+E,F=Math.min(this._bufferService.cols,U-W+$+y-E-D);if(w||I.slice(W,U).trim()!==""){if(L&&T===0&&k.getCodePoint(0)!==32){const G=A.lines.get(d[1]-1);if(G&&k.isWrapped&&G.getCodePoint(this._bufferService.cols-1)!==32){const K=this._getWordAt([this._bufferService.cols-1,d[1]-1],!1,!0,!1);if(K){const q=this._bufferService.cols-K.start;T-=q,F+=q}}}if(B&&T+F===this._bufferService.cols&&k.getCodePoint(this._bufferService.cols-1)!==32){const G=A.lines.get(d[1]+1);if(G?.isWrapped&&G.getCodePoint(0)!==32){const K=this._getWordAt([0,d[1]+1],!1,!1,!0);K&&(F+=K.length)}}return{start:T,length:F}}}_selectWordAt(d,w){const L=this._getWordAt(d,w);if(L){for(;L.start<0;)L.start+=this._bufferService.cols,d[1]--;this._model.selectionStart=[L.start,d[1]],this._model.selectionStartLength=L.length}}_selectToWordAt(d){const w=this._getWordAt(d,!0);if(w){let L=d[1];for(;w.start<0;)w.start+=this._bufferService.cols,L--;if(!this._model.areSelectionValuesReversed())for(;w.start+w.length>this._bufferService.cols;)w.length-=this._bufferService.cols,L++;this._model.selectionEnd=[this._model.areSelectionValuesReversed()?w.start:w.start+w.length,L]}}_isCharWordSeparator(d){return d.getWidth()!==0&&this._optionsService.rawOptions.wordSeparator.indexOf(d.getChars())>=0}_selectLineAt(d){const w=this._bufferService.buffer.getWrappedRangeForLine(d),L={start:{x:0,y:w.first},end:{x:this._bufferService.cols-1,y:w.last}};this._model.selectionStart=[0,w.first],this._model.selectionEnd=void 0,this._model.selectionStartLength=(0,e.getRangeLength)(L,this._bufferService.cols)}};s.SelectionService=S=l([u(3,c.IBufferService),u(4,c.ICoreService),u(5,v.IMouseService),u(6,c.IOptionsService),u(7,v.IRenderService),u(8,v.ICoreBrowserService)],S)},4725:(R,s,n)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.ILinkProviderService=s.IThemeService=s.ICharacterJoinerService=s.ISelectionService=s.IRenderService=s.IMouseService=s.ICoreBrowserService=s.ICharSizeService=void 0;const l=n(8343);s.ICharSizeService=(0,l.createDecorator)("CharSizeService"),s.ICoreBrowserService=(0,l.createDecorator)("CoreBrowserService"),s.IMouseService=(0,l.createDecorator)("MouseService"),s.IRenderService=(0,l.createDecorator)("RenderService"),s.ISelectionService=(0,l.createDecorator)("SelectionService"),s.ICharacterJoinerService=(0,l.createDecorator)("CharacterJoinerService"),s.IThemeService=(0,l.createDecorator)("ThemeService"),s.ILinkProviderService=(0,l.createDecorator)("LinkProviderService")},6731:function(R,s,n){var l=this&&this.__decorate||function(S,d,w,L){var B,A=arguments.length,k=A<3?d:L===null?L=Object.getOwnPropertyDescriptor(d,w):L;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")k=Reflect.decorate(S,d,w,L);else for(var I=S.length-1;I>=0;I--)(B=S[I])&&(k=(A<3?B(k):A>3?B(d,w,k):B(d,w))||k);return A>3&&k&&Object.defineProperty(d,w,k),k},u=this&&this.__param||function(S,d){return function(w,L){d(w,L,S)}};Object.defineProperty(s,"__esModule",{value:!0}),s.ThemeService=s.DEFAULT_ANSI_COLORS=void 0;const o=n(7239),a=n(8055),f=n(8460),v=n(844),h=n(2585),t=a.css.toColor("#ffffff"),i=a.css.toColor("#000000"),e=a.css.toColor("#ffffff"),r=a.css.toColor("#000000"),c={css:"rgba(255, 255, 255, 0.3)",rgba:4294967117};s.DEFAULT_ANSI_COLORS=Object.freeze((()=>{const S=[a.css.toColor("#2e3436"),a.css.toColor("#cc0000"),a.css.toColor("#4e9a06"),a.css.toColor("#c4a000"),a.css.toColor("#3465a4"),a.css.toColor("#75507b"),a.css.toColor("#06989a"),a.css.toColor("#d3d7cf"),a.css.toColor("#555753"),a.css.toColor("#ef2929"),a.css.toColor("#8ae234"),a.css.toColor("#fce94f"),a.css.toColor("#729fcf"),a.css.toColor("#ad7fa8"),a.css.toColor("#34e2e2"),a.css.toColor("#eeeeec")],d=[0,95,135,175,215,255];for(let w=0;w<216;w++){const L=d[w/36%6|0],B=d[w/6%6|0],A=d[w%6];S.push({css:a.channels.toCss(L,B,A),rgba:a.channels.toRgba(L,B,A)})}for(let w=0;w<24;w++){const L=8+10*w;S.push({css:a.channels.toCss(L,L,L),rgba:a.channels.toRgba(L,L,L)})}return S})());let p=s.ThemeService=class extends v.Disposable{get colors(){return this._colors}constructor(S){super(),this._optionsService=S,this._contrastCache=new o.ColorContrastCache,this._halfContrastCache=new o.ColorContrastCache,this._onChangeColors=this.register(new f.EventEmitter),this.onChangeColors=this._onChangeColors.event,this._colors={foreground:t,background:i,cursor:e,cursorAccent:r,selectionForeground:void 0,selectionBackgroundTransparent:c,selectionBackgroundOpaque:a.color.blend(i,c),selectionInactiveBackgroundTransparent:c,selectionInactiveBackgroundOpaque:a.color.blend(i,c),ansi:s.DEFAULT_ANSI_COLORS.slice(),contrastCache:this._contrastCache,halfContrastCache:this._halfContrastCache},this._updateRestoreColors(),this._setTheme(this._optionsService.rawOptions.theme),this.register(this._optionsService.onSpecificOptionChange("minimumContrastRatio",()=>this._contrastCache.clear())),this.register(this._optionsService.onSpecificOptionChange("theme",()=>this._setTheme(this._optionsService.rawOptions.theme)))}_setTheme(S={}){const d=this._colors;if(d.foreground=g(S.foreground,t),d.background=g(S.background,i),d.cursor=g(S.cursor,e),d.cursorAccent=g(S.cursorAccent,r),d.selectionBackgroundTransparent=g(S.selectionBackground,c),d.selectionBackgroundOpaque=a.color.blend(d.background,d.selectionBackgroundTransparent),d.selectionInactiveBackgroundTransparent=g(S.selectionInactiveBackground,d.selectionBackgroundTransparent),d.selectionInactiveBackgroundOpaque=a.color.blend(d.background,d.selectionInactiveBackgroundTransparent),d.selectionForeground=S.selectionForeground?g(S.selectionForeground,a.NULL_COLOR):void 0,d.selectionForeground===a.NULL_COLOR&&(d.selectionForeground=void 0),a.color.isOpaque(d.selectionBackgroundTransparent)&&(d.selectionBackgroundTransparent=a.color.opacity(d.selectionBackgroundTransparent,.3)),a.color.isOpaque(d.selectionInactiveBackgroundTransparent)&&(d.selectionInactiveBackgroundTransparent=a.color.opacity(d.selectionInactiveBackgroundTransparent,.3)),d.ansi=s.DEFAULT_ANSI_COLORS.slice(),d.ansi[0]=g(S.black,s.DEFAULT_ANSI_COLORS[0]),d.ansi[1]=g(S.red,s.DEFAULT_ANSI_COLORS[1]),d.ansi[2]=g(S.green,s.DEFAULT_ANSI_COLORS[2]),d.ansi[3]=g(S.yellow,s.DEFAULT_ANSI_COLORS[3]),d.ansi[4]=g(S.blue,s.DEFAULT_ANSI_COLORS[4]),d.ansi[5]=g(S.magenta,s.DEFAULT_ANSI_COLORS[5]),d.ansi[6]=g(S.cyan,s.DEFAULT_ANSI_COLORS[6]),d.ansi[7]=g(S.white,s.DEFAULT_ANSI_COLORS[7]),d.ansi[8]=g(S.brightBlack,s.DEFAULT_ANSI_COLORS[8]),d.ansi[9]=g(S.brightRed,s.DEFAULT_ANSI_COLORS[9]),d.ansi[10]=g(S.brightGreen,s.DEFAULT_ANSI_COLORS[10]),d.ansi[11]=g(S.brightYellow,s.DEFAULT_ANSI_COLORS[11]),d.ansi[12]=g(S.brightBlue,s.DEFAULT_ANSI_COLORS[12]),d.ansi[13]=g(S.brightMagenta,s.DEFAULT_ANSI_COLORS[13]),d.ansi[14]=g(S.brightCyan,s.DEFAULT_ANSI_COLORS[14]),d.ansi[15]=g(S.brightWhite,s.DEFAULT_ANSI_COLORS[15]),S.extendedAnsi){const w=Math.min(d.ansi.length-16,S.extendedAnsi.length);for(let L=0;L<w;L++)d.ansi[L+16]=g(S.extendedAnsi[L],s.DEFAULT_ANSI_COLORS[L+16])}this._contrastCache.clear(),this._halfContrastCache.clear(),this._updateRestoreColors(),this._onChangeColors.fire(this.colors)}restoreColor(S){this._restoreColor(S),this._onChangeColors.fire(this.colors)}_restoreColor(S){if(S!==void 0)switch(S){case 256:this._colors.foreground=this._restoreColors.foreground;break;case 257:this._colors.background=this._restoreColors.background;break;case 258:this._colors.cursor=this._restoreColors.cursor;break;default:this._colors.ansi[S]=this._restoreColors.ansi[S]}else for(let d=0;d<this._restoreColors.ansi.length;++d)this._colors.ansi[d]=this._restoreColors.ansi[d]}modifyColors(S){S(this._colors),this._onChangeColors.fire(this.colors)}_updateRestoreColors(){this._restoreColors={foreground:this._colors.foreground,background:this._colors.background,cursor:this._colors.cursor,ansi:this._colors.ansi.slice()}}};function g(S,d){if(S!==void 0)try{return a.css.toColor(S)}catch{}return d}s.ThemeService=p=l([u(0,h.IOptionsService)],p)},6349:(R,s,n)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.CircularList=void 0;const l=n(8460),u=n(844);class o extends u.Disposable{constructor(f){super(),this._maxLength=f,this.onDeleteEmitter=this.register(new l.EventEmitter),this.onDelete=this.onDeleteEmitter.event,this.onInsertEmitter=this.register(new l.EventEmitter),this.onInsert=this.onInsertEmitter.event,this.onTrimEmitter=this.register(new l.EventEmitter),this.onTrim=this.onTrimEmitter.event,this._array=new Array(this._maxLength),this._startIndex=0,this._length=0}get maxLength(){return this._maxLength}set maxLength(f){if(this._maxLength===f)return;const v=new Array(f);for(let h=0;h<Math.min(f,this.length);h++)v[h]=this._array[this._getCyclicIndex(h)];this._array=v,this._maxLength=f,this._startIndex=0}get length(){return this._length}set length(f){if(f>this._length)for(let v=this._length;v<f;v++)this._array[v]=void 0;this._length=f}get(f){return this._array[this._getCyclicIndex(f)]}set(f,v){this._array[this._getCyclicIndex(f)]=v}push(f){this._array[this._getCyclicIndex(this._length)]=f,this._length===this._maxLength?(this._startIndex=++this._startIndex%this._maxLength,this.onTrimEmitter.fire(1)):this._length++}recycle(){if(this._length!==this._maxLength)throw new Error("Can only recycle when the buffer is full");return this._startIndex=++this._startIndex%this._maxLength,this.onTrimEmitter.fire(1),this._array[this._getCyclicIndex(this._length-1)]}get isFull(){return this._length===this._maxLength}pop(){return this._array[this._getCyclicIndex(this._length---1)]}splice(f,v,...h){if(v){for(let t=f;t<this._length-v;t++)this._array[this._getCyclicIndex(t)]=this._array[this._getCyclicIndex(t+v)];this._length-=v,this.onDeleteEmitter.fire({index:f,amount:v})}for(let t=this._length-1;t>=f;t--)this._array[this._getCyclicIndex(t+h.length)]=this._array[this._getCyclicIndex(t)];for(let t=0;t<h.length;t++)this._array[this._getCyclicIndex(f+t)]=h[t];if(h.length&&this.onInsertEmitter.fire({index:f,amount:h.length}),this._length+h.length>this._maxLength){const t=this._length+h.length-this._maxLength;this._startIndex+=t,this._length=this._maxLength,this.onTrimEmitter.fire(t)}else this._length+=h.length}trimStart(f){f>this._length&&(f=this._length),this._startIndex+=f,this._length-=f,this.onTrimEmitter.fire(f)}shiftElements(f,v,h){if(!(v<=0)){if(f<0||f>=this._length)throw new Error("start argument out of range");if(f+h<0)throw new Error("Cannot shift elements in list beyond index 0");if(h>0){for(let i=v-1;i>=0;i--)this.set(f+i+h,this.get(f+i));const t=f+v+h-this._length;if(t>0)for(this._length+=t;this._length>this._maxLength;)this._length--,this._startIndex++,this.onTrimEmitter.fire(1)}else for(let t=0;t<v;t++)this.set(f+t+h,this.get(f+t))}}_getCyclicIndex(f){return(this._startIndex+f)%this._maxLength}}s.CircularList=o},1439:(R,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.clone=void 0,s.clone=function n(l,u=5){if(typeof l!="object")return l;const o=Array.isArray(l)?[]:{};for(const a in l)o[a]=u<=1?l[a]:l[a]&&n(l[a],u-1);return o}},8055:(R,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.contrastRatio=s.toPaddedHex=s.rgba=s.rgb=s.css=s.color=s.channels=s.NULL_COLOR=void 0;let n=0,l=0,u=0,o=0;var a,f,v,h,t;function i(r){const c=r.toString(16);return c.length<2?"0"+c:c}function e(r,c){return r<c?(c+.05)/(r+.05):(r+.05)/(c+.05)}s.NULL_COLOR={css:"#00000000",rgba:0},function(r){r.toCss=function(c,p,g,S){return S!==void 0?`#${i(c)}${i(p)}${i(g)}${i(S)}`:`#${i(c)}${i(p)}${i(g)}`},r.toRgba=function(c,p,g,S=255){return(c<<24|p<<16|g<<8|S)>>>0},r.toColor=function(c,p,g,S){return{css:r.toCss(c,p,g,S),rgba:r.toRgba(c,p,g,S)}}}(a||(s.channels=a={})),function(r){function c(p,g){return o=Math.round(255*g),[n,l,u]=t.toChannels(p.rgba),{css:a.toCss(n,l,u,o),rgba:a.toRgba(n,l,u,o)}}r.blend=function(p,g){if(o=(255&g.rgba)/255,o===1)return{css:g.css,rgba:g.rgba};const S=g.rgba>>24&255,d=g.rgba>>16&255,w=g.rgba>>8&255,L=p.rgba>>24&255,B=p.rgba>>16&255,A=p.rgba>>8&255;return n=L+Math.round((S-L)*o),l=B+Math.round((d-B)*o),u=A+Math.round((w-A)*o),{css:a.toCss(n,l,u),rgba:a.toRgba(n,l,u)}},r.isOpaque=function(p){return(255&p.rgba)==255},r.ensureContrastRatio=function(p,g,S){const d=t.ensureContrastRatio(p.rgba,g.rgba,S);if(d)return a.toColor(d>>24&255,d>>16&255,d>>8&255)},r.opaque=function(p){const g=(255|p.rgba)>>>0;return[n,l,u]=t.toChannels(g),{css:a.toCss(n,l,u),rgba:g}},r.opacity=c,r.multiplyOpacity=function(p,g){return o=255&p.rgba,c(p,o*g/255)},r.toColorRGB=function(p){return[p.rgba>>24&255,p.rgba>>16&255,p.rgba>>8&255]}}(f||(s.color=f={})),function(r){let c,p;try{const g=document.createElement("canvas");g.width=1,g.height=1;const S=g.getContext("2d",{willReadFrequently:!0});S&&(c=S,c.globalCompositeOperation="copy",p=c.createLinearGradient(0,0,1,1))}catch{}r.toColor=function(g){if(g.match(/#[\da-f]{3,8}/i))switch(g.length){case 4:return n=parseInt(g.slice(1,2).repeat(2),16),l=parseInt(g.slice(2,3).repeat(2),16),u=parseInt(g.slice(3,4).repeat(2),16),a.toColor(n,l,u);case 5:return n=parseInt(g.slice(1,2).repeat(2),16),l=parseInt(g.slice(2,3).repeat(2),16),u=parseInt(g.slice(3,4).repeat(2),16),o=parseInt(g.slice(4,5).repeat(2),16),a.toColor(n,l,u,o);case 7:return{css:g,rgba:(parseInt(g.slice(1),16)<<8|255)>>>0};case 9:return{css:g,rgba:parseInt(g.slice(1),16)>>>0}}const S=g.match(/rgba?\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*(,\s*(0|1|\d?\.(\d+))\s*)?\)/);if(S)return n=parseInt(S[1]),l=parseInt(S[2]),u=parseInt(S[3]),o=Math.round(255*(S[5]===void 0?1:parseFloat(S[5]))),a.toColor(n,l,u,o);if(!c||!p)throw new Error("css.toColor: Unsupported css format");if(c.fillStyle=p,c.fillStyle=g,typeof c.fillStyle!="string")throw new Error("css.toColor: Unsupported css format");if(c.fillRect(0,0,1,1),[n,l,u,o]=c.getImageData(0,0,1,1).data,o!==255)throw new Error("css.toColor: Unsupported css format");return{rgba:a.toRgba(n,l,u,o),css:g}}}(v||(s.css=v={})),function(r){function c(p,g,S){const d=p/255,w=g/255,L=S/255;return .2126*(d<=.03928?d/12.92:Math.pow((d+.055)/1.055,2.4))+.7152*(w<=.03928?w/12.92:Math.pow((w+.055)/1.055,2.4))+.0722*(L<=.03928?L/12.92:Math.pow((L+.055)/1.055,2.4))}r.relativeLuminance=function(p){return c(p>>16&255,p>>8&255,255&p)},r.relativeLuminance2=c}(h||(s.rgb=h={})),function(r){function c(g,S,d){const w=g>>24&255,L=g>>16&255,B=g>>8&255;let A=S>>24&255,k=S>>16&255,I=S>>8&255,W=e(h.relativeLuminance2(A,k,I),h.relativeLuminance2(w,L,B));for(;W<d&&(A>0||k>0||I>0);)A-=Math.max(0,Math.ceil(.1*A)),k-=Math.max(0,Math.ceil(.1*k)),I-=Math.max(0,Math.ceil(.1*I)),W=e(h.relativeLuminance2(A,k,I),h.relativeLuminance2(w,L,B));return(A<<24|k<<16|I<<8|255)>>>0}function p(g,S,d){const w=g>>24&255,L=g>>16&255,B=g>>8&255;let A=S>>24&255,k=S>>16&255,I=S>>8&255,W=e(h.relativeLuminance2(A,k,I),h.relativeLuminance2(w,L,B));for(;W<d&&(A<255||k<255||I<255);)A=Math.min(255,A+Math.ceil(.1*(255-A))),k=Math.min(255,k+Math.ceil(.1*(255-k))),I=Math.min(255,I+Math.ceil(.1*(255-I))),W=e(h.relativeLuminance2(A,k,I),h.relativeLuminance2(w,L,B));return(A<<24|k<<16|I<<8|255)>>>0}r.blend=function(g,S){if(o=(255&S)/255,o===1)return S;const d=S>>24&255,w=S>>16&255,L=S>>8&255,B=g>>24&255,A=g>>16&255,k=g>>8&255;return n=B+Math.round((d-B)*o),l=A+Math.round((w-A)*o),u=k+Math.round((L-k)*o),a.toRgba(n,l,u)},r.ensureContrastRatio=function(g,S,d){const w=h.relativeLuminance(g>>8),L=h.relativeLuminance(S>>8);if(e(w,L)<d){if(L<w){const k=c(g,S,d),I=e(w,h.relativeLuminance(k>>8));if(I<d){const W=p(g,S,d);return I>e(w,h.relativeLuminance(W>>8))?k:W}return k}const B=p(g,S,d),A=e(w,h.relativeLuminance(B>>8));if(A<d){const k=c(g,S,d);return A>e(w,h.relativeLuminance(k>>8))?B:k}return B}},r.reduceLuminance=c,r.increaseLuminance=p,r.toChannels=function(g){return[g>>24&255,g>>16&255,g>>8&255,255&g]}}(t||(s.rgba=t={})),s.toPaddedHex=i,s.contrastRatio=e},8969:(R,s,n)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.CoreTerminal=void 0;const l=n(844),u=n(2585),o=n(4348),a=n(7866),f=n(744),v=n(7302),h=n(6975),t=n(8460),i=n(1753),e=n(1480),r=n(7994),c=n(9282),p=n(5435),g=n(5981),S=n(2660);let d=!1;class w extends l.Disposable{get onScroll(){return this._onScrollApi||(this._onScrollApi=this.register(new t.EventEmitter),this._onScroll.event(B=>{this._onScrollApi?.fire(B.position)})),this._onScrollApi.event}get cols(){return this._bufferService.cols}get rows(){return this._bufferService.rows}get buffers(){return this._bufferService.buffers}get options(){return this.optionsService.options}set options(B){for(const A in B)this.optionsService.options[A]=B[A]}constructor(B){super(),this._windowsWrappingHeuristics=this.register(new l.MutableDisposable),this._onBinary=this.register(new t.EventEmitter),this.onBinary=this._onBinary.event,this._onData=this.register(new t.EventEmitter),this.onData=this._onData.event,this._onLineFeed=this.register(new t.EventEmitter),this.onLineFeed=this._onLineFeed.event,this._onResize=this.register(new t.EventEmitter),this.onResize=this._onResize.event,this._onWriteParsed=this.register(new t.EventEmitter),this.onWriteParsed=this._onWriteParsed.event,this._onScroll=this.register(new t.EventEmitter),this._instantiationService=new o.InstantiationService,this.optionsService=this.register(new v.OptionsService(B)),this._instantiationService.setService(u.IOptionsService,this.optionsService),this._bufferService=this.register(this._instantiationService.createInstance(f.BufferService)),this._instantiationService.setService(u.IBufferService,this._bufferService),this._logService=this.register(this._instantiationService.createInstance(a.LogService)),this._instantiationService.setService(u.ILogService,this._logService),this.coreService=this.register(this._instantiationService.createInstance(h.CoreService)),this._instantiationService.setService(u.ICoreService,this.coreService),this.coreMouseService=this.register(this._instantiationService.createInstance(i.CoreMouseService)),this._instantiationService.setService(u.ICoreMouseService,this.coreMouseService),this.unicodeService=this.register(this._instantiationService.createInstance(e.UnicodeService)),this._instantiationService.setService(u.IUnicodeService,this.unicodeService),this._charsetService=this._instantiationService.createInstance(r.CharsetService),this._instantiationService.setService(u.ICharsetService,this._charsetService),this._oscLinkService=this._instantiationService.createInstance(S.OscLinkService),this._instantiationService.setService(u.IOscLinkService,this._oscLinkService),this._inputHandler=this.register(new p.InputHandler(this._bufferService,this._charsetService,this.coreService,this._logService,this.optionsService,this._oscLinkService,this.coreMouseService,this.unicodeService)),this.register((0,t.forwardEvent)(this._inputHandler.onLineFeed,this._onLineFeed)),this.register(this._inputHandler),this.register((0,t.forwardEvent)(this._bufferService.onResize,this._onResize)),this.register((0,t.forwardEvent)(this.coreService.onData,this._onData)),this.register((0,t.forwardEvent)(this.coreService.onBinary,this._onBinary)),this.register(this.coreService.onRequestScrollToBottom(()=>this.scrollToBottom())),this.register(this.coreService.onUserInput(()=>this._writeBuffer.handleUserInput())),this.register(this.optionsService.onMultipleOptionChange(["windowsMode","windowsPty"],()=>this._handleWindowsPtyOptionChange())),this.register(this._bufferService.onScroll(A=>{this._onScroll.fire({position:this._bufferService.buffer.ydisp,source:0}),this._inputHandler.markRangeDirty(this._bufferService.buffer.scrollTop,this._bufferService.buffer.scrollBottom)})),this.register(this._inputHandler.onScroll(A=>{this._onScroll.fire({position:this._bufferService.buffer.ydisp,source:0}),this._inputHandler.markRangeDirty(this._bufferService.buffer.scrollTop,this._bufferService.buffer.scrollBottom)})),this._writeBuffer=this.register(new g.WriteBuffer((A,k)=>this._inputHandler.parse(A,k))),this.register((0,t.forwardEvent)(this._writeBuffer.onWriteParsed,this._onWriteParsed))}write(B,A){this._writeBuffer.write(B,A)}writeSync(B,A){this._logService.logLevel<=u.LogLevelEnum.WARN&&!d&&(this._logService.warn("writeSync is unreliable and will be removed soon."),d=!0),this._writeBuffer.writeSync(B,A)}input(B,A=!0){this.coreService.triggerDataEvent(B,A)}resize(B,A){isNaN(B)||isNaN(A)||(B=Math.max(B,f.MINIMUM_COLS),A=Math.max(A,f.MINIMUM_ROWS),this._bufferService.resize(B,A))}scroll(B,A=!1){this._bufferService.scroll(B,A)}scrollLines(B,A,k){this._bufferService.scrollLines(B,A,k)}scrollPages(B){this.scrollLines(B*(this.rows-1))}scrollToTop(){this.scrollLines(-this._bufferService.buffer.ydisp)}scrollToBottom(){this.scrollLines(this._bufferService.buffer.ybase-this._bufferService.buffer.ydisp)}scrollToLine(B){const A=B-this._bufferService.buffer.ydisp;A!==0&&this.scrollLines(A)}registerEscHandler(B,A){return this._inputHandler.registerEscHandler(B,A)}registerDcsHandler(B,A){return this._inputHandler.registerDcsHandler(B,A)}registerCsiHandler(B,A){return this._inputHandler.registerCsiHandler(B,A)}registerOscHandler(B,A){return this._inputHandler.registerOscHandler(B,A)}_setup(){this._handleWindowsPtyOptionChange()}reset(){this._inputHandler.reset(),this._bufferService.reset(),this._charsetService.reset(),this.coreService.reset(),this.coreMouseService.reset()}_handleWindowsPtyOptionChange(){let B=!1;const A=this.optionsService.rawOptions.windowsPty;A&&A.buildNumber!==void 0&&A.buildNumber!==void 0?B=A.backend==="conpty"&&A.buildNumber<21376:this.optionsService.rawOptions.windowsMode&&(B=!0),B?this._enableWindowsWrappingHeuristics():this._windowsWrappingHeuristics.clear()}_enableWindowsWrappingHeuristics(){if(!this._windowsWrappingHeuristics.value){const B=[];B.push(this.onLineFeed(c.updateWindowsModeWrappedState.bind(null,this._bufferService))),B.push(this.registerCsiHandler({final:"H"},()=>((0,c.updateWindowsModeWrappedState)(this._bufferService),!1))),this._windowsWrappingHeuristics.value=(0,l.toDisposable)(()=>{for(const A of B)A.dispose()})}}}s.CoreTerminal=w},8460:(R,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.runAndSubscribe=s.forwardEvent=s.EventEmitter=void 0,s.EventEmitter=class{constructor(){this._listeners=[],this._disposed=!1}get event(){return this._event||(this._event=n=>(this._listeners.push(n),{dispose:()=>{if(!this._disposed){for(let l=0;l<this._listeners.length;l++)if(this._listeners[l]===n)return void this._listeners.splice(l,1)}}})),this._event}fire(n,l){const u=[];for(let o=0;o<this._listeners.length;o++)u.push(this._listeners[o]);for(let o=0;o<u.length;o++)u[o].call(void 0,n,l)}dispose(){this.clearListeners(),this._disposed=!0}clearListeners(){this._listeners&&(this._listeners.length=0)}},s.forwardEvent=function(n,l){return n(u=>l.fire(u))},s.runAndSubscribe=function(n,l){return l(void 0),n(u=>l(u))}},5435:function(R,s,n){var l=this&&this.__decorate||function($,y,E,D){var T,F=arguments.length,G=F<3?y:D===null?D=Object.getOwnPropertyDescriptor(y,E):D;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")G=Reflect.decorate($,y,E,D);else for(var K=$.length-1;K>=0;K--)(T=$[K])&&(G=(F<3?T(G):F>3?T(y,E,G):T(y,E))||G);return F>3&&G&&Object.defineProperty(y,E,G),G},u=this&&this.__param||function($,y){return function(E,D){y(E,D,$)}};Object.defineProperty(s,"__esModule",{value:!0}),s.InputHandler=s.WindowsOptionsReportType=void 0;const o=n(2584),a=n(7116),f=n(2015),v=n(844),h=n(482),t=n(8437),i=n(8460),e=n(643),r=n(511),c=n(3734),p=n(2585),g=n(1480),S=n(6242),d=n(6351),w=n(5941),L={"(":0,")":1,"*":2,"+":3,"-":1,".":2},B=131072;function A($,y){if($>24)return y.setWinLines||!1;switch($){case 1:return!!y.restoreWin;case 2:return!!y.minimizeWin;case 3:return!!y.setWinPosition;case 4:return!!y.setWinSizePixels;case 5:return!!y.raiseWin;case 6:return!!y.lowerWin;case 7:return!!y.refreshWin;case 8:return!!y.setWinSizeChars;case 9:return!!y.maximizeWin;case 10:return!!y.fullscreenWin;case 11:return!!y.getWinState;case 13:return!!y.getWinPosition;case 14:return!!y.getWinSizePixels;case 15:return!!y.getScreenSizePixels;case 16:return!!y.getCellSizePixels;case 18:return!!y.getWinSizeChars;case 19:return!!y.getScreenSizeChars;case 20:return!!y.getIconTitle;case 21:return!!y.getWinTitle;case 22:return!!y.pushTitle;case 23:return!!y.popTitle;case 24:return!!y.setWinLines}return!1}var k;(function($){$[$.GET_WIN_SIZE_PIXELS=0]="GET_WIN_SIZE_PIXELS",$[$.GET_CELL_SIZE_PIXELS=1]="GET_CELL_SIZE_PIXELS"})(k||(s.WindowsOptionsReportType=k={}));let I=0;class W extends v.Disposable{getAttrData(){return this._curAttrData}constructor(y,E,D,T,F,G,K,q,P=new f.EscapeSequenceParser){super(),this._bufferService=y,this._charsetService=E,this._coreService=D,this._logService=T,this._optionsService=F,this._oscLinkService=G,this._coreMouseService=K,this._unicodeService=q,this._parser=P,this._parseBuffer=new Uint32Array(4096),this._stringDecoder=new h.StringToUtf32,this._utf8Decoder=new h.Utf8ToUtf32,this._workCell=new r.CellData,this._windowTitle="",this._iconName="",this._windowTitleStack=[],this._iconNameStack=[],this._curAttrData=t.DEFAULT_ATTR_DATA.clone(),this._eraseAttrDataInternal=t.DEFAULT_ATTR_DATA.clone(),this._onRequestBell=this.register(new i.EventEmitter),this.onRequestBell=this._onRequestBell.event,this._onRequestRefreshRows=this.register(new i.EventEmitter),this.onRequestRefreshRows=this._onRequestRefreshRows.event,this._onRequestReset=this.register(new i.EventEmitter),this.onRequestReset=this._onRequestReset.event,this._onRequestSendFocus=this.register(new i.EventEmitter),this.onRequestSendFocus=this._onRequestSendFocus.event,this._onRequestSyncScrollBar=this.register(new i.EventEmitter),this.onRequestSyncScrollBar=this._onRequestSyncScrollBar.event,this._onRequestWindowsOptionsReport=this.register(new i.EventEmitter),this.onRequestWindowsOptionsReport=this._onRequestWindowsOptionsReport.event,this._onA11yChar=this.register(new i.EventEmitter),this.onA11yChar=this._onA11yChar.event,this._onA11yTab=this.register(new i.EventEmitter),this.onA11yTab=this._onA11yTab.event,this._onCursorMove=this.register(new i.EventEmitter),this.onCursorMove=this._onCursorMove.event,this._onLineFeed=this.register(new i.EventEmitter),this.onLineFeed=this._onLineFeed.event,this._onScroll=this.register(new i.EventEmitter),this.onScroll=this._onScroll.event,this._onTitleChange=this.register(new i.EventEmitter),this.onTitleChange=this._onTitleChange.event,this._onColor=this.register(new i.EventEmitter),this.onColor=this._onColor.event,this._parseStack={paused:!1,cursorStartX:0,cursorStartY:0,decodedLength:0,position:0},this._specialColors=[256,257,258],this.register(this._parser),this._dirtyRowTracker=new U(this._bufferService),this._activeBuffer=this._bufferService.buffer,this.register(this._bufferService.buffers.onBufferActivate(C=>this._activeBuffer=C.activeBuffer)),this._parser.setCsiHandlerFallback((C,H)=>{this._logService.debug("Unknown CSI code: ",{identifier:this._parser.identToString(C),params:H.toArray()})}),this._parser.setEscHandlerFallback(C=>{this._logService.debug("Unknown ESC code: ",{identifier:this._parser.identToString(C)})}),this._parser.setExecuteHandlerFallback(C=>{this._logService.debug("Unknown EXECUTE code: ",{code:C})}),this._parser.setOscHandlerFallback((C,H,N)=>{this._logService.debug("Unknown OSC code: ",{identifier:C,action:H,data:N})}),this._parser.setDcsHandlerFallback((C,H,N)=>{H==="HOOK"&&(N=N.toArray()),this._logService.debug("Unknown DCS code: ",{identifier:this._parser.identToString(C),action:H,payload:N})}),this._parser.setPrintHandler((C,H,N)=>this.print(C,H,N)),this._parser.registerCsiHandler({final:"@"},C=>this.insertChars(C)),this._parser.registerCsiHandler({intermediates:" ",final:"@"},C=>this.scrollLeft(C)),this._parser.registerCsiHandler({final:"A"},C=>this.cursorUp(C)),this._parser.registerCsiHandler({intermediates:" ",final:"A"},C=>this.scrollRight(C)),this._parser.registerCsiHandler({final:"B"},C=>this.cursorDown(C)),this._parser.registerCsiHandler({final:"C"},C=>this.cursorForward(C)),this._parser.registerCsiHandler({final:"D"},C=>this.cursorBackward(C)),this._parser.registerCsiHandler({final:"E"},C=>this.cursorNextLine(C)),this._parser.registerCsiHandler({final:"F"},C=>this.cursorPrecedingLine(C)),this._parser.registerCsiHandler({final:"G"},C=>this.cursorCharAbsolute(C)),this._parser.registerCsiHandler({final:"H"},C=>this.cursorPosition(C)),this._parser.registerCsiHandler({final:"I"},C=>this.cursorForwardTab(C)),this._parser.registerCsiHandler({final:"J"},C=>this.eraseInDisplay(C,!1)),this._parser.registerCsiHandler({prefix:"?",final:"J"},C=>this.eraseInDisplay(C,!0)),this._parser.registerCsiHandler({final:"K"},C=>this.eraseInLine(C,!1)),this._parser.registerCsiHandler({prefix:"?",final:"K"},C=>this.eraseInLine(C,!0)),this._parser.registerCsiHandler({final:"L"},C=>this.insertLines(C)),this._parser.registerCsiHandler({final:"M"},C=>this.deleteLines(C)),this._parser.registerCsiHandler({final:"P"},C=>this.deleteChars(C)),this._parser.registerCsiHandler({final:"S"},C=>this.scrollUp(C)),this._parser.registerCsiHandler({final:"T"},C=>this.scrollDown(C)),this._parser.registerCsiHandler({final:"X"},C=>this.eraseChars(C)),this._parser.registerCsiHandler({final:"Z"},C=>this.cursorBackwardTab(C)),this._parser.registerCsiHandler({final:"`"},C=>this.charPosAbsolute(C)),this._parser.registerCsiHandler({final:"a"},C=>this.hPositionRelative(C)),this._parser.registerCsiHandler({final:"b"},C=>this.repeatPrecedingCharacter(C)),this._parser.registerCsiHandler({final:"c"},C=>this.sendDeviceAttributesPrimary(C)),this._parser.registerCsiHandler({prefix:">",final:"c"},C=>this.sendDeviceAttributesSecondary(C)),this._parser.registerCsiHandler({final:"d"},C=>this.linePosAbsolute(C)),this._parser.registerCsiHandler({final:"e"},C=>this.vPositionRelative(C)),this._parser.registerCsiHandler({final:"f"},C=>this.hVPosition(C)),this._parser.registerCsiHandler({final:"g"},C=>this.tabClear(C)),this._parser.registerCsiHandler({final:"h"},C=>this.setMode(C)),this._parser.registerCsiHandler({prefix:"?",final:"h"},C=>this.setModePrivate(C)),this._parser.registerCsiHandler({final:"l"},C=>this.resetMode(C)),this._parser.registerCsiHandler({prefix:"?",final:"l"},C=>this.resetModePrivate(C)),this._parser.registerCsiHandler({final:"m"},C=>this.charAttributes(C)),this._parser.registerCsiHandler({final:"n"},C=>this.deviceStatus(C)),this._parser.registerCsiHandler({prefix:"?",final:"n"},C=>this.deviceStatusPrivate(C)),this._parser.registerCsiHandler({intermediates:"!",final:"p"},C=>this.softReset(C)),this._parser.registerCsiHandler({intermediates:" ",final:"q"},C=>this.setCursorStyle(C)),this._parser.registerCsiHandler({final:"r"},C=>this.setScrollRegion(C)),this._parser.registerCsiHandler({final:"s"},C=>this.saveCursor(C)),this._parser.registerCsiHandler({final:"t"},C=>this.windowOptions(C)),this._parser.registerCsiHandler({final:"u"},C=>this.restoreCursor(C)),this._parser.registerCsiHandler({intermediates:"'",final:"}"},C=>this.insertColumns(C)),this._parser.registerCsiHandler({intermediates:"'",final:"~"},C=>this.deleteColumns(C)),this._parser.registerCsiHandler({intermediates:'"',final:"q"},C=>this.selectProtected(C)),this._parser.registerCsiHandler({intermediates:"$",final:"p"},C=>this.requestMode(C,!0)),this._parser.registerCsiHandler({prefix:"?",intermediates:"$",final:"p"},C=>this.requestMode(C,!1)),this._parser.setExecuteHandler(o.C0.BEL,()=>this.bell()),this._parser.setExecuteHandler(o.C0.LF,()=>this.lineFeed()),this._parser.setExecuteHandler(o.C0.VT,()=>this.lineFeed()),this._parser.setExecuteHandler(o.C0.FF,()=>this.lineFeed()),this._parser.setExecuteHandler(o.C0.CR,()=>this.carriageReturn()),this._parser.setExecuteHandler(o.C0.BS,()=>this.backspace()),this._parser.setExecuteHandler(o.C0.HT,()=>this.tab()),this._parser.setExecuteHandler(o.C0.SO,()=>this.shiftOut()),this._parser.setExecuteHandler(o.C0.SI,()=>this.shiftIn()),this._parser.setExecuteHandler(o.C1.IND,()=>this.index()),this._parser.setExecuteHandler(o.C1.NEL,()=>this.nextLine()),this._parser.setExecuteHandler(o.C1.HTS,()=>this.tabSet()),this._parser.registerOscHandler(0,new S.OscHandler(C=>(this.setTitle(C),this.setIconName(C),!0))),this._parser.registerOscHandler(1,new S.OscHandler(C=>this.setIconName(C))),this._parser.registerOscHandler(2,new S.OscHandler(C=>this.setTitle(C))),this._parser.registerOscHandler(4,new S.OscHandler(C=>this.setOrReportIndexedColor(C))),this._parser.registerOscHandler(8,new S.OscHandler(C=>this.setHyperlink(C))),this._parser.registerOscHandler(10,new S.OscHandler(C=>this.setOrReportFgColor(C))),this._parser.registerOscHandler(11,new S.OscHandler(C=>this.setOrReportBgColor(C))),this._parser.registerOscHandler(12,new S.OscHandler(C=>this.setOrReportCursorColor(C))),this._parser.registerOscHandler(104,new S.OscHandler(C=>this.restoreIndexedColor(C))),this._parser.registerOscHandler(110,new S.OscHandler(C=>this.restoreFgColor(C))),this._parser.registerOscHandler(111,new S.OscHandler(C=>this.restoreBgColor(C))),this._parser.registerOscHandler(112,new S.OscHandler(C=>this.restoreCursorColor(C))),this._parser.registerEscHandler({final:"7"},()=>this.saveCursor()),this._parser.registerEscHandler({final:"8"},()=>this.restoreCursor()),this._parser.registerEscHandler({final:"D"},()=>this.index()),this._parser.registerEscHandler({final:"E"},()=>this.nextLine()),this._parser.registerEscHandler({final:"H"},()=>this.tabSet()),this._parser.registerEscHandler({final:"M"},()=>this.reverseIndex()),this._parser.registerEscHandler({final:"="},()=>this.keypadApplicationMode()),this._parser.registerEscHandler({final:">"},()=>this.keypadNumericMode()),this._parser.registerEscHandler({final:"c"},()=>this.fullReset()),this._parser.registerEscHandler({final:"n"},()=>this.setgLevel(2)),this._parser.registerEscHandler({final:"o"},()=>this.setgLevel(3)),this._parser.registerEscHandler({final:"|"},()=>this.setgLevel(3)),this._parser.registerEscHandler({final:"}"},()=>this.setgLevel(2)),this._parser.registerEscHandler({final:"~"},()=>this.setgLevel(1)),this._parser.registerEscHandler({intermediates:"%",final:"@"},()=>this.selectDefaultCharset()),this._parser.registerEscHandler({intermediates:"%",final:"G"},()=>this.selectDefaultCharset());for(const C in a.CHARSETS)this._parser.registerEscHandler({intermediates:"(",final:C},()=>this.selectCharset("("+C)),this._parser.registerEscHandler({intermediates:")",final:C},()=>this.selectCharset(")"+C)),this._parser.registerEscHandler({intermediates:"*",final:C},()=>this.selectCharset("*"+C)),this._parser.registerEscHandler({intermediates:"+",final:C},()=>this.selectCharset("+"+C)),this._parser.registerEscHandler({intermediates:"-",final:C},()=>this.selectCharset("-"+C)),this._parser.registerEscHandler({intermediates:".",final:C},()=>this.selectCharset("."+C)),this._parser.registerEscHandler({intermediates:"/",final:C},()=>this.selectCharset("/"+C));this._parser.registerEscHandler({intermediates:"#",final:"8"},()=>this.screenAlignmentPattern()),this._parser.setErrorHandler(C=>(this._logService.error("Parsing error: ",C),C)),this._parser.registerDcsHandler({intermediates:"$",final:"q"},new d.DcsHandler((C,H)=>this.requestStatusString(C,H)))}_preserveStack(y,E,D,T){this._parseStack.paused=!0,this._parseStack.cursorStartX=y,this._parseStack.cursorStartY=E,this._parseStack.decodedLength=D,this._parseStack.position=T}_logSlowResolvingAsync(y){this._logService.logLevel<=p.LogLevelEnum.WARN&&Promise.race([y,new Promise((E,D)=>setTimeout(()=>D("#SLOW_TIMEOUT"),5e3))]).catch(E=>{if(E!=="#SLOW_TIMEOUT")throw E;console.warn("async parser handler taking longer than 5000 ms")})}_getCurrentLinkId(){return this._curAttrData.extended.urlId}parse(y,E){let D,T=this._activeBuffer.x,F=this._activeBuffer.y,G=0;const K=this._parseStack.paused;if(K){if(D=this._parser.parse(this._parseBuffer,this._parseStack.decodedLength,E))return this._logSlowResolvingAsync(D),D;T=this._parseStack.cursorStartX,F=this._parseStack.cursorStartY,this._parseStack.paused=!1,y.length>B&&(G=this._parseStack.position+B)}if(this._logService.logLevel<=p.LogLevelEnum.DEBUG&&this._logService.debug("parsing data"+(typeof y=="string"?` "${y}"`:` "${Array.prototype.map.call(y,C=>String.fromCharCode(C)).join("")}"`),typeof y=="string"?y.split("").map(C=>C.charCodeAt(0)):y),this._parseBuffer.length<y.length&&this._parseBuffer.length<B&&(this._parseBuffer=new Uint32Array(Math.min(y.length,B))),K||this._dirtyRowTracker.clearRange(),y.length>B)for(let C=G;C<y.length;C+=B){const H=C+B<y.length?C+B:y.length,N=typeof y=="string"?this._stringDecoder.decode(y.substring(C,H),this._parseBuffer):this._utf8Decoder.decode(y.subarray(C,H),this._parseBuffer);if(D=this._parser.parse(this._parseBuffer,N))return this._preserveStack(T,F,N,C),this._logSlowResolvingAsync(D),D}else if(!K){const C=typeof y=="string"?this._stringDecoder.decode(y,this._parseBuffer):this._utf8Decoder.decode(y,this._parseBuffer);if(D=this._parser.parse(this._parseBuffer,C))return this._preserveStack(T,F,C,0),this._logSlowResolvingAsync(D),D}this._activeBuffer.x===T&&this._activeBuffer.y===F||this._onCursorMove.fire();const q=this._dirtyRowTracker.end+(this._bufferService.buffer.ybase-this._bufferService.buffer.ydisp),P=this._dirtyRowTracker.start+(this._bufferService.buffer.ybase-this._bufferService.buffer.ydisp);P<this._bufferService.rows&&this._onRequestRefreshRows.fire(Math.min(P,this._bufferService.rows-1),Math.min(q,this._bufferService.rows-1))}print(y,E,D){let T,F;const G=this._charsetService.charset,K=this._optionsService.rawOptions.screenReaderMode,q=this._bufferService.cols,P=this._coreService.decPrivateModes.wraparound,C=this._coreService.modes.insertMode,H=this._curAttrData;let N=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);this._dirtyRowTracker.markDirty(this._activeBuffer.y),this._activeBuffer.x&&D-E>0&&N.getWidth(this._activeBuffer.x-1)===2&&N.setCellFromCodepoint(this._activeBuffer.x-1,0,1,H);let z=this._parser.precedingJoinState;for(let j=E;j<D;++j){if(T=y[j],T<127&&G){const ie=G[String.fromCharCode(T)];ie&&(T=ie.charCodeAt(0))}const X=this._unicodeService.charProperties(T,z);F=g.UnicodeService.extractWidth(X);const Z=g.UnicodeService.extractShouldJoin(X),Q=Z?g.UnicodeService.extractWidth(z):0;if(z=X,K&&this._onA11yChar.fire((0,h.stringFromCodePoint)(T)),this._getCurrentLinkId()&&this._oscLinkService.addLineToLink(this._getCurrentLinkId(),this._activeBuffer.ybase+this._activeBuffer.y),this._activeBuffer.x+F-Q>q){if(P){const ie=N;let V=this._activeBuffer.x-Q;for(this._activeBuffer.x=Q,this._activeBuffer.y++,this._activeBuffer.y===this._activeBuffer.scrollBottom+1?(this._activeBuffer.y--,this._bufferService.scroll(this._eraseAttrData(),!0)):(this._activeBuffer.y>=this._bufferService.rows&&(this._activeBuffer.y=this._bufferService.rows-1),this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y).isWrapped=!0),N=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y),Q>0&&N instanceof t.BufferLine&&N.copyCellsFrom(ie,V,0,Q,!1);V<q;)ie.setCellFromCodepoint(V++,0,1,H)}else if(this._activeBuffer.x=q-1,F===2)continue}if(Z&&this._activeBuffer.x){const ie=N.getWidth(this._activeBuffer.x-1)?1:2;N.addCodepointToCell(this._activeBuffer.x-ie,T,F);for(let V=F-Q;--V>=0;)N.setCellFromCodepoint(this._activeBuffer.x++,0,0,H)}else if(C&&(N.insertCells(this._activeBuffer.x,F-Q,this._activeBuffer.getNullCell(H)),N.getWidth(q-1)===2&&N.setCellFromCodepoint(q-1,e.NULL_CELL_CODE,e.NULL_CELL_WIDTH,H)),N.setCellFromCodepoint(this._activeBuffer.x++,T,F,H),F>0)for(;--F;)N.setCellFromCodepoint(this._activeBuffer.x++,0,0,H)}this._parser.precedingJoinState=z,this._activeBuffer.x<q&&D-E>0&&N.getWidth(this._activeBuffer.x)===0&&!N.hasContent(this._activeBuffer.x)&&N.setCellFromCodepoint(this._activeBuffer.x,0,1,H),this._dirtyRowTracker.markDirty(this._activeBuffer.y)}registerCsiHandler(y,E){return y.final!=="t"||y.prefix||y.intermediates?this._parser.registerCsiHandler(y,E):this._parser.registerCsiHandler(y,D=>!A(D.params[0],this._optionsService.rawOptions.windowOptions)||E(D))}registerDcsHandler(y,E){return this._parser.registerDcsHandler(y,new d.DcsHandler(E))}registerEscHandler(y,E){return this._parser.registerEscHandler(y,E)}registerOscHandler(y,E){return this._parser.registerOscHandler(y,new S.OscHandler(E))}bell(){return this._onRequestBell.fire(),!0}lineFeed(){return this._dirtyRowTracker.markDirty(this._activeBuffer.y),this._optionsService.rawOptions.convertEol&&(this._activeBuffer.x=0),this._activeBuffer.y++,this._activeBuffer.y===this._activeBuffer.scrollBottom+1?(this._activeBuffer.y--,this._bufferService.scroll(this._eraseAttrData())):this._activeBuffer.y>=this._bufferService.rows?this._activeBuffer.y=this._bufferService.rows-1:this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y).isWrapped=!1,this._activeBuffer.x>=this._bufferService.cols&&this._activeBuffer.x--,this._dirtyRowTracker.markDirty(this._activeBuffer.y),this._onLineFeed.fire(),!0}carriageReturn(){return this._activeBuffer.x=0,!0}backspace(){if(!this._coreService.decPrivateModes.reverseWraparound)return this._restrictCursor(),this._activeBuffer.x>0&&this._activeBuffer.x--,!0;if(this._restrictCursor(this._bufferService.cols),this._activeBuffer.x>0)this._activeBuffer.x--;else if(this._activeBuffer.x===0&&this._activeBuffer.y>this._activeBuffer.scrollTop&&this._activeBuffer.y<=this._activeBuffer.scrollBottom&&this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y)?.isWrapped){this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y).isWrapped=!1,this._activeBuffer.y--,this._activeBuffer.x=this._bufferService.cols-1;const y=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);y.hasWidth(this._activeBuffer.x)&&!y.hasContent(this._activeBuffer.x)&&this._activeBuffer.x--}return this._restrictCursor(),!0}tab(){if(this._activeBuffer.x>=this._bufferService.cols)return!0;const y=this._activeBuffer.x;return this._activeBuffer.x=this._activeBuffer.nextStop(),this._optionsService.rawOptions.screenReaderMode&&this._onA11yTab.fire(this._activeBuffer.x-y),!0}shiftOut(){return this._charsetService.setgLevel(1),!0}shiftIn(){return this._charsetService.setgLevel(0),!0}_restrictCursor(y=this._bufferService.cols-1){this._activeBuffer.x=Math.min(y,Math.max(0,this._activeBuffer.x)),this._activeBuffer.y=this._coreService.decPrivateModes.origin?Math.min(this._activeBuffer.scrollBottom,Math.max(this._activeBuffer.scrollTop,this._activeBuffer.y)):Math.min(this._bufferService.rows-1,Math.max(0,this._activeBuffer.y)),this._dirtyRowTracker.markDirty(this._activeBuffer.y)}_setCursor(y,E){this._dirtyRowTracker.markDirty(this._activeBuffer.y),this._coreService.decPrivateModes.origin?(this._activeBuffer.x=y,this._activeBuffer.y=this._activeBuffer.scrollTop+E):(this._activeBuffer.x=y,this._activeBuffer.y=E),this._restrictCursor(),this._dirtyRowTracker.markDirty(this._activeBuffer.y)}_moveCursor(y,E){this._restrictCursor(),this._setCursor(this._activeBuffer.x+y,this._activeBuffer.y+E)}cursorUp(y){const E=this._activeBuffer.y-this._activeBuffer.scrollTop;return E>=0?this._moveCursor(0,-Math.min(E,y.params[0]||1)):this._moveCursor(0,-(y.params[0]||1)),!0}cursorDown(y){const E=this._activeBuffer.scrollBottom-this._activeBuffer.y;return E>=0?this._moveCursor(0,Math.min(E,y.params[0]||1)):this._moveCursor(0,y.params[0]||1),!0}cursorForward(y){return this._moveCursor(y.params[0]||1,0),!0}cursorBackward(y){return this._moveCursor(-(y.params[0]||1),0),!0}cursorNextLine(y){return this.cursorDown(y),this._activeBuffer.x=0,!0}cursorPrecedingLine(y){return this.cursorUp(y),this._activeBuffer.x=0,!0}cursorCharAbsolute(y){return this._setCursor((y.params[0]||1)-1,this._activeBuffer.y),!0}cursorPosition(y){return this._setCursor(y.length>=2?(y.params[1]||1)-1:0,(y.params[0]||1)-1),!0}charPosAbsolute(y){return this._setCursor((y.params[0]||1)-1,this._activeBuffer.y),!0}hPositionRelative(y){return this._moveCursor(y.params[0]||1,0),!0}linePosAbsolute(y){return this._setCursor(this._activeBuffer.x,(y.params[0]||1)-1),!0}vPositionRelative(y){return this._moveCursor(0,y.params[0]||1),!0}hVPosition(y){return this.cursorPosition(y),!0}tabClear(y){const E=y.params[0];return E===0?delete this._activeBuffer.tabs[this._activeBuffer.x]:E===3&&(this._activeBuffer.tabs={}),!0}cursorForwardTab(y){if(this._activeBuffer.x>=this._bufferService.cols)return!0;let E=y.params[0]||1;for(;E--;)this._activeBuffer.x=this._activeBuffer.nextStop();return!0}cursorBackwardTab(y){if(this._activeBuffer.x>=this._bufferService.cols)return!0;let E=y.params[0]||1;for(;E--;)this._activeBuffer.x=this._activeBuffer.prevStop();return!0}selectProtected(y){const E=y.params[0];return E===1&&(this._curAttrData.bg|=536870912),E!==2&&E!==0||(this._curAttrData.bg&=-536870913),!0}_eraseInBufferLine(y,E,D,T=!1,F=!1){const G=this._activeBuffer.lines.get(this._activeBuffer.ybase+y);G.replaceCells(E,D,this._activeBuffer.getNullCell(this._eraseAttrData()),F),T&&(G.isWrapped=!1)}_resetBufferLine(y,E=!1){const D=this._activeBuffer.lines.get(this._activeBuffer.ybase+y);D&&(D.fill(this._activeBuffer.getNullCell(this._eraseAttrData()),E),this._bufferService.buffer.clearMarkers(this._activeBuffer.ybase+y),D.isWrapped=!1)}eraseInDisplay(y,E=!1){let D;switch(this._restrictCursor(this._bufferService.cols),y.params[0]){case 0:for(D=this._activeBuffer.y,this._dirtyRowTracker.markDirty(D),this._eraseInBufferLine(D++,this._activeBuffer.x,this._bufferService.cols,this._activeBuffer.x===0,E);D<this._bufferService.rows;D++)this._resetBufferLine(D,E);this._dirtyRowTracker.markDirty(D);break;case 1:for(D=this._activeBuffer.y,this._dirtyRowTracker.markDirty(D),this._eraseInBufferLine(D,0,this._activeBuffer.x+1,!0,E),this._activeBuffer.x+1>=this._bufferService.cols&&(this._activeBuffer.lines.get(D+1).isWrapped=!1);D--;)this._resetBufferLine(D,E);this._dirtyRowTracker.markDirty(0);break;case 2:for(D=this._bufferService.rows,this._dirtyRowTracker.markDirty(D-1);D--;)this._resetBufferLine(D,E);this._dirtyRowTracker.markDirty(0);break;case 3:const T=this._activeBuffer.lines.length-this._bufferService.rows;T>0&&(this._activeBuffer.lines.trimStart(T),this._activeBuffer.ybase=Math.max(this._activeBuffer.ybase-T,0),this._activeBuffer.ydisp=Math.max(this._activeBuffer.ydisp-T,0),this._onScroll.fire(0))}return!0}eraseInLine(y,E=!1){switch(this._restrictCursor(this._bufferService.cols),y.params[0]){case 0:this._eraseInBufferLine(this._activeBuffer.y,this._activeBuffer.x,this._bufferService.cols,this._activeBuffer.x===0,E);break;case 1:this._eraseInBufferLine(this._activeBuffer.y,0,this._activeBuffer.x+1,!1,E);break;case 2:this._eraseInBufferLine(this._activeBuffer.y,0,this._bufferService.cols,!0,E)}return this._dirtyRowTracker.markDirty(this._activeBuffer.y),!0}insertLines(y){this._restrictCursor();let E=y.params[0]||1;if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;const D=this._activeBuffer.ybase+this._activeBuffer.y,T=this._bufferService.rows-1-this._activeBuffer.scrollBottom,F=this._bufferService.rows-1+this._activeBuffer.ybase-T+1;for(;E--;)this._activeBuffer.lines.splice(F-1,1),this._activeBuffer.lines.splice(D,0,this._activeBuffer.getBlankLine(this._eraseAttrData()));return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.y,this._activeBuffer.scrollBottom),this._activeBuffer.x=0,!0}deleteLines(y){this._restrictCursor();let E=y.params[0]||1;if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;const D=this._activeBuffer.ybase+this._activeBuffer.y;let T;for(T=this._bufferService.rows-1-this._activeBuffer.scrollBottom,T=this._bufferService.rows-1+this._activeBuffer.ybase-T;E--;)this._activeBuffer.lines.splice(D,1),this._activeBuffer.lines.splice(T,0,this._activeBuffer.getBlankLine(this._eraseAttrData()));return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.y,this._activeBuffer.scrollBottom),this._activeBuffer.x=0,!0}insertChars(y){this._restrictCursor();const E=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);return E&&(E.insertCells(this._activeBuffer.x,y.params[0]||1,this._activeBuffer.getNullCell(this._eraseAttrData())),this._dirtyRowTracker.markDirty(this._activeBuffer.y)),!0}deleteChars(y){this._restrictCursor();const E=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);return E&&(E.deleteCells(this._activeBuffer.x,y.params[0]||1,this._activeBuffer.getNullCell(this._eraseAttrData())),this._dirtyRowTracker.markDirty(this._activeBuffer.y)),!0}scrollUp(y){let E=y.params[0]||1;for(;E--;)this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollTop,1),this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollBottom,0,this._activeBuffer.getBlankLine(this._eraseAttrData()));return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}scrollDown(y){let E=y.params[0]||1;for(;E--;)this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollBottom,1),this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollTop,0,this._activeBuffer.getBlankLine(t.DEFAULT_ATTR_DATA));return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}scrollLeft(y){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;const E=y.params[0]||1;for(let D=this._activeBuffer.scrollTop;D<=this._activeBuffer.scrollBottom;++D){const T=this._activeBuffer.lines.get(this._activeBuffer.ybase+D);T.deleteCells(0,E,this._activeBuffer.getNullCell(this._eraseAttrData())),T.isWrapped=!1}return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}scrollRight(y){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;const E=y.params[0]||1;for(let D=this._activeBuffer.scrollTop;D<=this._activeBuffer.scrollBottom;++D){const T=this._activeBuffer.lines.get(this._activeBuffer.ybase+D);T.insertCells(0,E,this._activeBuffer.getNullCell(this._eraseAttrData())),T.isWrapped=!1}return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}insertColumns(y){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;const E=y.params[0]||1;for(let D=this._activeBuffer.scrollTop;D<=this._activeBuffer.scrollBottom;++D){const T=this._activeBuffer.lines.get(this._activeBuffer.ybase+D);T.insertCells(this._activeBuffer.x,E,this._activeBuffer.getNullCell(this._eraseAttrData())),T.isWrapped=!1}return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}deleteColumns(y){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;const E=y.params[0]||1;for(let D=this._activeBuffer.scrollTop;D<=this._activeBuffer.scrollBottom;++D){const T=this._activeBuffer.lines.get(this._activeBuffer.ybase+D);T.deleteCells(this._activeBuffer.x,E,this._activeBuffer.getNullCell(this._eraseAttrData())),T.isWrapped=!1}return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}eraseChars(y){this._restrictCursor();const E=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);return E&&(E.replaceCells(this._activeBuffer.x,this._activeBuffer.x+(y.params[0]||1),this._activeBuffer.getNullCell(this._eraseAttrData())),this._dirtyRowTracker.markDirty(this._activeBuffer.y)),!0}repeatPrecedingCharacter(y){const E=this._parser.precedingJoinState;if(!E)return!0;const D=y.params[0]||1,T=g.UnicodeService.extractWidth(E),F=this._activeBuffer.x-T,G=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y).getString(F),K=new Uint32Array(G.length*D);let q=0;for(let C=0;C<G.length;){const H=G.codePointAt(C)||0;K[q++]=H,C+=H>65535?2:1}let P=q;for(let C=1;C<D;++C)K.copyWithin(P,0,q),P+=q;return this.print(K,0,P),!0}sendDeviceAttributesPrimary(y){return y.params[0]>0||(this._is("xterm")||this._is("rxvt-unicode")||this._is("screen")?this._coreService.triggerDataEvent(o.C0.ESC+"[?1;2c"):this._is("linux")&&this._coreService.triggerDataEvent(o.C0.ESC+"[?6c")),!0}sendDeviceAttributesSecondary(y){return y.params[0]>0||(this._is("xterm")?this._coreService.triggerDataEvent(o.C0.ESC+"[>0;276;0c"):this._is("rxvt-unicode")?this._coreService.triggerDataEvent(o.C0.ESC+"[>85;95;0c"):this._is("linux")?this._coreService.triggerDataEvent(y.params[0]+"c"):this._is("screen")&&this._coreService.triggerDataEvent(o.C0.ESC+"[>83;40003;0c")),!0}_is(y){return(this._optionsService.rawOptions.termName+"").indexOf(y)===0}setMode(y){for(let E=0;E<y.length;E++)switch(y.params[E]){case 4:this._coreService.modes.insertMode=!0;break;case 20:this._optionsService.options.convertEol=!0}return!0}setModePrivate(y){for(let E=0;E<y.length;E++)switch(y.params[E]){case 1:this._coreService.decPrivateModes.applicationCursorKeys=!0;break;case 2:this._charsetService.setgCharset(0,a.DEFAULT_CHARSET),this._charsetService.setgCharset(1,a.DEFAULT_CHARSET),this._charsetService.setgCharset(2,a.DEFAULT_CHARSET),this._charsetService.setgCharset(3,a.DEFAULT_CHARSET);break;case 3:this._optionsService.rawOptions.windowOptions.setWinLines&&(this._bufferService.resize(132,this._bufferService.rows),this._onRequestReset.fire());break;case 6:this._coreService.decPrivateModes.origin=!0,this._setCursor(0,0);break;case 7:this._coreService.decPrivateModes.wraparound=!0;break;case 12:this._optionsService.options.cursorBlink=!0;break;case 45:this._coreService.decPrivateModes.reverseWraparound=!0;break;case 66:this._logService.debug("Serial port requested application keypad."),this._coreService.decPrivateModes.applicationKeypad=!0,this._onRequestSyncScrollBar.fire();break;case 9:this._coreMouseService.activeProtocol="X10";break;case 1e3:this._coreMouseService.activeProtocol="VT200";break;case 1002:this._coreMouseService.activeProtocol="DRAG";break;case 1003:this._coreMouseService.activeProtocol="ANY";break;case 1004:this._coreService.decPrivateModes.sendFocus=!0,this._onRequestSendFocus.fire();break;case 1005:this._logService.debug("DECSET 1005 not supported (see #2507)");break;case 1006:this._coreMouseService.activeEncoding="SGR";break;case 1015:this._logService.debug("DECSET 1015 not supported (see #2507)");break;case 1016:this._coreMouseService.activeEncoding="SGR_PIXELS";break;case 25:this._coreService.isCursorHidden=!1;break;case 1048:this.saveCursor();break;case 1049:this.saveCursor();case 47:case 1047:this._bufferService.buffers.activateAltBuffer(this._eraseAttrData()),this._coreService.isCursorInitialized=!0,this._onRequestRefreshRows.fire(0,this._bufferService.rows-1),this._onRequestSyncScrollBar.fire();break;case 2004:this._coreService.decPrivateModes.bracketedPasteMode=!0}return!0}resetMode(y){for(let E=0;E<y.length;E++)switch(y.params[E]){case 4:this._coreService.modes.insertMode=!1;break;case 20:this._optionsService.options.convertEol=!1}return!0}resetModePrivate(y){for(let E=0;E<y.length;E++)switch(y.params[E]){case 1:this._coreService.decPrivateModes.applicationCursorKeys=!1;break;case 3:this._optionsService.rawOptions.windowOptions.setWinLines&&(this._bufferService.resize(80,this._bufferService.rows),this._onRequestReset.fire());break;case 6:this._coreService.decPrivateModes.origin=!1,this._setCursor(0,0);break;case 7:this._coreService.decPrivateModes.wraparound=!1;break;case 12:this._optionsService.options.cursorBlink=!1;break;case 45:this._coreService.decPrivateModes.reverseWraparound=!1;break;case 66:this._logService.debug("Switching back to normal keypad."),this._coreService.decPrivateModes.applicationKeypad=!1,this._onRequestSyncScrollBar.fire();break;case 9:case 1e3:case 1002:case 1003:this._coreMouseService.activeProtocol="NONE";break;case 1004:this._coreService.decPrivateModes.sendFocus=!1;break;case 1005:this._logService.debug("DECRST 1005 not supported (see #2507)");break;case 1006:case 1016:this._coreMouseService.activeEncoding="DEFAULT";break;case 1015:this._logService.debug("DECRST 1015 not supported (see #2507)");break;case 25:this._coreService.isCursorHidden=!0;break;case 1048:this.restoreCursor();break;case 1049:case 47:case 1047:this._bufferService.buffers.activateNormalBuffer(),y.params[E]===1049&&this.restoreCursor(),this._coreService.isCursorInitialized=!0,this._onRequestRefreshRows.fire(0,this._bufferService.rows-1),this._onRequestSyncScrollBar.fire();break;case 2004:this._coreService.decPrivateModes.bracketedPasteMode=!1}return!0}requestMode(y,E){const D=this._coreService.decPrivateModes,{activeProtocol:T,activeEncoding:F}=this._coreMouseService,G=this._coreService,{buffers:K,cols:q}=this._bufferService,{active:P,alt:C}=K,H=this._optionsService.rawOptions,N=Z=>Z?1:2,z=y.params[0];return j=z,X=E?z===2?4:z===4?N(G.modes.insertMode):z===12?3:z===20?N(H.convertEol):0:z===1?N(D.applicationCursorKeys):z===3?H.windowOptions.setWinLines?q===80?2:q===132?1:0:0:z===6?N(D.origin):z===7?N(D.wraparound):z===8?3:z===9?N(T==="X10"):z===12?N(H.cursorBlink):z===25?N(!G.isCursorHidden):z===45?N(D.reverseWraparound):z===66?N(D.applicationKeypad):z===67?4:z===1e3?N(T==="VT200"):z===1002?N(T==="DRAG"):z===1003?N(T==="ANY"):z===1004?N(D.sendFocus):z===1005?4:z===1006?N(F==="SGR"):z===1015?4:z===1016?N(F==="SGR_PIXELS"):z===1048?1:z===47||z===1047||z===1049?N(P===C):z===2004?N(D.bracketedPasteMode):0,G.triggerDataEvent(`${o.C0.ESC}[${E?"":"?"}${j};${X}$y`),!0;var j,X}_updateAttrColor(y,E,D,T,F){return E===2?(y|=50331648,y&=-16777216,y|=c.AttributeData.fromColorRGB([D,T,F])):E===5&&(y&=-50331904,y|=33554432|255&D),y}_extractColor(y,E,D){const T=[0,0,-1,0,0,0];let F=0,G=0;do{if(T[G+F]=y.params[E+G],y.hasSubParams(E+G)){const K=y.getSubParams(E+G);let q=0;do T[1]===5&&(F=1),T[G+q+1+F]=K[q];while(++q<K.length&&q+G+1+F<T.length);break}if(T[1]===5&&G+F>=2||T[1]===2&&G+F>=5)break;T[1]&&(F=1)}while(++G+E<y.length&&G+F<T.length);for(let K=2;K<T.length;++K)T[K]===-1&&(T[K]=0);switch(T[0]){case 38:D.fg=this._updateAttrColor(D.fg,T[1],T[3],T[4],T[5]);break;case 48:D.bg=this._updateAttrColor(D.bg,T[1],T[3],T[4],T[5]);break;case 58:D.extended=D.extended.clone(),D.extended.underlineColor=this._updateAttrColor(D.extended.underlineColor,T[1],T[3],T[4],T[5])}return G}_processUnderline(y,E){E.extended=E.extended.clone(),(!~y||y>5)&&(y=1),E.extended.underlineStyle=y,E.fg|=268435456,y===0&&(E.fg&=-268435457),E.updateExtended()}_processSGR0(y){y.fg=t.DEFAULT_ATTR_DATA.fg,y.bg=t.DEFAULT_ATTR_DATA.bg,y.extended=y.extended.clone(),y.extended.underlineStyle=0,y.extended.underlineColor&=-67108864,y.updateExtended()}charAttributes(y){if(y.length===1&&y.params[0]===0)return this._processSGR0(this._curAttrData),!0;const E=y.length;let D;const T=this._curAttrData;for(let F=0;F<E;F++)D=y.params[F],D>=30&&D<=37?(T.fg&=-50331904,T.fg|=16777216|D-30):D>=40&&D<=47?(T.bg&=-50331904,T.bg|=16777216|D-40):D>=90&&D<=97?(T.fg&=-50331904,T.fg|=16777224|D-90):D>=100&&D<=107?(T.bg&=-50331904,T.bg|=16777224|D-100):D===0?this._processSGR0(T):D===1?T.fg|=134217728:D===3?T.bg|=67108864:D===4?(T.fg|=268435456,this._processUnderline(y.hasSubParams(F)?y.getSubParams(F)[0]:1,T)):D===5?T.fg|=536870912:D===7?T.fg|=67108864:D===8?T.fg|=1073741824:D===9?T.fg|=2147483648:D===2?T.bg|=134217728:D===21?this._processUnderline(2,T):D===22?(T.fg&=-134217729,T.bg&=-134217729):D===23?T.bg&=-67108865:D===24?(T.fg&=-268435457,this._processUnderline(0,T)):D===25?T.fg&=-536870913:D===27?T.fg&=-67108865:D===28?T.fg&=-1073741825:D===29?T.fg&=2147483647:D===39?(T.fg&=-67108864,T.fg|=16777215&t.DEFAULT_ATTR_DATA.fg):D===49?(T.bg&=-67108864,T.bg|=16777215&t.DEFAULT_ATTR_DATA.bg):D===38||D===48||D===58?F+=this._extractColor(y,F,T):D===53?T.bg|=1073741824:D===55?T.bg&=-1073741825:D===59?(T.extended=T.extended.clone(),T.extended.underlineColor=-1,T.updateExtended()):D===100?(T.fg&=-67108864,T.fg|=16777215&t.DEFAULT_ATTR_DATA.fg,T.bg&=-67108864,T.bg|=16777215&t.DEFAULT_ATTR_DATA.bg):this._logService.debug("Unknown SGR attribute: %d.",D);return!0}deviceStatus(y){switch(y.params[0]){case 5:this._coreService.triggerDataEvent(`${o.C0.ESC}[0n`);break;case 6:const E=this._activeBuffer.y+1,D=this._activeBuffer.x+1;this._coreService.triggerDataEvent(`${o.C0.ESC}[${E};${D}R`)}return!0}deviceStatusPrivate(y){if(y.params[0]===6){const E=this._activeBuffer.y+1,D=this._activeBuffer.x+1;this._coreService.triggerDataEvent(`${o.C0.ESC}[?${E};${D}R`)}return!0}softReset(y){return this._coreService.isCursorHidden=!1,this._onRequestSyncScrollBar.fire(),this._activeBuffer.scrollTop=0,this._activeBuffer.scrollBottom=this._bufferService.rows-1,this._curAttrData=t.DEFAULT_ATTR_DATA.clone(),this._coreService.reset(),this._charsetService.reset(),this._activeBuffer.savedX=0,this._activeBuffer.savedY=this._activeBuffer.ybase,this._activeBuffer.savedCurAttrData.fg=this._curAttrData.fg,this._activeBuffer.savedCurAttrData.bg=this._curAttrData.bg,this._activeBuffer.savedCharset=this._charsetService.charset,this._coreService.decPrivateModes.origin=!1,!0}setCursorStyle(y){const E=y.params[0]||1;switch(E){case 1:case 2:this._optionsService.options.cursorStyle="block";break;case 3:case 4:this._optionsService.options.cursorStyle="underline";break;case 5:case 6:this._optionsService.options.cursorStyle="bar"}const D=E%2==1;return this._optionsService.options.cursorBlink=D,!0}setScrollRegion(y){const E=y.params[0]||1;let D;return(y.length<2||(D=y.params[1])>this._bufferService.rows||D===0)&&(D=this._bufferService.rows),D>E&&(this._activeBuffer.scrollTop=E-1,this._activeBuffer.scrollBottom=D-1,this._setCursor(0,0)),!0}windowOptions(y){if(!A(y.params[0],this._optionsService.rawOptions.windowOptions))return!0;const E=y.length>1?y.params[1]:0;switch(y.params[0]){case 14:E!==2&&this._onRequestWindowsOptionsReport.fire(k.GET_WIN_SIZE_PIXELS);break;case 16:this._onRequestWindowsOptionsReport.fire(k.GET_CELL_SIZE_PIXELS);break;case 18:this._bufferService&&this._coreService.triggerDataEvent(`${o.C0.ESC}[8;${this._bufferService.rows};${this._bufferService.cols}t`);break;case 22:E!==0&&E!==2||(this._windowTitleStack.push(this._windowTitle),this._windowTitleStack.length>10&&this._windowTitleStack.shift()),E!==0&&E!==1||(this._iconNameStack.push(this._iconName),this._iconNameStack.length>10&&this._iconNameStack.shift());break;case 23:E!==0&&E!==2||this._windowTitleStack.length&&this.setTitle(this._windowTitleStack.pop()),E!==0&&E!==1||this._iconNameStack.length&&this.setIconName(this._iconNameStack.pop())}return!0}saveCursor(y){return this._activeBuffer.savedX=this._activeBuffer.x,this._activeBuffer.savedY=this._activeBuffer.ybase+this._activeBuffer.y,this._activeBuffer.savedCurAttrData.fg=this._curAttrData.fg,this._activeBuffer.savedCurAttrData.bg=this._curAttrData.bg,this._activeBuffer.savedCharset=this._charsetService.charset,!0}restoreCursor(y){return this._activeBuffer.x=this._activeBuffer.savedX||0,this._activeBuffer.y=Math.max(this._activeBuffer.savedY-this._activeBuffer.ybase,0),this._curAttrData.fg=this._activeBuffer.savedCurAttrData.fg,this._curAttrData.bg=this._activeBuffer.savedCurAttrData.bg,this._charsetService.charset=this._savedCharset,this._activeBuffer.savedCharset&&(this._charsetService.charset=this._activeBuffer.savedCharset),this._restrictCursor(),!0}setTitle(y){return this._windowTitle=y,this._onTitleChange.fire(y),!0}setIconName(y){return this._iconName=y,!0}setOrReportIndexedColor(y){const E=[],D=y.split(";");for(;D.length>1;){const T=D.shift(),F=D.shift();if(/^\d+$/.exec(T)){const G=parseInt(T);if(Y(G))if(F==="?")E.push({type:0,index:G});else{const K=(0,w.parseColor)(F);K&&E.push({type:1,index:G,color:K})}}}return E.length&&this._onColor.fire(E),!0}setHyperlink(y){const E=y.split(";");return!(E.length<2)&&(E[1]?this._createHyperlink(E[0],E[1]):!E[0]&&this._finishHyperlink())}_createHyperlink(y,E){this._getCurrentLinkId()&&this._finishHyperlink();const D=y.split(":");let T;const F=D.findIndex(G=>G.startsWith("id="));return F!==-1&&(T=D[F].slice(3)||void 0),this._curAttrData.extended=this._curAttrData.extended.clone(),this._curAttrData.extended.urlId=this._oscLinkService.registerLink({id:T,uri:E}),this._curAttrData.updateExtended(),!0}_finishHyperlink(){return this._curAttrData.extended=this._curAttrData.extended.clone(),this._curAttrData.extended.urlId=0,this._curAttrData.updateExtended(),!0}_setOrReportSpecialColor(y,E){const D=y.split(";");for(let T=0;T<D.length&&!(E>=this._specialColors.length);++T,++E)if(D[T]==="?")this._onColor.fire([{type:0,index:this._specialColors[E]}]);else{const F=(0,w.parseColor)(D[T]);F&&this._onColor.fire([{type:1,index:this._specialColors[E],color:F}])}return!0}setOrReportFgColor(y){return this._setOrReportSpecialColor(y,0)}setOrReportBgColor(y){return this._setOrReportSpecialColor(y,1)}setOrReportCursorColor(y){return this._setOrReportSpecialColor(y,2)}restoreIndexedColor(y){if(!y)return this._onColor.fire([{type:2}]),!0;const E=[],D=y.split(";");for(let T=0;T<D.length;++T)if(/^\d+$/.exec(D[T])){const F=parseInt(D[T]);Y(F)&&E.push({type:2,index:F})}return E.length&&this._onColor.fire(E),!0}restoreFgColor(y){return this._onColor.fire([{type:2,index:256}]),!0}restoreBgColor(y){return this._onColor.fire([{type:2,index:257}]),!0}restoreCursorColor(y){return this._onColor.fire([{type:2,index:258}]),!0}nextLine(){return this._activeBuffer.x=0,this.index(),!0}keypadApplicationMode(){return this._logService.debug("Serial port requested application keypad."),this._coreService.decPrivateModes.applicationKeypad=!0,this._onRequestSyncScrollBar.fire(),!0}keypadNumericMode(){return this._logService.debug("Switching back to normal keypad."),this._coreService.decPrivateModes.applicationKeypad=!1,this._onRequestSyncScrollBar.fire(),!0}selectDefaultCharset(){return this._charsetService.setgLevel(0),this._charsetService.setgCharset(0,a.DEFAULT_CHARSET),!0}selectCharset(y){return y.length!==2?(this.selectDefaultCharset(),!0):(y[0]==="/"||this._charsetService.setgCharset(L[y[0]],a.CHARSETS[y[1]]||a.DEFAULT_CHARSET),!0)}index(){return this._restrictCursor(),this._activeBuffer.y++,this._activeBuffer.y===this._activeBuffer.scrollBottom+1?(this._activeBuffer.y--,this._bufferService.scroll(this._eraseAttrData())):this._activeBuffer.y>=this._bufferService.rows&&(this._activeBuffer.y=this._bufferService.rows-1),this._restrictCursor(),!0}tabSet(){return this._activeBuffer.tabs[this._activeBuffer.x]=!0,!0}reverseIndex(){if(this._restrictCursor(),this._activeBuffer.y===this._activeBuffer.scrollTop){const y=this._activeBuffer.scrollBottom-this._activeBuffer.scrollTop;this._activeBuffer.lines.shiftElements(this._activeBuffer.ybase+this._activeBuffer.y,y,1),this._activeBuffer.lines.set(this._activeBuffer.ybase+this._activeBuffer.y,this._activeBuffer.getBlankLine(this._eraseAttrData())),this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom)}else this._activeBuffer.y--,this._restrictCursor();return!0}fullReset(){return this._parser.reset(),this._onRequestReset.fire(),!0}reset(){this._curAttrData=t.DEFAULT_ATTR_DATA.clone(),this._eraseAttrDataInternal=t.DEFAULT_ATTR_DATA.clone()}_eraseAttrData(){return this._eraseAttrDataInternal.bg&=-67108864,this._eraseAttrDataInternal.bg|=67108863&this._curAttrData.bg,this._eraseAttrDataInternal}setgLevel(y){return this._charsetService.setgLevel(y),!0}screenAlignmentPattern(){const y=new r.CellData;y.content=4194304|"E".charCodeAt(0),y.fg=this._curAttrData.fg,y.bg=this._curAttrData.bg,this._setCursor(0,0);for(let E=0;E<this._bufferService.rows;++E){const D=this._activeBuffer.ybase+this._activeBuffer.y+E,T=this._activeBuffer.lines.get(D);T&&(T.fill(y),T.isWrapped=!1)}return this._dirtyRowTracker.markAllDirty(),this._setCursor(0,0),!0}requestStatusString(y,E){const D=this._bufferService.buffer,T=this._optionsService.rawOptions;return(F=>(this._coreService.triggerDataEvent(`${o.C0.ESC}${F}${o.C0.ESC}\\`),!0))(y==='"q'?`P1$r${this._curAttrData.isProtected()?1:0}"q`:y==='"p'?'P1$r61;1"p':y==="r"?`P1$r${D.scrollTop+1};${D.scrollBottom+1}r`:y==="m"?"P1$r0m":y===" q"?`P1$r${{block:2,underline:4,bar:6}[T.cursorStyle]-(T.cursorBlink?1:0)} q`:"P0$r")}markRangeDirty(y,E){this._dirtyRowTracker.markRangeDirty(y,E)}}s.InputHandler=W;let U=class{constructor($){this._bufferService=$,this.clearRange()}clearRange(){this.start=this._bufferService.buffer.y,this.end=this._bufferService.buffer.y}markDirty($){$<this.start?this.start=$:$>this.end&&(this.end=$)}markRangeDirty($,y){$>y&&(I=$,$=y,y=I),$<this.start&&(this.start=$),y>this.end&&(this.end=y)}markAllDirty(){this.markRangeDirty(0,this._bufferService.rows-1)}};function Y($){return 0<=$&&$<256}U=l([u(0,p.IBufferService)],U)},844:(R,s)=>{function n(l){for(const u of l)u.dispose();l.length=0}Object.defineProperty(s,"__esModule",{value:!0}),s.getDisposeArrayDisposable=s.disposeArray=s.toDisposable=s.MutableDisposable=s.Disposable=void 0,s.Disposable=class{constructor(){this._disposables=[],this._isDisposed=!1}dispose(){this._isDisposed=!0;for(const l of this._disposables)l.dispose();this._disposables.length=0}register(l){return this._disposables.push(l),l}unregister(l){const u=this._disposables.indexOf(l);u!==-1&&this._disposables.splice(u,1)}},s.MutableDisposable=class{constructor(){this._isDisposed=!1}get value(){return this._isDisposed?void 0:this._value}set value(l){this._isDisposed||l===this._value||(this._value?.dispose(),this._value=l)}clear(){this.value=void 0}dispose(){this._isDisposed=!0,this._value?.dispose(),this._value=void 0}},s.toDisposable=function(l){return{dispose:l}},s.disposeArray=n,s.getDisposeArrayDisposable=function(l){return{dispose:()=>n(l)}}},1505:(R,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.FourKeyMap=s.TwoKeyMap=void 0;class n{constructor(){this._data={}}set(u,o,a){this._data[u]||(this._data[u]={}),this._data[u][o]=a}get(u,o){return this._data[u]?this._data[u][o]:void 0}clear(){this._data={}}}s.TwoKeyMap=n,s.FourKeyMap=class{constructor(){this._data=new n}set(l,u,o,a,f){this._data.get(l,u)||this._data.set(l,u,new n),this._data.get(l,u).set(o,a,f)}get(l,u,o,a){return this._data.get(l,u)?.get(o,a)}clear(){this._data.clear()}}},6114:(R,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.isChromeOS=s.isLinux=s.isWindows=s.isIphone=s.isIpad=s.isMac=s.getSafariVersion=s.isSafari=s.isLegacyEdge=s.isFirefox=s.isNode=void 0,s.isNode=typeof process<"u"&&"title"in process;const n=s.isNode?"node":navigator.userAgent,l=s.isNode?"node":navigator.platform;s.isFirefox=n.includes("Firefox"),s.isLegacyEdge=n.includes("Edge"),s.isSafari=/^((?!chrome|android).)*safari/i.test(n),s.getSafariVersion=function(){if(!s.isSafari)return 0;const u=n.match(/Version\/(\d+)/);return u===null||u.length<2?0:parseInt(u[1])},s.isMac=["Macintosh","MacIntel","MacPPC","Mac68K"].includes(l),s.isIpad=l==="iPad",s.isIphone=l==="iPhone",s.isWindows=["Windows","Win16","Win32","WinCE"].includes(l),s.isLinux=l.indexOf("Linux")>=0,s.isChromeOS=/\bCrOS\b/.test(n)},6106:(R,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.SortedList=void 0;let n=0;s.SortedList=class{constructor(l){this._getKey=l,this._array=[]}clear(){this._array.length=0}insert(l){this._array.length!==0?(n=this._search(this._getKey(l)),this._array.splice(n,0,l)):this._array.push(l)}delete(l){if(this._array.length===0)return!1;const u=this._getKey(l);if(u===void 0||(n=this._search(u),n===-1)||this._getKey(this._array[n])!==u)return!1;do if(this._array[n]===l)return this._array.splice(n,1),!0;while(++n<this._array.length&&this._getKey(this._array[n])===u);return!1}*getKeyIterator(l){if(this._array.length!==0&&(n=this._search(l),!(n<0||n>=this._array.length)&&this._getKey(this._array[n])===l))do yield this._array[n];while(++n<this._array.length&&this._getKey(this._array[n])===l)}forEachByKey(l,u){if(this._array.length!==0&&(n=this._search(l),!(n<0||n>=this._array.length)&&this._getKey(this._array[n])===l))do u(this._array[n]);while(++n<this._array.length&&this._getKey(this._array[n])===l)}values(){return[...this._array].values()}_search(l){let u=0,o=this._array.length-1;for(;o>=u;){let a=u+o>>1;const f=this._getKey(this._array[a]);if(f>l)o=a-1;else{if(!(f<l)){for(;a>0&&this._getKey(this._array[a-1])===l;)a--;return a}u=a+1}}return u}}},7226:(R,s,n)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.DebouncedIdleTask=s.IdleTaskQueue=s.PriorityTaskQueue=void 0;const l=n(6114);class u{constructor(){this._tasks=[],this._i=0}enqueue(f){this._tasks.push(f),this._start()}flush(){for(;this._i<this._tasks.length;)this._tasks[this._i]()||this._i++;this.clear()}clear(){this._idleCallback&&(this._cancelCallback(this._idleCallback),this._idleCallback=void 0),this._i=0,this._tasks.length=0}_start(){this._idleCallback||(this._idleCallback=this._requestCallback(this._process.bind(this)))}_process(f){this._idleCallback=void 0;let v=0,h=0,t=f.timeRemaining(),i=0;for(;this._i<this._tasks.length;){if(v=Date.now(),this._tasks[this._i]()||this._i++,v=Math.max(1,Date.now()-v),h=Math.max(v,h),i=f.timeRemaining(),1.5*h>i)return t-v<-20&&console.warn(`task queue exceeded allotted deadline by ${Math.abs(Math.round(t-v))}ms`),void this._start();t=i}this.clear()}}class o extends u{_requestCallback(f){return setTimeout(()=>f(this._createDeadline(16)))}_cancelCallback(f){clearTimeout(f)}_createDeadline(f){const v=Date.now()+f;return{timeRemaining:()=>Math.max(0,v-Date.now())}}}s.PriorityTaskQueue=o,s.IdleTaskQueue=!l.isNode&&"requestIdleCallback"in window?class extends u{_requestCallback(a){return requestIdleCallback(a)}_cancelCallback(a){cancelIdleCallback(a)}}:o,s.DebouncedIdleTask=class{constructor(){this._queue=new s.IdleTaskQueue}set(a){this._queue.clear(),this._queue.enqueue(a)}flush(){this._queue.flush()}}},9282:(R,s,n)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.updateWindowsModeWrappedState=void 0;const l=n(643);s.updateWindowsModeWrappedState=function(u){const o=u.buffer.lines.get(u.buffer.ybase+u.buffer.y-1),a=o?.get(u.cols-1),f=u.buffer.lines.get(u.buffer.ybase+u.buffer.y);f&&a&&(f.isWrapped=a[l.CHAR_DATA_CODE_INDEX]!==l.NULL_CELL_CODE&&a[l.CHAR_DATA_CODE_INDEX]!==l.WHITESPACE_CELL_CODE)}},3734:(R,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.ExtendedAttrs=s.AttributeData=void 0;class n{constructor(){this.fg=0,this.bg=0,this.extended=new l}static toColorRGB(o){return[o>>>16&255,o>>>8&255,255&o]}static fromColorRGB(o){return(255&o[0])<<16|(255&o[1])<<8|255&o[2]}clone(){const o=new n;return o.fg=this.fg,o.bg=this.bg,o.extended=this.extended.clone(),o}isInverse(){return 67108864&this.fg}isBold(){return 134217728&this.fg}isUnderline(){return this.hasExtendedAttrs()&&this.extended.underlineStyle!==0?1:268435456&this.fg}isBlink(){return 536870912&this.fg}isInvisible(){return 1073741824&this.fg}isItalic(){return 67108864&this.bg}isDim(){return 134217728&this.bg}isStrikethrough(){return 2147483648&this.fg}isProtected(){return 536870912&this.bg}isOverline(){return 1073741824&this.bg}getFgColorMode(){return 50331648&this.fg}getBgColorMode(){return 50331648&this.bg}isFgRGB(){return(50331648&this.fg)==50331648}isBgRGB(){return(50331648&this.bg)==50331648}isFgPalette(){return(50331648&this.fg)==16777216||(50331648&this.fg)==33554432}isBgPalette(){return(50331648&this.bg)==16777216||(50331648&this.bg)==33554432}isFgDefault(){return(50331648&this.fg)==0}isBgDefault(){return(50331648&this.bg)==0}isAttributeDefault(){return this.fg===0&&this.bg===0}getFgColor(){switch(50331648&this.fg){case 16777216:case 33554432:return 255&this.fg;case 50331648:return 16777215&this.fg;default:return-1}}getBgColor(){switch(50331648&this.bg){case 16777216:case 33554432:return 255&this.bg;case 50331648:return 16777215&this.bg;default:return-1}}hasExtendedAttrs(){return 268435456&this.bg}updateExtended(){this.extended.isEmpty()?this.bg&=-268435457:this.bg|=268435456}getUnderlineColor(){if(268435456&this.bg&&~this.extended.underlineColor)switch(50331648&this.extended.underlineColor){case 16777216:case 33554432:return 255&this.extended.underlineColor;case 50331648:return 16777215&this.extended.underlineColor;default:return this.getFgColor()}return this.getFgColor()}getUnderlineColorMode(){return 268435456&this.bg&&~this.extended.underlineColor?50331648&this.extended.underlineColor:this.getFgColorMode()}isUnderlineColorRGB(){return 268435456&this.bg&&~this.extended.underlineColor?(50331648&this.extended.underlineColor)==50331648:this.isFgRGB()}isUnderlineColorPalette(){return 268435456&this.bg&&~this.extended.underlineColor?(50331648&this.extended.underlineColor)==16777216||(50331648&this.extended.underlineColor)==33554432:this.isFgPalette()}isUnderlineColorDefault(){return 268435456&this.bg&&~this.extended.underlineColor?(50331648&this.extended.underlineColor)==0:this.isFgDefault()}getUnderlineStyle(){return 268435456&this.fg?268435456&this.bg?this.extended.underlineStyle:1:0}getUnderlineVariantOffset(){return this.extended.underlineVariantOffset}}s.AttributeData=n;class l{get ext(){return this._urlId?-469762049&this._ext|this.underlineStyle<<26:this._ext}set ext(o){this._ext=o}get underlineStyle(){return this._urlId?5:(469762048&this._ext)>>26}set underlineStyle(o){this._ext&=-469762049,this._ext|=o<<26&469762048}get underlineColor(){return 67108863&this._ext}set underlineColor(o){this._ext&=-67108864,this._ext|=67108863&o}get urlId(){return this._urlId}set urlId(o){this._urlId=o}get underlineVariantOffset(){const o=(3758096384&this._ext)>>29;return o<0?4294967288^o:o}set underlineVariantOffset(o){this._ext&=536870911,this._ext|=o<<29&3758096384}constructor(o=0,a=0){this._ext=0,this._urlId=0,this._ext=o,this._urlId=a}clone(){return new l(this._ext,this._urlId)}isEmpty(){return this.underlineStyle===0&&this._urlId===0}}s.ExtendedAttrs=l},9092:(R,s,n)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.Buffer=s.MAX_BUFFER_SIZE=void 0;const l=n(6349),u=n(7226),o=n(3734),a=n(8437),f=n(4634),v=n(511),h=n(643),t=n(4863),i=n(7116);s.MAX_BUFFER_SIZE=4294967295,s.Buffer=class{constructor(e,r,c){this._hasScrollback=e,this._optionsService=r,this._bufferService=c,this.ydisp=0,this.ybase=0,this.y=0,this.x=0,this.tabs={},this.savedY=0,this.savedX=0,this.savedCurAttrData=a.DEFAULT_ATTR_DATA.clone(),this.savedCharset=i.DEFAULT_CHARSET,this.markers=[],this._nullCell=v.CellData.fromCharData([0,h.NULL_CELL_CHAR,h.NULL_CELL_WIDTH,h.NULL_CELL_CODE]),this._whitespaceCell=v.CellData.fromCharData([0,h.WHITESPACE_CELL_CHAR,h.WHITESPACE_CELL_WIDTH,h.WHITESPACE_CELL_CODE]),this._isClearing=!1,this._memoryCleanupQueue=new u.IdleTaskQueue,this._memoryCleanupPosition=0,this._cols=this._bufferService.cols,this._rows=this._bufferService.rows,this.lines=new l.CircularList(this._getCorrectBufferLength(this._rows)),this.scrollTop=0,this.scrollBottom=this._rows-1,this.setupTabStops()}getNullCell(e){return e?(this._nullCell.fg=e.fg,this._nullCell.bg=e.bg,this._nullCell.extended=e.extended):(this._nullCell.fg=0,this._nullCell.bg=0,this._nullCell.extended=new o.ExtendedAttrs),this._nullCell}getWhitespaceCell(e){return e?(this._whitespaceCell.fg=e.fg,this._whitespaceCell.bg=e.bg,this._whitespaceCell.extended=e.extended):(this._whitespaceCell.fg=0,this._whitespaceCell.bg=0,this._whitespaceCell.extended=new o.ExtendedAttrs),this._whitespaceCell}getBlankLine(e,r){return new a.BufferLine(this._bufferService.cols,this.getNullCell(e),r)}get hasScrollback(){return this._hasScrollback&&this.lines.maxLength>this._rows}get isCursorInViewport(){const e=this.ybase+this.y-this.ydisp;return e>=0&&e<this._rows}_getCorrectBufferLength(e){if(!this._hasScrollback)return e;const r=e+this._optionsService.rawOptions.scrollback;return r>s.MAX_BUFFER_SIZE?s.MAX_BUFFER_SIZE:r}fillViewportRows(e){if(this.lines.length===0){e===void 0&&(e=a.DEFAULT_ATTR_DATA);let r=this._rows;for(;r--;)this.lines.push(this.getBlankLine(e))}}clear(){this.ydisp=0,this.ybase=0,this.y=0,this.x=0,this.lines=new l.CircularList(this._getCorrectBufferLength(this._rows)),this.scrollTop=0,this.scrollBottom=this._rows-1,this.setupTabStops()}resize(e,r){const c=this.getNullCell(a.DEFAULT_ATTR_DATA);let p=0;const g=this._getCorrectBufferLength(r);if(g>this.lines.maxLength&&(this.lines.maxLength=g),this.lines.length>0){if(this._cols<e)for(let d=0;d<this.lines.length;d++)p+=+this.lines.get(d).resize(e,c);let S=0;if(this._rows<r)for(let d=this._rows;d<r;d++)this.lines.length<r+this.ybase&&(this._optionsService.rawOptions.windowsMode||this._optionsService.rawOptions.windowsPty.backend!==void 0||this._optionsService.rawOptions.windowsPty.buildNumber!==void 0?this.lines.push(new a.BufferLine(e,c)):this.ybase>0&&this.lines.length<=this.ybase+this.y+S+1?(this.ybase--,S++,this.ydisp>0&&this.ydisp--):this.lines.push(new a.BufferLine(e,c)));else for(let d=this._rows;d>r;d--)this.lines.length>r+this.ybase&&(this.lines.length>this.ybase+this.y+1?this.lines.pop():(this.ybase++,this.ydisp++));if(g<this.lines.maxLength){const d=this.lines.length-g;d>0&&(this.lines.trimStart(d),this.ybase=Math.max(this.ybase-d,0),this.ydisp=Math.max(this.ydisp-d,0),this.savedY=Math.max(this.savedY-d,0)),this.lines.maxLength=g}this.x=Math.min(this.x,e-1),this.y=Math.min(this.y,r-1),S&&(this.y+=S),this.savedX=Math.min(this.savedX,e-1),this.scrollTop=0}if(this.scrollBottom=r-1,this._isReflowEnabled&&(this._reflow(e,r),this._cols>e))for(let S=0;S<this.lines.length;S++)p+=+this.lines.get(S).resize(e,c);this._cols=e,this._rows=r,this._memoryCleanupQueue.clear(),p>.1*this.lines.length&&(this._memoryCleanupPosition=0,this._memoryCleanupQueue.enqueue(()=>this._batchedMemoryCleanup()))}_batchedMemoryCleanup(){let e=!0;this._memoryCleanupPosition>=this.lines.length&&(this._memoryCleanupPosition=0,e=!1);let r=0;for(;this._memoryCleanupPosition<this.lines.length;)if(r+=this.lines.get(this._memoryCleanupPosition++).cleanupMemory(),r>100)return!0;return e}get _isReflowEnabled(){const e=this._optionsService.rawOptions.windowsPty;return e&&e.buildNumber?this._hasScrollback&&e.backend==="conpty"&&e.buildNumber>=21376:this._hasScrollback&&!this._optionsService.rawOptions.windowsMode}_reflow(e,r){this._cols!==e&&(e>this._cols?this._reflowLarger(e,r):this._reflowSmaller(e,r))}_reflowLarger(e,r){const c=(0,f.reflowLargerGetLinesToRemove)(this.lines,this._cols,e,this.ybase+this.y,this.getNullCell(a.DEFAULT_ATTR_DATA));if(c.length>0){const p=(0,f.reflowLargerCreateNewLayout)(this.lines,c);(0,f.reflowLargerApplyNewLayout)(this.lines,p.layout),this._reflowLargerAdjustViewport(e,r,p.countRemoved)}}_reflowLargerAdjustViewport(e,r,c){const p=this.getNullCell(a.DEFAULT_ATTR_DATA);let g=c;for(;g-- >0;)this.ybase===0?(this.y>0&&this.y--,this.lines.length<r&&this.lines.push(new a.BufferLine(e,p))):(this.ydisp===this.ybase&&this.ydisp--,this.ybase--);this.savedY=Math.max(this.savedY-c,0)}_reflowSmaller(e,r){const c=this.getNullCell(a.DEFAULT_ATTR_DATA),p=[];let g=0;for(let S=this.lines.length-1;S>=0;S--){let d=this.lines.get(S);if(!d||!d.isWrapped&&d.getTrimmedLength()<=e)continue;const w=[d];for(;d.isWrapped&&S>0;)d=this.lines.get(--S),w.unshift(d);const L=this.ybase+this.y;if(L>=S&&L<S+w.length)continue;const B=w[w.length-1].getTrimmedLength(),A=(0,f.reflowSmallerGetNewLineLengths)(w,this._cols,e),k=A.length-w.length;let I;I=this.ybase===0&&this.y!==this.lines.length-1?Math.max(0,this.y-this.lines.maxLength+k):Math.max(0,this.lines.length-this.lines.maxLength+k);const W=[];for(let D=0;D<k;D++){const T=this.getBlankLine(a.DEFAULT_ATTR_DATA,!0);W.push(T)}W.length>0&&(p.push({start:S+w.length+g,newLines:W}),g+=W.length),w.push(...W);let U=A.length-1,Y=A[U];Y===0&&(U--,Y=A[U]);let $=w.length-k-1,y=B;for(;$>=0;){const D=Math.min(y,Y);if(w[U]===void 0)break;if(w[U].copyCellsFrom(w[$],y-D,Y-D,D,!0),Y-=D,Y===0&&(U--,Y=A[U]),y-=D,y===0){$--;const T=Math.max($,0);y=(0,f.getWrappedLineTrimmedLength)(w,T,this._cols)}}for(let D=0;D<w.length;D++)A[D]<e&&w[D].setCell(A[D],c);let E=k-I;for(;E-- >0;)this.ybase===0?this.y<r-1?(this.y++,this.lines.pop()):(this.ybase++,this.ydisp++):this.ybase<Math.min(this.lines.maxLength,this.lines.length+g)-r&&(this.ybase===this.ydisp&&this.ydisp++,this.ybase++);this.savedY=Math.min(this.savedY+k,this.ybase+r-1)}if(p.length>0){const S=[],d=[];for(let U=0;U<this.lines.length;U++)d.push(this.lines.get(U));const w=this.lines.length;let L=w-1,B=0,A=p[B];this.lines.length=Math.min(this.lines.maxLength,this.lines.length+g);let k=0;for(let U=Math.min(this.lines.maxLength-1,w+g-1);U>=0;U--)if(A&&A.start>L+k){for(let Y=A.newLines.length-1;Y>=0;Y--)this.lines.set(U--,A.newLines[Y]);U++,S.push({index:L+1,amount:A.newLines.length}),k+=A.newLines.length,A=p[++B]}else this.lines.set(U,d[L--]);let I=0;for(let U=S.length-1;U>=0;U--)S[U].index+=I,this.lines.onInsertEmitter.fire(S[U]),I+=S[U].amount;const W=Math.max(0,w+g-this.lines.maxLength);W>0&&this.lines.onTrimEmitter.fire(W)}}translateBufferLineToString(e,r,c=0,p){const g=this.lines.get(e);return g?g.translateToString(r,c,p):""}getWrappedRangeForLine(e){let r=e,c=e;for(;r>0&&this.lines.get(r).isWrapped;)r--;for(;c+1<this.lines.length&&this.lines.get(c+1).isWrapped;)c++;return{first:r,last:c}}setupTabStops(e){for(e!=null?this.tabs[e]||(e=this.prevStop(e)):(this.tabs={},e=0);e<this._cols;e+=this._optionsService.rawOptions.tabStopWidth)this.tabs[e]=!0}prevStop(e){for(e==null&&(e=this.x);!this.tabs[--e]&&e>0;);return e>=this._cols?this._cols-1:e<0?0:e}nextStop(e){for(e==null&&(e=this.x);!this.tabs[++e]&&e<this._cols;);return e>=this._cols?this._cols-1:e<0?0:e}clearMarkers(e){this._isClearing=!0;for(let r=0;r<this.markers.length;r++)this.markers[r].line===e&&(this.markers[r].dispose(),this.markers.splice(r--,1));this._isClearing=!1}clearAllMarkers(){this._isClearing=!0;for(let e=0;e<this.markers.length;e++)this.markers[e].dispose(),this.markers.splice(e--,1);this._isClearing=!1}addMarker(e){const r=new t.Marker(e);return this.markers.push(r),r.register(this.lines.onTrim(c=>{r.line-=c,r.line<0&&r.dispose()})),r.register(this.lines.onInsert(c=>{r.line>=c.index&&(r.line+=c.amount)})),r.register(this.lines.onDelete(c=>{r.line>=c.index&&r.line<c.index+c.amount&&r.dispose(),r.line>c.index&&(r.line-=c.amount)})),r.register(r.onDispose(()=>this._removeMarker(r))),r}_removeMarker(e){this._isClearing||this.markers.splice(this.markers.indexOf(e),1)}}},8437:(R,s,n)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.BufferLine=s.DEFAULT_ATTR_DATA=void 0;const l=n(3734),u=n(511),o=n(643),a=n(482);s.DEFAULT_ATTR_DATA=Object.freeze(new l.AttributeData);let f=0;class v{constructor(t,i,e=!1){this.isWrapped=e,this._combined={},this._extendedAttrs={},this._data=new Uint32Array(3*t);const r=i||u.CellData.fromCharData([0,o.NULL_CELL_CHAR,o.NULL_CELL_WIDTH,o.NULL_CELL_CODE]);for(let c=0;c<t;++c)this.setCell(c,r);this.length=t}get(t){const i=this._data[3*t+0],e=2097151&i;return[this._data[3*t+1],2097152&i?this._combined[t]:e?(0,a.stringFromCodePoint)(e):"",i>>22,2097152&i?this._combined[t].charCodeAt(this._combined[t].length-1):e]}set(t,i){this._data[3*t+1]=i[o.CHAR_DATA_ATTR_INDEX],i[o.CHAR_DATA_CHAR_INDEX].length>1?(this._combined[t]=i[1],this._data[3*t+0]=2097152|t|i[o.CHAR_DATA_WIDTH_INDEX]<<22):this._data[3*t+0]=i[o.CHAR_DATA_CHAR_INDEX].charCodeAt(0)|i[o.CHAR_DATA_WIDTH_INDEX]<<22}getWidth(t){return this._data[3*t+0]>>22}hasWidth(t){return 12582912&this._data[3*t+0]}getFg(t){return this._data[3*t+1]}getBg(t){return this._data[3*t+2]}hasContent(t){return 4194303&this._data[3*t+0]}getCodePoint(t){const i=this._data[3*t+0];return 2097152&i?this._combined[t].charCodeAt(this._combined[t].length-1):2097151&i}isCombined(t){return 2097152&this._data[3*t+0]}getString(t){const i=this._data[3*t+0];return 2097152&i?this._combined[t]:2097151&i?(0,a.stringFromCodePoint)(2097151&i):""}isProtected(t){return 536870912&this._data[3*t+2]}loadCell(t,i){return f=3*t,i.content=this._data[f+0],i.fg=this._data[f+1],i.bg=this._data[f+2],2097152&i.content&&(i.combinedData=this._combined[t]),268435456&i.bg&&(i.extended=this._extendedAttrs[t]),i}setCell(t,i){2097152&i.content&&(this._combined[t]=i.combinedData),268435456&i.bg&&(this._extendedAttrs[t]=i.extended),this._data[3*t+0]=i.content,this._data[3*t+1]=i.fg,this._data[3*t+2]=i.bg}setCellFromCodepoint(t,i,e,r){268435456&r.bg&&(this._extendedAttrs[t]=r.extended),this._data[3*t+0]=i|e<<22,this._data[3*t+1]=r.fg,this._data[3*t+2]=r.bg}addCodepointToCell(t,i,e){let r=this._data[3*t+0];2097152&r?this._combined[t]+=(0,a.stringFromCodePoint)(i):2097151&r?(this._combined[t]=(0,a.stringFromCodePoint)(2097151&r)+(0,a.stringFromCodePoint)(i),r&=-2097152,r|=2097152):r=i|4194304,e&&(r&=-12582913,r|=e<<22),this._data[3*t+0]=r}insertCells(t,i,e){if((t%=this.length)&&this.getWidth(t-1)===2&&this.setCellFromCodepoint(t-1,0,1,e),i<this.length-t){const r=new u.CellData;for(let c=this.length-t-i-1;c>=0;--c)this.setCell(t+i+c,this.loadCell(t+c,r));for(let c=0;c<i;++c)this.setCell(t+c,e)}else for(let r=t;r<this.length;++r)this.setCell(r,e);this.getWidth(this.length-1)===2&&this.setCellFromCodepoint(this.length-1,0,1,e)}deleteCells(t,i,e){if(t%=this.length,i<this.length-t){const r=new u.CellData;for(let c=0;c<this.length-t-i;++c)this.setCell(t+c,this.loadCell(t+i+c,r));for(let c=this.length-i;c<this.length;++c)this.setCell(c,e)}else for(let r=t;r<this.length;++r)this.setCell(r,e);t&&this.getWidth(t-1)===2&&this.setCellFromCodepoint(t-1,0,1,e),this.getWidth(t)!==0||this.hasContent(t)||this.setCellFromCodepoint(t,0,1,e)}replaceCells(t,i,e,r=!1){if(r)for(t&&this.getWidth(t-1)===2&&!this.isProtected(t-1)&&this.setCellFromCodepoint(t-1,0,1,e),i<this.length&&this.getWidth(i-1)===2&&!this.isProtected(i)&&this.setCellFromCodepoint(i,0,1,e);t<i&&t<this.length;)this.isProtected(t)||this.setCell(t,e),t++;else for(t&&this.getWidth(t-1)===2&&this.setCellFromCodepoint(t-1,0,1,e),i<this.length&&this.getWidth(i-1)===2&&this.setCellFromCodepoint(i,0,1,e);t<i&&t<this.length;)this.setCell(t++,e)}resize(t,i){if(t===this.length)return 4*this._data.length*2<this._data.buffer.byteLength;const e=3*t;if(t>this.length){if(this._data.buffer.byteLength>=4*e)this._data=new Uint32Array(this._data.buffer,0,e);else{const r=new Uint32Array(e);r.set(this._data),this._data=r}for(let r=this.length;r<t;++r)this.setCell(r,i)}else{this._data=this._data.subarray(0,e);const r=Object.keys(this._combined);for(let p=0;p<r.length;p++){const g=parseInt(r[p],10);g>=t&&delete this._combined[g]}const c=Object.keys(this._extendedAttrs);for(let p=0;p<c.length;p++){const g=parseInt(c[p],10);g>=t&&delete this._extendedAttrs[g]}}return this.length=t,4*e*2<this._data.buffer.byteLength}cleanupMemory(){if(4*this._data.length*2<this._data.buffer.byteLength){const t=new Uint32Array(this._data.length);return t.set(this._data),this._data=t,1}return 0}fill(t,i=!1){if(i)for(let e=0;e<this.length;++e)this.isProtected(e)||this.setCell(e,t);else{this._combined={},this._extendedAttrs={};for(let e=0;e<this.length;++e)this.setCell(e,t)}}copyFrom(t){this.length!==t.length?this._data=new Uint32Array(t._data):this._data.set(t._data),this.length=t.length,this._combined={};for(const i in t._combined)this._combined[i]=t._combined[i];this._extendedAttrs={};for(const i in t._extendedAttrs)this._extendedAttrs[i]=t._extendedAttrs[i];this.isWrapped=t.isWrapped}clone(){const t=new v(0);t._data=new Uint32Array(this._data),t.length=this.length;for(const i in this._combined)t._combined[i]=this._combined[i];for(const i in this._extendedAttrs)t._extendedAttrs[i]=this._extendedAttrs[i];return t.isWrapped=this.isWrapped,t}getTrimmedLength(){for(let t=this.length-1;t>=0;--t)if(4194303&this._data[3*t+0])return t+(this._data[3*t+0]>>22);return 0}getNoBgTrimmedLength(){for(let t=this.length-1;t>=0;--t)if(4194303&this._data[3*t+0]||50331648&this._data[3*t+2])return t+(this._data[3*t+0]>>22);return 0}copyCellsFrom(t,i,e,r,c){const p=t._data;if(c)for(let S=r-1;S>=0;S--){for(let d=0;d<3;d++)this._data[3*(e+S)+d]=p[3*(i+S)+d];268435456&p[3*(i+S)+2]&&(this._extendedAttrs[e+S]=t._extendedAttrs[i+S])}else for(let S=0;S<r;S++){for(let d=0;d<3;d++)this._data[3*(e+S)+d]=p[3*(i+S)+d];268435456&p[3*(i+S)+2]&&(this._extendedAttrs[e+S]=t._extendedAttrs[i+S])}const g=Object.keys(t._combined);for(let S=0;S<g.length;S++){const d=parseInt(g[S],10);d>=i&&(this._combined[d-i+e]=t._combined[d])}}translateToString(t,i,e,r){i=i??0,e=e??this.length,t&&(e=Math.min(e,this.getTrimmedLength())),r&&(r.length=0);let c="";for(;i<e;){const p=this._data[3*i+0],g=2097151&p,S=2097152&p?this._combined[i]:g?(0,a.stringFromCodePoint)(g):o.WHITESPACE_CELL_CHAR;if(c+=S,r)for(let d=0;d<S.length;++d)r.push(i);i+=p>>22||1}return r&&r.push(i),c}}s.BufferLine=v},4841:(R,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.getRangeLength=void 0,s.getRangeLength=function(n,l){if(n.start.y>n.end.y)throw new Error(`Buffer range end (${n.end.x}, ${n.end.y}) cannot be before start (${n.start.x}, ${n.start.y})`);return l*(n.end.y-n.start.y)+(n.end.x-n.start.x+1)}},4634:(R,s)=>{function n(l,u,o){if(u===l.length-1)return l[u].getTrimmedLength();const a=!l[u].hasContent(o-1)&&l[u].getWidth(o-1)===1,f=l[u+1].getWidth(0)===2;return a&&f?o-1:o}Object.defineProperty(s,"__esModule",{value:!0}),s.getWrappedLineTrimmedLength=s.reflowSmallerGetNewLineLengths=s.reflowLargerApplyNewLayout=s.reflowLargerCreateNewLayout=s.reflowLargerGetLinesToRemove=void 0,s.reflowLargerGetLinesToRemove=function(l,u,o,a,f){const v=[];for(let h=0;h<l.length-1;h++){let t=h,i=l.get(++t);if(!i.isWrapped)continue;const e=[l.get(h)];for(;t<l.length&&i.isWrapped;)e.push(i),i=l.get(++t);if(a>=h&&a<t){h+=e.length-1;continue}let r=0,c=n(e,r,u),p=1,g=0;for(;p<e.length;){const d=n(e,p,u),w=d-g,L=o-c,B=Math.min(w,L);e[r].copyCellsFrom(e[p],g,c,B,!1),c+=B,c===o&&(r++,c=0),g+=B,g===d&&(p++,g=0),c===0&&r!==0&&e[r-1].getWidth(o-1)===2&&(e[r].copyCellsFrom(e[r-1],o-1,c++,1,!1),e[r-1].setCell(o-1,f))}e[r].replaceCells(c,o,f);let S=0;for(let d=e.length-1;d>0&&(d>r||e[d].getTrimmedLength()===0);d--)S++;S>0&&(v.push(h+e.length-S),v.push(S)),h+=e.length-1}return v},s.reflowLargerCreateNewLayout=function(l,u){const o=[];let a=0,f=u[a],v=0;for(let h=0;h<l.length;h++)if(f===h){const t=u[++a];l.onDeleteEmitter.fire({index:h-v,amount:t}),h+=t-1,v+=t,f=u[++a]}else o.push(h);return{layout:o,countRemoved:v}},s.reflowLargerApplyNewLayout=function(l,u){const o=[];for(let a=0;a<u.length;a++)o.push(l.get(u[a]));for(let a=0;a<o.length;a++)l.set(a,o[a]);l.length=u.length},s.reflowSmallerGetNewLineLengths=function(l,u,o){const a=[],f=l.map((i,e)=>n(l,e,u)).reduce((i,e)=>i+e);let v=0,h=0,t=0;for(;t<f;){if(f-t<o){a.push(f-t);break}v+=o;const i=n(l,h,u);v>i&&(v-=i,h++);const e=l[h].getWidth(v-1)===2;e&&v--;const r=e?o-1:o;a.push(r),t+=r}return a},s.getWrappedLineTrimmedLength=n},5295:(R,s,n)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.BufferSet=void 0;const l=n(8460),u=n(844),o=n(9092);class a extends u.Disposable{constructor(v,h){super(),this._optionsService=v,this._bufferService=h,this._onBufferActivate=this.register(new l.EventEmitter),this.onBufferActivate=this._onBufferActivate.event,this.reset(),this.register(this._optionsService.onSpecificOptionChange("scrollback",()=>this.resize(this._bufferService.cols,this._bufferService.rows))),this.register(this._optionsService.onSpecificOptionChange("tabStopWidth",()=>this.setupTabStops()))}reset(){this._normal=new o.Buffer(!0,this._optionsService,this._bufferService),this._normal.fillViewportRows(),this._alt=new o.Buffer(!1,this._optionsService,this._bufferService),this._activeBuffer=this._normal,this._onBufferActivate.fire({activeBuffer:this._normal,inactiveBuffer:this._alt}),this.setupTabStops()}get alt(){return this._alt}get active(){return this._activeBuffer}get normal(){return this._normal}activateNormalBuffer(){this._activeBuffer!==this._normal&&(this._normal.x=this._alt.x,this._normal.y=this._alt.y,this._alt.clearAllMarkers(),this._alt.clear(),this._activeBuffer=this._normal,this._onBufferActivate.fire({activeBuffer:this._normal,inactiveBuffer:this._alt}))}activateAltBuffer(v){this._activeBuffer!==this._alt&&(this._alt.fillViewportRows(v),this._alt.x=this._normal.x,this._alt.y=this._normal.y,this._activeBuffer=this._alt,this._onBufferActivate.fire({activeBuffer:this._alt,inactiveBuffer:this._normal}))}resize(v,h){this._normal.resize(v,h),this._alt.resize(v,h),this.setupTabStops(v)}setupTabStops(v){this._normal.setupTabStops(v),this._alt.setupTabStops(v)}}s.BufferSet=a},511:(R,s,n)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.CellData=void 0;const l=n(482),u=n(643),o=n(3734);class a extends o.AttributeData{constructor(){super(...arguments),this.content=0,this.fg=0,this.bg=0,this.extended=new o.ExtendedAttrs,this.combinedData=""}static fromCharData(v){const h=new a;return h.setFromCharData(v),h}isCombined(){return 2097152&this.content}getWidth(){return this.content>>22}getChars(){return 2097152&this.content?this.combinedData:2097151&this.content?(0,l.stringFromCodePoint)(2097151&this.content):""}getCode(){return this.isCombined()?this.combinedData.charCodeAt(this.combinedData.length-1):2097151&this.content}setFromCharData(v){this.fg=v[u.CHAR_DATA_ATTR_INDEX],this.bg=0;let h=!1;if(v[u.CHAR_DATA_CHAR_INDEX].length>2)h=!0;else if(v[u.CHAR_DATA_CHAR_INDEX].length===2){const t=v[u.CHAR_DATA_CHAR_INDEX].charCodeAt(0);if(55296<=t&&t<=56319){const i=v[u.CHAR_DATA_CHAR_INDEX].charCodeAt(1);56320<=i&&i<=57343?this.content=1024*(t-55296)+i-56320+65536|v[u.CHAR_DATA_WIDTH_INDEX]<<22:h=!0}else h=!0}else this.content=v[u.CHAR_DATA_CHAR_INDEX].charCodeAt(0)|v[u.CHAR_DATA_WIDTH_INDEX]<<22;h&&(this.combinedData=v[u.CHAR_DATA_CHAR_INDEX],this.content=2097152|v[u.CHAR_DATA_WIDTH_INDEX]<<22)}getAsCharData(){return[this.fg,this.getChars(),this.getWidth(),this.getCode()]}}s.CellData=a},643:(R,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.WHITESPACE_CELL_CODE=s.WHITESPACE_CELL_WIDTH=s.WHITESPACE_CELL_CHAR=s.NULL_CELL_CODE=s.NULL_CELL_WIDTH=s.NULL_CELL_CHAR=s.CHAR_DATA_CODE_INDEX=s.CHAR_DATA_WIDTH_INDEX=s.CHAR_DATA_CHAR_INDEX=s.CHAR_DATA_ATTR_INDEX=s.DEFAULT_EXT=s.DEFAULT_ATTR=s.DEFAULT_COLOR=void 0,s.DEFAULT_COLOR=0,s.DEFAULT_ATTR=256|s.DEFAULT_COLOR<<9,s.DEFAULT_EXT=0,s.CHAR_DATA_ATTR_INDEX=0,s.CHAR_DATA_CHAR_INDEX=1,s.CHAR_DATA_WIDTH_INDEX=2,s.CHAR_DATA_CODE_INDEX=3,s.NULL_CELL_CHAR="",s.NULL_CELL_WIDTH=1,s.NULL_CELL_CODE=0,s.WHITESPACE_CELL_CHAR=" ",s.WHITESPACE_CELL_WIDTH=1,s.WHITESPACE_CELL_CODE=32},4863:(R,s,n)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.Marker=void 0;const l=n(8460),u=n(844);class o{get id(){return this._id}constructor(f){this.line=f,this.isDisposed=!1,this._disposables=[],this._id=o._nextId++,this._onDispose=this.register(new l.EventEmitter),this.onDispose=this._onDispose.event}dispose(){this.isDisposed||(this.isDisposed=!0,this.line=-1,this._onDispose.fire(),(0,u.disposeArray)(this._disposables),this._disposables.length=0)}register(f){return this._disposables.push(f),f}}s.Marker=o,o._nextId=1},7116:(R,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.DEFAULT_CHARSET=s.CHARSETS=void 0,s.CHARSETS={},s.DEFAULT_CHARSET=s.CHARSETS.B,s.CHARSETS[0]={"`":"◆",a:"▒",b:"␉",c:"␌",d:"␍",e:"␊",f:"°",g:"±",h:"␤",i:"␋",j:"┘",k:"┐",l:"┌",m:"└",n:"┼",o:"⎺",p:"⎻",q:"─",r:"⎼",s:"⎽",t:"├",u:"┤",v:"┴",w:"┬",x:"│",y:"≤",z:"≥","{":"π","|":"≠","}":"£","~":"·"},s.CHARSETS.A={"#":"£"},s.CHARSETS.B=void 0,s.CHARSETS[4]={"#":"£","@":"¾","[":"ij","\\":"½","]":"|","{":"¨","|":"f","}":"¼","~":"´"},s.CHARSETS.C=s.CHARSETS[5]={"[":"Ä","\\":"Ö","]":"Å","^":"Ü","`":"é","{":"ä","|":"ö","}":"å","~":"ü"},s.CHARSETS.R={"#":"£","@":"à","[":"°","\\":"ç","]":"§","{":"é","|":"ù","}":"è","~":"¨"},s.CHARSETS.Q={"@":"à","[":"â","\\":"ç","]":"ê","^":"î","`":"ô","{":"é","|":"ù","}":"è","~":"û"},s.CHARSETS.K={"@":"§","[":"Ä","\\":"Ö","]":"Ü","{":"ä","|":"ö","}":"ü","~":"ß"},s.CHARSETS.Y={"#":"£","@":"§","[":"°","\\":"ç","]":"é","`":"ù","{":"à","|":"ò","}":"è","~":"ì"},s.CHARSETS.E=s.CHARSETS[6]={"@":"Ä","[":"Æ","\\":"Ø","]":"Å","^":"Ü","`":"ä","{":"æ","|":"ø","}":"å","~":"ü"},s.CHARSETS.Z={"#":"£","@":"§","[":"¡","\\":"Ñ","]":"¿","{":"°","|":"ñ","}":"ç"},s.CHARSETS.H=s.CHARSETS[7]={"@":"É","[":"Ä","\\":"Ö","]":"Å","^":"Ü","`":"é","{":"ä","|":"ö","}":"å","~":"ü"},s.CHARSETS["="]={"#":"ù","@":"à","[":"é","\\":"ç","]":"ê","^":"î",_:"è","`":"ô","{":"ä","|":"ö","}":"ü","~":"û"}},2584:(R,s)=>{var n,l,u;Object.defineProperty(s,"__esModule",{value:!0}),s.C1_ESCAPED=s.C1=s.C0=void 0,function(o){o.NUL="\0",o.SOH="",o.STX="",o.ETX="",o.EOT="",o.ENQ="",o.ACK="",o.BEL="\x07",o.BS="\b",o.HT="	",o.LF=`
`,o.VT="\v",o.FF="\f",o.CR="\r",o.SO="",o.SI="",o.DLE="",o.DC1="",o.DC2="",o.DC3="",o.DC4="",o.NAK="",o.SYN="",o.ETB="",o.CAN="",o.EM="",o.SUB="",o.ESC="\x1B",o.FS="",o.GS="",o.RS="",o.US="",o.SP=" ",o.DEL=""}(n||(s.C0=n={})),function(o){o.PAD="",o.HOP="",o.BPH="",o.NBH="",o.IND="",o.NEL="",o.SSA="",o.ESA="",o.HTS="",o.HTJ="",o.VTS="",o.PLD="",o.PLU="",o.RI="",o.SS2="",o.SS3="",o.DCS="",o.PU1="",o.PU2="",o.STS="",o.CCH="",o.MW="",o.SPA="",o.EPA="",o.SOS="",o.SGCI="",o.SCI="",o.CSI="",o.ST="",o.OSC="",o.PM="",o.APC=""}(l||(s.C1=l={})),function(o){o.ST=`${n.ESC}\\`}(u||(s.C1_ESCAPED=u={}))},7399:(R,s,n)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.evaluateKeyboardEvent=void 0;const l=n(2584),u={48:["0",")"],49:["1","!"],50:["2","@"],51:["3","#"],52:["4","$"],53:["5","%"],54:["6","^"],55:["7","&"],56:["8","*"],57:["9","("],186:[";",":"],187:["=","+"],188:[",","<"],189:["-","_"],190:[".",">"],191:["/","?"],192:["`","~"],219:["[","{"],220:["\\","|"],221:["]","}"],222:["'",'"']};s.evaluateKeyboardEvent=function(o,a,f,v){const h={type:0,cancel:!1,key:void 0},t=(o.shiftKey?1:0)|(o.altKey?2:0)|(o.ctrlKey?4:0)|(o.metaKey?8:0);switch(o.keyCode){case 0:o.key==="UIKeyInputUpArrow"?h.key=a?l.C0.ESC+"OA":l.C0.ESC+"[A":o.key==="UIKeyInputLeftArrow"?h.key=a?l.C0.ESC+"OD":l.C0.ESC+"[D":o.key==="UIKeyInputRightArrow"?h.key=a?l.C0.ESC+"OC":l.C0.ESC+"[C":o.key==="UIKeyInputDownArrow"&&(h.key=a?l.C0.ESC+"OB":l.C0.ESC+"[B");break;case 8:h.key=o.ctrlKey?"\b":l.C0.DEL,o.altKey&&(h.key=l.C0.ESC+h.key);break;case 9:if(o.shiftKey){h.key=l.C0.ESC+"[Z";break}h.key=l.C0.HT,h.cancel=!0;break;case 13:h.key=o.altKey?l.C0.ESC+l.C0.CR:l.C0.CR,h.cancel=!0;break;case 27:h.key=l.C0.ESC,o.altKey&&(h.key=l.C0.ESC+l.C0.ESC),h.cancel=!0;break;case 37:if(o.metaKey)break;t?(h.key=l.C0.ESC+"[1;"+(t+1)+"D",h.key===l.C0.ESC+"[1;3D"&&(h.key=l.C0.ESC+(f?"b":"[1;5D"))):h.key=a?l.C0.ESC+"OD":l.C0.ESC+"[D";break;case 39:if(o.metaKey)break;t?(h.key=l.C0.ESC+"[1;"+(t+1)+"C",h.key===l.C0.ESC+"[1;3C"&&(h.key=l.C0.ESC+(f?"f":"[1;5C"))):h.key=a?l.C0.ESC+"OC":l.C0.ESC+"[C";break;case 38:if(o.metaKey)break;t?(h.key=l.C0.ESC+"[1;"+(t+1)+"A",f||h.key!==l.C0.ESC+"[1;3A"||(h.key=l.C0.ESC+"[1;5A")):h.key=a?l.C0.ESC+"OA":l.C0.ESC+"[A";break;case 40:if(o.metaKey)break;t?(h.key=l.C0.ESC+"[1;"+(t+1)+"B",f||h.key!==l.C0.ESC+"[1;3B"||(h.key=l.C0.ESC+"[1;5B")):h.key=a?l.C0.ESC+"OB":l.C0.ESC+"[B";break;case 45:o.shiftKey||o.ctrlKey||(h.key=l.C0.ESC+"[2~");break;case 46:h.key=t?l.C0.ESC+"[3;"+(t+1)+"~":l.C0.ESC+"[3~";break;case 36:h.key=t?l.C0.ESC+"[1;"+(t+1)+"H":a?l.C0.ESC+"OH":l.C0.ESC+"[H";break;case 35:h.key=t?l.C0.ESC+"[1;"+(t+1)+"F":a?l.C0.ESC+"OF":l.C0.ESC+"[F";break;case 33:o.shiftKey?h.type=2:o.ctrlKey?h.key=l.C0.ESC+"[5;"+(t+1)+"~":h.key=l.C0.ESC+"[5~";break;case 34:o.shiftKey?h.type=3:o.ctrlKey?h.key=l.C0.ESC+"[6;"+(t+1)+"~":h.key=l.C0.ESC+"[6~";break;case 112:h.key=t?l.C0.ESC+"[1;"+(t+1)+"P":l.C0.ESC+"OP";break;case 113:h.key=t?l.C0.ESC+"[1;"+(t+1)+"Q":l.C0.ESC+"OQ";break;case 114:h.key=t?l.C0.ESC+"[1;"+(t+1)+"R":l.C0.ESC+"OR";break;case 115:h.key=t?l.C0.ESC+"[1;"+(t+1)+"S":l.C0.ESC+"OS";break;case 116:h.key=t?l.C0.ESC+"[15;"+(t+1)+"~":l.C0.ESC+"[15~";break;case 117:h.key=t?l.C0.ESC+"[17;"+(t+1)+"~":l.C0.ESC+"[17~";break;case 118:h.key=t?l.C0.ESC+"[18;"+(t+1)+"~":l.C0.ESC+"[18~";break;case 119:h.key=t?l.C0.ESC+"[19;"+(t+1)+"~":l.C0.ESC+"[19~";break;case 120:h.key=t?l.C0.ESC+"[20;"+(t+1)+"~":l.C0.ESC+"[20~";break;case 121:h.key=t?l.C0.ESC+"[21;"+(t+1)+"~":l.C0.ESC+"[21~";break;case 122:h.key=t?l.C0.ESC+"[23;"+(t+1)+"~":l.C0.ESC+"[23~";break;case 123:h.key=t?l.C0.ESC+"[24;"+(t+1)+"~":l.C0.ESC+"[24~";break;default:if(!o.ctrlKey||o.shiftKey||o.altKey||o.metaKey)if(f&&!v||!o.altKey||o.metaKey)!f||o.altKey||o.ctrlKey||o.shiftKey||!o.metaKey?o.key&&!o.ctrlKey&&!o.altKey&&!o.metaKey&&o.keyCode>=48&&o.key.length===1?h.key=o.key:o.key&&o.ctrlKey&&(o.key==="_"&&(h.key=l.C0.US),o.key==="@"&&(h.key=l.C0.NUL)):o.keyCode===65&&(h.type=1);else{const i=u[o.keyCode],e=i?.[o.shiftKey?1:0];if(e)h.key=l.C0.ESC+e;else if(o.keyCode>=65&&o.keyCode<=90){const r=o.ctrlKey?o.keyCode-64:o.keyCode+32;let c=String.fromCharCode(r);o.shiftKey&&(c=c.toUpperCase()),h.key=l.C0.ESC+c}else if(o.keyCode===32)h.key=l.C0.ESC+(o.ctrlKey?l.C0.NUL:" ");else if(o.key==="Dead"&&o.code.startsWith("Key")){let r=o.code.slice(3,4);o.shiftKey||(r=r.toLowerCase()),h.key=l.C0.ESC+r,h.cancel=!0}}else o.keyCode>=65&&o.keyCode<=90?h.key=String.fromCharCode(o.keyCode-64):o.keyCode===32?h.key=l.C0.NUL:o.keyCode>=51&&o.keyCode<=55?h.key=String.fromCharCode(o.keyCode-51+27):o.keyCode===56?h.key=l.C0.DEL:o.keyCode===219?h.key=l.C0.ESC:o.keyCode===220?h.key=l.C0.FS:o.keyCode===221&&(h.key=l.C0.GS)}return h}},482:(R,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.Utf8ToUtf32=s.StringToUtf32=s.utf32ToString=s.stringFromCodePoint=void 0,s.stringFromCodePoint=function(n){return n>65535?(n-=65536,String.fromCharCode(55296+(n>>10))+String.fromCharCode(n%1024+56320)):String.fromCharCode(n)},s.utf32ToString=function(n,l=0,u=n.length){let o="";for(let a=l;a<u;++a){let f=n[a];f>65535?(f-=65536,o+=String.fromCharCode(55296+(f>>10))+String.fromCharCode(f%1024+56320)):o+=String.fromCharCode(f)}return o},s.StringToUtf32=class{constructor(){this._interim=0}clear(){this._interim=0}decode(n,l){const u=n.length;if(!u)return 0;let o=0,a=0;if(this._interim){const f=n.charCodeAt(a++);56320<=f&&f<=57343?l[o++]=1024*(this._interim-55296)+f-56320+65536:(l[o++]=this._interim,l[o++]=f),this._interim=0}for(let f=a;f<u;++f){const v=n.charCodeAt(f);if(55296<=v&&v<=56319){if(++f>=u)return this._interim=v,o;const h=n.charCodeAt(f);56320<=h&&h<=57343?l[o++]=1024*(v-55296)+h-56320+65536:(l[o++]=v,l[o++]=h)}else v!==65279&&(l[o++]=v)}return o}},s.Utf8ToUtf32=class{constructor(){this.interim=new Uint8Array(3)}clear(){this.interim.fill(0)}decode(n,l){const u=n.length;if(!u)return 0;let o,a,f,v,h=0,t=0,i=0;if(this.interim[0]){let c=!1,p=this.interim[0];p&=(224&p)==192?31:(240&p)==224?15:7;let g,S=0;for(;(g=63&this.interim[++S])&&S<4;)p<<=6,p|=g;const d=(224&this.interim[0])==192?2:(240&this.interim[0])==224?3:4,w=d-S;for(;i<w;){if(i>=u)return 0;if(g=n[i++],(192&g)!=128){i--,c=!0;break}this.interim[S++]=g,p<<=6,p|=63&g}c||(d===2?p<128?i--:l[h++]=p:d===3?p<2048||p>=55296&&p<=57343||p===65279||(l[h++]=p):p<65536||p>1114111||(l[h++]=p)),this.interim.fill(0)}const e=u-4;let r=i;for(;r<u;){for(;!(!(r<e)||128&(o=n[r])||128&(a=n[r+1])||128&(f=n[r+2])||128&(v=n[r+3]));)l[h++]=o,l[h++]=a,l[h++]=f,l[h++]=v,r+=4;if(o=n[r++],o<128)l[h++]=o;else if((224&o)==192){if(r>=u)return this.interim[0]=o,h;if(a=n[r++],(192&a)!=128){r--;continue}if(t=(31&o)<<6|63&a,t<128){r--;continue}l[h++]=t}else if((240&o)==224){if(r>=u)return this.interim[0]=o,h;if(a=n[r++],(192&a)!=128){r--;continue}if(r>=u)return this.interim[0]=o,this.interim[1]=a,h;if(f=n[r++],(192&f)!=128){r--;continue}if(t=(15&o)<<12|(63&a)<<6|63&f,t<2048||t>=55296&&t<=57343||t===65279)continue;l[h++]=t}else if((248&o)==240){if(r>=u)return this.interim[0]=o,h;if(a=n[r++],(192&a)!=128){r--;continue}if(r>=u)return this.interim[0]=o,this.interim[1]=a,h;if(f=n[r++],(192&f)!=128){r--;continue}if(r>=u)return this.interim[0]=o,this.interim[1]=a,this.interim[2]=f,h;if(v=n[r++],(192&v)!=128){r--;continue}if(t=(7&o)<<18|(63&a)<<12|(63&f)<<6|63&v,t<65536||t>1114111)continue;l[h++]=t}}return h}}},225:(R,s,n)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.UnicodeV6=void 0;const l=n(1480),u=[[768,879],[1155,1158],[1160,1161],[1425,1469],[1471,1471],[1473,1474],[1476,1477],[1479,1479],[1536,1539],[1552,1557],[1611,1630],[1648,1648],[1750,1764],[1767,1768],[1770,1773],[1807,1807],[1809,1809],[1840,1866],[1958,1968],[2027,2035],[2305,2306],[2364,2364],[2369,2376],[2381,2381],[2385,2388],[2402,2403],[2433,2433],[2492,2492],[2497,2500],[2509,2509],[2530,2531],[2561,2562],[2620,2620],[2625,2626],[2631,2632],[2635,2637],[2672,2673],[2689,2690],[2748,2748],[2753,2757],[2759,2760],[2765,2765],[2786,2787],[2817,2817],[2876,2876],[2879,2879],[2881,2883],[2893,2893],[2902,2902],[2946,2946],[3008,3008],[3021,3021],[3134,3136],[3142,3144],[3146,3149],[3157,3158],[3260,3260],[3263,3263],[3270,3270],[3276,3277],[3298,3299],[3393,3395],[3405,3405],[3530,3530],[3538,3540],[3542,3542],[3633,3633],[3636,3642],[3655,3662],[3761,3761],[3764,3769],[3771,3772],[3784,3789],[3864,3865],[3893,3893],[3895,3895],[3897,3897],[3953,3966],[3968,3972],[3974,3975],[3984,3991],[3993,4028],[4038,4038],[4141,4144],[4146,4146],[4150,4151],[4153,4153],[4184,4185],[4448,4607],[4959,4959],[5906,5908],[5938,5940],[5970,5971],[6002,6003],[6068,6069],[6071,6077],[6086,6086],[6089,6099],[6109,6109],[6155,6157],[6313,6313],[6432,6434],[6439,6440],[6450,6450],[6457,6459],[6679,6680],[6912,6915],[6964,6964],[6966,6970],[6972,6972],[6978,6978],[7019,7027],[7616,7626],[7678,7679],[8203,8207],[8234,8238],[8288,8291],[8298,8303],[8400,8431],[12330,12335],[12441,12442],[43014,43014],[43019,43019],[43045,43046],[64286,64286],[65024,65039],[65056,65059],[65279,65279],[65529,65531]],o=[[68097,68099],[68101,68102],[68108,68111],[68152,68154],[68159,68159],[119143,119145],[119155,119170],[119173,119179],[119210,119213],[119362,119364],[917505,917505],[917536,917631],[917760,917999]];let a;s.UnicodeV6=class{constructor(){if(this.version="6",!a){a=new Uint8Array(65536),a.fill(1),a[0]=0,a.fill(0,1,32),a.fill(0,127,160),a.fill(2,4352,4448),a[9001]=2,a[9002]=2,a.fill(2,11904,42192),a[12351]=1,a.fill(2,44032,55204),a.fill(2,63744,64256),a.fill(2,65040,65050),a.fill(2,65072,65136),a.fill(2,65280,65377),a.fill(2,65504,65511);for(let f=0;f<u.length;++f)a.fill(0,u[f][0],u[f][1]+1)}}wcwidth(f){return f<32?0:f<127?1:f<65536?a[f]:function(v,h){let t,i=0,e=h.length-1;if(v<h[0][0]||v>h[e][1])return!1;for(;e>=i;)if(t=i+e>>1,v>h[t][1])i=t+1;else{if(!(v<h[t][0]))return!0;e=t-1}return!1}(f,o)?0:f>=131072&&f<=196605||f>=196608&&f<=262141?2:1}charProperties(f,v){let h=this.wcwidth(f),t=h===0&&v!==0;if(t){const i=l.UnicodeService.extractWidth(v);i===0?t=!1:i>h&&(h=i)}return l.UnicodeService.createPropertyValue(0,h,t)}}},5981:(R,s,n)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.WriteBuffer=void 0;const l=n(8460),u=n(844);class o extends u.Disposable{constructor(f){super(),this._action=f,this._writeBuffer=[],this._callbacks=[],this._pendingData=0,this._bufferOffset=0,this._isSyncWriting=!1,this._syncCalls=0,this._didUserInput=!1,this._onWriteParsed=this.register(new l.EventEmitter),this.onWriteParsed=this._onWriteParsed.event}handleUserInput(){this._didUserInput=!0}writeSync(f,v){if(v!==void 0&&this._syncCalls>v)return void(this._syncCalls=0);if(this._pendingData+=f.length,this._writeBuffer.push(f),this._callbacks.push(void 0),this._syncCalls++,this._isSyncWriting)return;let h;for(this._isSyncWriting=!0;h=this._writeBuffer.shift();){this._action(h);const t=this._callbacks.shift();t&&t()}this._pendingData=0,this._bufferOffset=2147483647,this._isSyncWriting=!1,this._syncCalls=0}write(f,v){if(this._pendingData>5e7)throw new Error("write data discarded, use flow control to avoid losing data");if(!this._writeBuffer.length){if(this._bufferOffset=0,this._didUserInput)return this._didUserInput=!1,this._pendingData+=f.length,this._writeBuffer.push(f),this._callbacks.push(v),void this._innerWrite();setTimeout(()=>this._innerWrite())}this._pendingData+=f.length,this._writeBuffer.push(f),this._callbacks.push(v)}_innerWrite(f=0,v=!0){const h=f||Date.now();for(;this._writeBuffer.length>this._bufferOffset;){const t=this._writeBuffer[this._bufferOffset],i=this._action(t,v);if(i){const r=c=>Date.now()-h>=12?setTimeout(()=>this._innerWrite(0,c)):this._innerWrite(h,c);return void i.catch(c=>(queueMicrotask(()=>{throw c}),Promise.resolve(!1))).then(r)}const e=this._callbacks[this._bufferOffset];if(e&&e(),this._bufferOffset++,this._pendingData-=t.length,Date.now()-h>=12)break}this._writeBuffer.length>this._bufferOffset?(this._bufferOffset>50&&(this._writeBuffer=this._writeBuffer.slice(this._bufferOffset),this._callbacks=this._callbacks.slice(this._bufferOffset),this._bufferOffset=0),setTimeout(()=>this._innerWrite())):(this._writeBuffer.length=0,this._callbacks.length=0,this._pendingData=0,this._bufferOffset=0),this._onWriteParsed.fire()}}s.WriteBuffer=o},5941:(R,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.toRgbString=s.parseColor=void 0;const n=/^([\da-f])\/([\da-f])\/([\da-f])$|^([\da-f]{2})\/([\da-f]{2})\/([\da-f]{2})$|^([\da-f]{3})\/([\da-f]{3})\/([\da-f]{3})$|^([\da-f]{4})\/([\da-f]{4})\/([\da-f]{4})$/,l=/^[\da-f]+$/;function u(o,a){const f=o.toString(16),v=f.length<2?"0"+f:f;switch(a){case 4:return f[0];case 8:return v;case 12:return(v+v).slice(0,3);default:return v+v}}s.parseColor=function(o){if(!o)return;let a=o.toLowerCase();if(a.indexOf("rgb:")===0){a=a.slice(4);const f=n.exec(a);if(f){const v=f[1]?15:f[4]?255:f[7]?4095:65535;return[Math.round(parseInt(f[1]||f[4]||f[7]||f[10],16)/v*255),Math.round(parseInt(f[2]||f[5]||f[8]||f[11],16)/v*255),Math.round(parseInt(f[3]||f[6]||f[9]||f[12],16)/v*255)]}}else if(a.indexOf("#")===0&&(a=a.slice(1),l.exec(a)&&[3,6,9,12].includes(a.length))){const f=a.length/3,v=[0,0,0];for(let h=0;h<3;++h){const t=parseInt(a.slice(f*h,f*h+f),16);v[h]=f===1?t<<4:f===2?t:f===3?t>>4:t>>8}return v}},s.toRgbString=function(o,a=16){const[f,v,h]=o;return`rgb:${u(f,a)}/${u(v,a)}/${u(h,a)}`}},5770:(R,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.PAYLOAD_LIMIT=void 0,s.PAYLOAD_LIMIT=1e7},6351:(R,s,n)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.DcsHandler=s.DcsParser=void 0;const l=n(482),u=n(8742),o=n(5770),a=[];s.DcsParser=class{constructor(){this._handlers=Object.create(null),this._active=a,this._ident=0,this._handlerFb=()=>{},this._stack={paused:!1,loopPosition:0,fallThrough:!1}}dispose(){this._handlers=Object.create(null),this._handlerFb=()=>{},this._active=a}registerHandler(v,h){this._handlers[v]===void 0&&(this._handlers[v]=[]);const t=this._handlers[v];return t.push(h),{dispose:()=>{const i=t.indexOf(h);i!==-1&&t.splice(i,1)}}}clearHandler(v){this._handlers[v]&&delete this._handlers[v]}setHandlerFallback(v){this._handlerFb=v}reset(){if(this._active.length)for(let v=this._stack.paused?this._stack.loopPosition-1:this._active.length-1;v>=0;--v)this._active[v].unhook(!1);this._stack.paused=!1,this._active=a,this._ident=0}hook(v,h){if(this.reset(),this._ident=v,this._active=this._handlers[v]||a,this._active.length)for(let t=this._active.length-1;t>=0;t--)this._active[t].hook(h);else this._handlerFb(this._ident,"HOOK",h)}put(v,h,t){if(this._active.length)for(let i=this._active.length-1;i>=0;i--)this._active[i].put(v,h,t);else this._handlerFb(this._ident,"PUT",(0,l.utf32ToString)(v,h,t))}unhook(v,h=!0){if(this._active.length){let t=!1,i=this._active.length-1,e=!1;if(this._stack.paused&&(i=this._stack.loopPosition-1,t=h,e=this._stack.fallThrough,this._stack.paused=!1),!e&&t===!1){for(;i>=0&&(t=this._active[i].unhook(v),t!==!0);i--)if(t instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=i,this._stack.fallThrough=!1,t;i--}for(;i>=0;i--)if(t=this._active[i].unhook(!1),t instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=i,this._stack.fallThrough=!0,t}else this._handlerFb(this._ident,"UNHOOK",v);this._active=a,this._ident=0}};const f=new u.Params;f.addParam(0),s.DcsHandler=class{constructor(v){this._handler=v,this._data="",this._params=f,this._hitLimit=!1}hook(v){this._params=v.length>1||v.params[0]?v.clone():f,this._data="",this._hitLimit=!1}put(v,h,t){this._hitLimit||(this._data+=(0,l.utf32ToString)(v,h,t),this._data.length>o.PAYLOAD_LIMIT&&(this._data="",this._hitLimit=!0))}unhook(v){let h=!1;if(this._hitLimit)h=!1;else if(v&&(h=this._handler(this._data,this._params),h instanceof Promise))return h.then(t=>(this._params=f,this._data="",this._hitLimit=!1,t));return this._params=f,this._data="",this._hitLimit=!1,h}}},2015:(R,s,n)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.EscapeSequenceParser=s.VT500_TRANSITION_TABLE=s.TransitionTable=void 0;const l=n(844),u=n(8742),o=n(6242),a=n(6351);class f{constructor(i){this.table=new Uint8Array(i)}setDefault(i,e){this.table.fill(i<<4|e)}add(i,e,r,c){this.table[e<<8|i]=r<<4|c}addMany(i,e,r,c){for(let p=0;p<i.length;p++)this.table[e<<8|i[p]]=r<<4|c}}s.TransitionTable=f;const v=160;s.VT500_TRANSITION_TABLE=function(){const t=new f(4095),i=Array.apply(null,Array(256)).map((S,d)=>d),e=(S,d)=>i.slice(S,d),r=e(32,127),c=e(0,24);c.push(25),c.push.apply(c,e(28,32));const p=e(0,14);let g;for(g in t.setDefault(1,0),t.addMany(r,0,2,0),p)t.addMany([24,26,153,154],g,3,0),t.addMany(e(128,144),g,3,0),t.addMany(e(144,152),g,3,0),t.add(156,g,0,0),t.add(27,g,11,1),t.add(157,g,4,8),t.addMany([152,158,159],g,0,7),t.add(155,g,11,3),t.add(144,g,11,9);return t.addMany(c,0,3,0),t.addMany(c,1,3,1),t.add(127,1,0,1),t.addMany(c,8,0,8),t.addMany(c,3,3,3),t.add(127,3,0,3),t.addMany(c,4,3,4),t.add(127,4,0,4),t.addMany(c,6,3,6),t.addMany(c,5,3,5),t.add(127,5,0,5),t.addMany(c,2,3,2),t.add(127,2,0,2),t.add(93,1,4,8),t.addMany(r,8,5,8),t.add(127,8,5,8),t.addMany([156,27,24,26,7],8,6,0),t.addMany(e(28,32),8,0,8),t.addMany([88,94,95],1,0,7),t.addMany(r,7,0,7),t.addMany(c,7,0,7),t.add(156,7,0,0),t.add(127,7,0,7),t.add(91,1,11,3),t.addMany(e(64,127),3,7,0),t.addMany(e(48,60),3,8,4),t.addMany([60,61,62,63],3,9,4),t.addMany(e(48,60),4,8,4),t.addMany(e(64,127),4,7,0),t.addMany([60,61,62,63],4,0,6),t.addMany(e(32,64),6,0,6),t.add(127,6,0,6),t.addMany(e(64,127),6,0,0),t.addMany(e(32,48),3,9,5),t.addMany(e(32,48),5,9,5),t.addMany(e(48,64),5,0,6),t.addMany(e(64,127),5,7,0),t.addMany(e(32,48),4,9,5),t.addMany(e(32,48),1,9,2),t.addMany(e(32,48),2,9,2),t.addMany(e(48,127),2,10,0),t.addMany(e(48,80),1,10,0),t.addMany(e(81,88),1,10,0),t.addMany([89,90,92],1,10,0),t.addMany(e(96,127),1,10,0),t.add(80,1,11,9),t.addMany(c,9,0,9),t.add(127,9,0,9),t.addMany(e(28,32),9,0,9),t.addMany(e(32,48),9,9,12),t.addMany(e(48,60),9,8,10),t.addMany([60,61,62,63],9,9,10),t.addMany(c,11,0,11),t.addMany(e(32,128),11,0,11),t.addMany(e(28,32),11,0,11),t.addMany(c,10,0,10),t.add(127,10,0,10),t.addMany(e(28,32),10,0,10),t.addMany(e(48,60),10,8,10),t.addMany([60,61,62,63],10,0,11),t.addMany(e(32,48),10,9,12),t.addMany(c,12,0,12),t.add(127,12,0,12),t.addMany(e(28,32),12,0,12),t.addMany(e(32,48),12,9,12),t.addMany(e(48,64),12,0,11),t.addMany(e(64,127),12,12,13),t.addMany(e(64,127),10,12,13),t.addMany(e(64,127),9,12,13),t.addMany(c,13,13,13),t.addMany(r,13,13,13),t.add(127,13,0,13),t.addMany([27,156,24,26],13,14,0),t.add(v,0,2,0),t.add(v,8,5,8),t.add(v,6,0,6),t.add(v,11,0,11),t.add(v,13,13,13),t}();class h extends l.Disposable{constructor(i=s.VT500_TRANSITION_TABLE){super(),this._transitions=i,this._parseStack={state:0,handlers:[],handlerPos:0,transition:0,chunkPos:0},this.initialState=0,this.currentState=this.initialState,this._params=new u.Params,this._params.addParam(0),this._collect=0,this.precedingJoinState=0,this._printHandlerFb=(e,r,c)=>{},this._executeHandlerFb=e=>{},this._csiHandlerFb=(e,r)=>{},this._escHandlerFb=e=>{},this._errorHandlerFb=e=>e,this._printHandler=this._printHandlerFb,this._executeHandlers=Object.create(null),this._csiHandlers=Object.create(null),this._escHandlers=Object.create(null),this.register((0,l.toDisposable)(()=>{this._csiHandlers=Object.create(null),this._executeHandlers=Object.create(null),this._escHandlers=Object.create(null)})),this._oscParser=this.register(new o.OscParser),this._dcsParser=this.register(new a.DcsParser),this._errorHandler=this._errorHandlerFb,this.registerEscHandler({final:"\\"},()=>!0)}_identifier(i,e=[64,126]){let r=0;if(i.prefix){if(i.prefix.length>1)throw new Error("only one byte as prefix supported");if(r=i.prefix.charCodeAt(0),r&&60>r||r>63)throw new Error("prefix must be in range 0x3c .. 0x3f")}if(i.intermediates){if(i.intermediates.length>2)throw new Error("only two bytes as intermediates are supported");for(let p=0;p<i.intermediates.length;++p){const g=i.intermediates.charCodeAt(p);if(32>g||g>47)throw new Error("intermediate must be in range 0x20 .. 0x2f");r<<=8,r|=g}}if(i.final.length!==1)throw new Error("final must be a single byte");const c=i.final.charCodeAt(0);if(e[0]>c||c>e[1])throw new Error(`final must be in range ${e[0]} .. ${e[1]}`);return r<<=8,r|=c,r}identToString(i){const e=[];for(;i;)e.push(String.fromCharCode(255&i)),i>>=8;return e.reverse().join("")}setPrintHandler(i){this._printHandler=i}clearPrintHandler(){this._printHandler=this._printHandlerFb}registerEscHandler(i,e){const r=this._identifier(i,[48,126]);this._escHandlers[r]===void 0&&(this._escHandlers[r]=[]);const c=this._escHandlers[r];return c.push(e),{dispose:()=>{const p=c.indexOf(e);p!==-1&&c.splice(p,1)}}}clearEscHandler(i){this._escHandlers[this._identifier(i,[48,126])]&&delete this._escHandlers[this._identifier(i,[48,126])]}setEscHandlerFallback(i){this._escHandlerFb=i}setExecuteHandler(i,e){this._executeHandlers[i.charCodeAt(0)]=e}clearExecuteHandler(i){this._executeHandlers[i.charCodeAt(0)]&&delete this._executeHandlers[i.charCodeAt(0)]}setExecuteHandlerFallback(i){this._executeHandlerFb=i}registerCsiHandler(i,e){const r=this._identifier(i);this._csiHandlers[r]===void 0&&(this._csiHandlers[r]=[]);const c=this._csiHandlers[r];return c.push(e),{dispose:()=>{const p=c.indexOf(e);p!==-1&&c.splice(p,1)}}}clearCsiHandler(i){this._csiHandlers[this._identifier(i)]&&delete this._csiHandlers[this._identifier(i)]}setCsiHandlerFallback(i){this._csiHandlerFb=i}registerDcsHandler(i,e){return this._dcsParser.registerHandler(this._identifier(i),e)}clearDcsHandler(i){this._dcsParser.clearHandler(this._identifier(i))}setDcsHandlerFallback(i){this._dcsParser.setHandlerFallback(i)}registerOscHandler(i,e){return this._oscParser.registerHandler(i,e)}clearOscHandler(i){this._oscParser.clearHandler(i)}setOscHandlerFallback(i){this._oscParser.setHandlerFallback(i)}setErrorHandler(i){this._errorHandler=i}clearErrorHandler(){this._errorHandler=this._errorHandlerFb}reset(){this.currentState=this.initialState,this._oscParser.reset(),this._dcsParser.reset(),this._params.reset(),this._params.addParam(0),this._collect=0,this.precedingJoinState=0,this._parseStack.state!==0&&(this._parseStack.state=2,this._parseStack.handlers=[])}_preserveStack(i,e,r,c,p){this._parseStack.state=i,this._parseStack.handlers=e,this._parseStack.handlerPos=r,this._parseStack.transition=c,this._parseStack.chunkPos=p}parse(i,e,r){let c,p=0,g=0,S=0;if(this._parseStack.state)if(this._parseStack.state===2)this._parseStack.state=0,S=this._parseStack.chunkPos+1;else{if(r===void 0||this._parseStack.state===1)throw this._parseStack.state=1,new Error("improper continuation due to previous async handler, giving up parsing");const d=this._parseStack.handlers;let w=this._parseStack.handlerPos-1;switch(this._parseStack.state){case 3:if(r===!1&&w>-1){for(;w>=0&&(c=d[w](this._params),c!==!0);w--)if(c instanceof Promise)return this._parseStack.handlerPos=w,c}this._parseStack.handlers=[];break;case 4:if(r===!1&&w>-1){for(;w>=0&&(c=d[w](),c!==!0);w--)if(c instanceof Promise)return this._parseStack.handlerPos=w,c}this._parseStack.handlers=[];break;case 6:if(p=i[this._parseStack.chunkPos],c=this._dcsParser.unhook(p!==24&&p!==26,r),c)return c;p===27&&(this._parseStack.transition|=1),this._params.reset(),this._params.addParam(0),this._collect=0;break;case 5:if(p=i[this._parseStack.chunkPos],c=this._oscParser.end(p!==24&&p!==26,r),c)return c;p===27&&(this._parseStack.transition|=1),this._params.reset(),this._params.addParam(0),this._collect=0}this._parseStack.state=0,S=this._parseStack.chunkPos+1,this.precedingJoinState=0,this.currentState=15&this._parseStack.transition}for(let d=S;d<e;++d){switch(p=i[d],g=this._transitions.table[this.currentState<<8|(p<160?p:v)],g>>4){case 2:for(let k=d+1;;++k){if(k>=e||(p=i[k])<32||p>126&&p<v){this._printHandler(i,d,k),d=k-1;break}if(++k>=e||(p=i[k])<32||p>126&&p<v){this._printHandler(i,d,k),d=k-1;break}if(++k>=e||(p=i[k])<32||p>126&&p<v){this._printHandler(i,d,k),d=k-1;break}if(++k>=e||(p=i[k])<32||p>126&&p<v){this._printHandler(i,d,k),d=k-1;break}}break;case 3:this._executeHandlers[p]?this._executeHandlers[p]():this._executeHandlerFb(p),this.precedingJoinState=0;break;case 0:break;case 1:if(this._errorHandler({position:d,code:p,currentState:this.currentState,collect:this._collect,params:this._params,abort:!1}).abort)return;break;case 7:const w=this._csiHandlers[this._collect<<8|p];let L=w?w.length-1:-1;for(;L>=0&&(c=w[L](this._params),c!==!0);L--)if(c instanceof Promise)return this._preserveStack(3,w,L,g,d),c;L<0&&this._csiHandlerFb(this._collect<<8|p,this._params),this.precedingJoinState=0;break;case 8:do switch(p){case 59:this._params.addParam(0);break;case 58:this._params.addSubParam(-1);break;default:this._params.addDigit(p-48)}while(++d<e&&(p=i[d])>47&&p<60);d--;break;case 9:this._collect<<=8,this._collect|=p;break;case 10:const B=this._escHandlers[this._collect<<8|p];let A=B?B.length-1:-1;for(;A>=0&&(c=B[A](),c!==!0);A--)if(c instanceof Promise)return this._preserveStack(4,B,A,g,d),c;A<0&&this._escHandlerFb(this._collect<<8|p),this.precedingJoinState=0;break;case 11:this._params.reset(),this._params.addParam(0),this._collect=0;break;case 12:this._dcsParser.hook(this._collect<<8|p,this._params);break;case 13:for(let k=d+1;;++k)if(k>=e||(p=i[k])===24||p===26||p===27||p>127&&p<v){this._dcsParser.put(i,d,k),d=k-1;break}break;case 14:if(c=this._dcsParser.unhook(p!==24&&p!==26),c)return this._preserveStack(6,[],0,g,d),c;p===27&&(g|=1),this._params.reset(),this._params.addParam(0),this._collect=0,this.precedingJoinState=0;break;case 4:this._oscParser.start();break;case 5:for(let k=d+1;;k++)if(k>=e||(p=i[k])<32||p>127&&p<v){this._oscParser.put(i,d,k),d=k-1;break}break;case 6:if(c=this._oscParser.end(p!==24&&p!==26),c)return this._preserveStack(5,[],0,g,d),c;p===27&&(g|=1),this._params.reset(),this._params.addParam(0),this._collect=0,this.precedingJoinState=0}this.currentState=15&g}}}s.EscapeSequenceParser=h},6242:(R,s,n)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.OscHandler=s.OscParser=void 0;const l=n(5770),u=n(482),o=[];s.OscParser=class{constructor(){this._state=0,this._active=o,this._id=-1,this._handlers=Object.create(null),this._handlerFb=()=>{},this._stack={paused:!1,loopPosition:0,fallThrough:!1}}registerHandler(a,f){this._handlers[a]===void 0&&(this._handlers[a]=[]);const v=this._handlers[a];return v.push(f),{dispose:()=>{const h=v.indexOf(f);h!==-1&&v.splice(h,1)}}}clearHandler(a){this._handlers[a]&&delete this._handlers[a]}setHandlerFallback(a){this._handlerFb=a}dispose(){this._handlers=Object.create(null),this._handlerFb=()=>{},this._active=o}reset(){if(this._state===2)for(let a=this._stack.paused?this._stack.loopPosition-1:this._active.length-1;a>=0;--a)this._active[a].end(!1);this._stack.paused=!1,this._active=o,this._id=-1,this._state=0}_start(){if(this._active=this._handlers[this._id]||o,this._active.length)for(let a=this._active.length-1;a>=0;a--)this._active[a].start();else this._handlerFb(this._id,"START")}_put(a,f,v){if(this._active.length)for(let h=this._active.length-1;h>=0;h--)this._active[h].put(a,f,v);else this._handlerFb(this._id,"PUT",(0,u.utf32ToString)(a,f,v))}start(){this.reset(),this._state=1}put(a,f,v){if(this._state!==3){if(this._state===1)for(;f<v;){const h=a[f++];if(h===59){this._state=2,this._start();break}if(h<48||57<h)return void(this._state=3);this._id===-1&&(this._id=0),this._id=10*this._id+h-48}this._state===2&&v-f>0&&this._put(a,f,v)}}end(a,f=!0){if(this._state!==0){if(this._state!==3)if(this._state===1&&this._start(),this._active.length){let v=!1,h=this._active.length-1,t=!1;if(this._stack.paused&&(h=this._stack.loopPosition-1,v=f,t=this._stack.fallThrough,this._stack.paused=!1),!t&&v===!1){for(;h>=0&&(v=this._active[h].end(a),v!==!0);h--)if(v instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=h,this._stack.fallThrough=!1,v;h--}for(;h>=0;h--)if(v=this._active[h].end(!1),v instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=h,this._stack.fallThrough=!0,v}else this._handlerFb(this._id,"END",a);this._active=o,this._id=-1,this._state=0}}},s.OscHandler=class{constructor(a){this._handler=a,this._data="",this._hitLimit=!1}start(){this._data="",this._hitLimit=!1}put(a,f,v){this._hitLimit||(this._data+=(0,u.utf32ToString)(a,f,v),this._data.length>l.PAYLOAD_LIMIT&&(this._data="",this._hitLimit=!0))}end(a){let f=!1;if(this._hitLimit)f=!1;else if(a&&(f=this._handler(this._data),f instanceof Promise))return f.then(v=>(this._data="",this._hitLimit=!1,v));return this._data="",this._hitLimit=!1,f}}},8742:(R,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.Params=void 0;const n=2147483647;class l{static fromArray(o){const a=new l;if(!o.length)return a;for(let f=Array.isArray(o[0])?1:0;f<o.length;++f){const v=o[f];if(Array.isArray(v))for(let h=0;h<v.length;++h)a.addSubParam(v[h]);else a.addParam(v)}return a}constructor(o=32,a=32){if(this.maxLength=o,this.maxSubParamsLength=a,a>256)throw new Error("maxSubParamsLength must not be greater than 256");this.params=new Int32Array(o),this.length=0,this._subParams=new Int32Array(a),this._subParamsLength=0,this._subParamsIdx=new Uint16Array(o),this._rejectDigits=!1,this._rejectSubDigits=!1,this._digitIsSub=!1}clone(){const o=new l(this.maxLength,this.maxSubParamsLength);return o.params.set(this.params),o.length=this.length,o._subParams.set(this._subParams),o._subParamsLength=this._subParamsLength,o._subParamsIdx.set(this._subParamsIdx),o._rejectDigits=this._rejectDigits,o._rejectSubDigits=this._rejectSubDigits,o._digitIsSub=this._digitIsSub,o}toArray(){const o=[];for(let a=0;a<this.length;++a){o.push(this.params[a]);const f=this._subParamsIdx[a]>>8,v=255&this._subParamsIdx[a];v-f>0&&o.push(Array.prototype.slice.call(this._subParams,f,v))}return o}reset(){this.length=0,this._subParamsLength=0,this._rejectDigits=!1,this._rejectSubDigits=!1,this._digitIsSub=!1}addParam(o){if(this._digitIsSub=!1,this.length>=this.maxLength)this._rejectDigits=!0;else{if(o<-1)throw new Error("values lesser than -1 are not allowed");this._subParamsIdx[this.length]=this._subParamsLength<<8|this._subParamsLength,this.params[this.length++]=o>n?n:o}}addSubParam(o){if(this._digitIsSub=!0,this.length)if(this._rejectDigits||this._subParamsLength>=this.maxSubParamsLength)this._rejectSubDigits=!0;else{if(o<-1)throw new Error("values lesser than -1 are not allowed");this._subParams[this._subParamsLength++]=o>n?n:o,this._subParamsIdx[this.length-1]++}}hasSubParams(o){return(255&this._subParamsIdx[o])-(this._subParamsIdx[o]>>8)>0}getSubParams(o){const a=this._subParamsIdx[o]>>8,f=255&this._subParamsIdx[o];return f-a>0?this._subParams.subarray(a,f):null}getSubParamsAll(){const o={};for(let a=0;a<this.length;++a){const f=this._subParamsIdx[a]>>8,v=255&this._subParamsIdx[a];v-f>0&&(o[a]=this._subParams.slice(f,v))}return o}addDigit(o){let a;if(this._rejectDigits||!(a=this._digitIsSub?this._subParamsLength:this.length)||this._digitIsSub&&this._rejectSubDigits)return;const f=this._digitIsSub?this._subParams:this.params,v=f[a-1];f[a-1]=~v?Math.min(10*v+o,n):o}}s.Params=l},5741:(R,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.AddonManager=void 0,s.AddonManager=class{constructor(){this._addons=[]}dispose(){for(let n=this._addons.length-1;n>=0;n--)this._addons[n].instance.dispose()}loadAddon(n,l){const u={instance:l,dispose:l.dispose,isDisposed:!1};this._addons.push(u),l.dispose=()=>this._wrappedAddonDispose(u),l.activate(n)}_wrappedAddonDispose(n){if(n.isDisposed)return;let l=-1;for(let u=0;u<this._addons.length;u++)if(this._addons[u]===n){l=u;break}if(l===-1)throw new Error("Could not dispose an addon that has not been loaded");n.isDisposed=!0,n.dispose.apply(n.instance),this._addons.splice(l,1)}}},8771:(R,s,n)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.BufferApiView=void 0;const l=n(3785),u=n(511);s.BufferApiView=class{constructor(o,a){this._buffer=o,this.type=a}init(o){return this._buffer=o,this}get cursorY(){return this._buffer.y}get cursorX(){return this._buffer.x}get viewportY(){return this._buffer.ydisp}get baseY(){return this._buffer.ybase}get length(){return this._buffer.lines.length}getLine(o){const a=this._buffer.lines.get(o);if(a)return new l.BufferLineApiView(a)}getNullCell(){return new u.CellData}}},3785:(R,s,n)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.BufferLineApiView=void 0;const l=n(511);s.BufferLineApiView=class{constructor(u){this._line=u}get isWrapped(){return this._line.isWrapped}get length(){return this._line.length}getCell(u,o){if(!(u<0||u>=this._line.length))return o?(this._line.loadCell(u,o),o):this._line.loadCell(u,new l.CellData)}translateToString(u,o,a){return this._line.translateToString(u,o,a)}}},8285:(R,s,n)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.BufferNamespaceApi=void 0;const l=n(8771),u=n(8460),o=n(844);class a extends o.Disposable{constructor(v){super(),this._core=v,this._onBufferChange=this.register(new u.EventEmitter),this.onBufferChange=this._onBufferChange.event,this._normal=new l.BufferApiView(this._core.buffers.normal,"normal"),this._alternate=new l.BufferApiView(this._core.buffers.alt,"alternate"),this._core.buffers.onBufferActivate(()=>this._onBufferChange.fire(this.active))}get active(){if(this._core.buffers.active===this._core.buffers.normal)return this.normal;if(this._core.buffers.active===this._core.buffers.alt)return this.alternate;throw new Error("Active buffer is neither normal nor alternate")}get normal(){return this._normal.init(this._core.buffers.normal)}get alternate(){return this._alternate.init(this._core.buffers.alt)}}s.BufferNamespaceApi=a},7975:(R,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.ParserApi=void 0,s.ParserApi=class{constructor(n){this._core=n}registerCsiHandler(n,l){return this._core.registerCsiHandler(n,u=>l(u.toArray()))}addCsiHandler(n,l){return this.registerCsiHandler(n,l)}registerDcsHandler(n,l){return this._core.registerDcsHandler(n,(u,o)=>l(u,o.toArray()))}addDcsHandler(n,l){return this.registerDcsHandler(n,l)}registerEscHandler(n,l){return this._core.registerEscHandler(n,l)}addEscHandler(n,l){return this.registerEscHandler(n,l)}registerOscHandler(n,l){return this._core.registerOscHandler(n,l)}addOscHandler(n,l){return this.registerOscHandler(n,l)}}},7090:(R,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.UnicodeApi=void 0,s.UnicodeApi=class{constructor(n){this._core=n}register(n){this._core.unicodeService.register(n)}get versions(){return this._core.unicodeService.versions}get activeVersion(){return this._core.unicodeService.activeVersion}set activeVersion(n){this._core.unicodeService.activeVersion=n}}},744:function(R,s,n){var l=this&&this.__decorate||function(t,i,e,r){var c,p=arguments.length,g=p<3?i:r===null?r=Object.getOwnPropertyDescriptor(i,e):r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")g=Reflect.decorate(t,i,e,r);else for(var S=t.length-1;S>=0;S--)(c=t[S])&&(g=(p<3?c(g):p>3?c(i,e,g):c(i,e))||g);return p>3&&g&&Object.defineProperty(i,e,g),g},u=this&&this.__param||function(t,i){return function(e,r){i(e,r,t)}};Object.defineProperty(s,"__esModule",{value:!0}),s.BufferService=s.MINIMUM_ROWS=s.MINIMUM_COLS=void 0;const o=n(8460),a=n(844),f=n(5295),v=n(2585);s.MINIMUM_COLS=2,s.MINIMUM_ROWS=1;let h=s.BufferService=class extends a.Disposable{get buffer(){return this.buffers.active}constructor(t){super(),this.isUserScrolling=!1,this._onResize=this.register(new o.EventEmitter),this.onResize=this._onResize.event,this._onScroll=this.register(new o.EventEmitter),this.onScroll=this._onScroll.event,this.cols=Math.max(t.rawOptions.cols||0,s.MINIMUM_COLS),this.rows=Math.max(t.rawOptions.rows||0,s.MINIMUM_ROWS),this.buffers=this.register(new f.BufferSet(t,this))}resize(t,i){this.cols=t,this.rows=i,this.buffers.resize(t,i),this._onResize.fire({cols:t,rows:i})}reset(){this.buffers.reset(),this.isUserScrolling=!1}scroll(t,i=!1){const e=this.buffer;let r;r=this._cachedBlankLine,r&&r.length===this.cols&&r.getFg(0)===t.fg&&r.getBg(0)===t.bg||(r=e.getBlankLine(t,i),this._cachedBlankLine=r),r.isWrapped=i;const c=e.ybase+e.scrollTop,p=e.ybase+e.scrollBottom;if(e.scrollTop===0){const g=e.lines.isFull;p===e.lines.length-1?g?e.lines.recycle().copyFrom(r):e.lines.push(r.clone()):e.lines.splice(p+1,0,r.clone()),g?this.isUserScrolling&&(e.ydisp=Math.max(e.ydisp-1,0)):(e.ybase++,this.isUserScrolling||e.ydisp++)}else{const g=p-c+1;e.lines.shiftElements(c+1,g-1,-1),e.lines.set(p,r.clone())}this.isUserScrolling||(e.ydisp=e.ybase),this._onScroll.fire(e.ydisp)}scrollLines(t,i,e){const r=this.buffer;if(t<0){if(r.ydisp===0)return;this.isUserScrolling=!0}else t+r.ydisp>=r.ybase&&(this.isUserScrolling=!1);const c=r.ydisp;r.ydisp=Math.max(Math.min(r.ydisp+t,r.ybase),0),c!==r.ydisp&&(i||this._onScroll.fire(r.ydisp))}};s.BufferService=h=l([u(0,v.IOptionsService)],h)},7994:(R,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.CharsetService=void 0,s.CharsetService=class{constructor(){this.glevel=0,this._charsets=[]}reset(){this.charset=void 0,this._charsets=[],this.glevel=0}setgLevel(n){this.glevel=n,this.charset=this._charsets[n]}setgCharset(n,l){this._charsets[n]=l,this.glevel===n&&(this.charset=l)}}},1753:function(R,s,n){var l=this&&this.__decorate||function(r,c,p,g){var S,d=arguments.length,w=d<3?c:g===null?g=Object.getOwnPropertyDescriptor(c,p):g;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")w=Reflect.decorate(r,c,p,g);else for(var L=r.length-1;L>=0;L--)(S=r[L])&&(w=(d<3?S(w):d>3?S(c,p,w):S(c,p))||w);return d>3&&w&&Object.defineProperty(c,p,w),w},u=this&&this.__param||function(r,c){return function(p,g){c(p,g,r)}};Object.defineProperty(s,"__esModule",{value:!0}),s.CoreMouseService=void 0;const o=n(2585),a=n(8460),f=n(844),v={NONE:{events:0,restrict:()=>!1},X10:{events:1,restrict:r=>r.button!==4&&r.action===1&&(r.ctrl=!1,r.alt=!1,r.shift=!1,!0)},VT200:{events:19,restrict:r=>r.action!==32},DRAG:{events:23,restrict:r=>r.action!==32||r.button!==3},ANY:{events:31,restrict:r=>!0}};function h(r,c){let p=(r.ctrl?16:0)|(r.shift?4:0)|(r.alt?8:0);return r.button===4?(p|=64,p|=r.action):(p|=3&r.button,4&r.button&&(p|=64),8&r.button&&(p|=128),r.action===32?p|=32:r.action!==0||c||(p|=3)),p}const t=String.fromCharCode,i={DEFAULT:r=>{const c=[h(r,!1)+32,r.col+32,r.row+32];return c[0]>255||c[1]>255||c[2]>255?"":`\x1B[M${t(c[0])}${t(c[1])}${t(c[2])}`},SGR:r=>{const c=r.action===0&&r.button!==4?"m":"M";return`\x1B[<${h(r,!0)};${r.col};${r.row}${c}`},SGR_PIXELS:r=>{const c=r.action===0&&r.button!==4?"m":"M";return`\x1B[<${h(r,!0)};${r.x};${r.y}${c}`}};let e=s.CoreMouseService=class extends f.Disposable{constructor(r,c){super(),this._bufferService=r,this._coreService=c,this._protocols={},this._encodings={},this._activeProtocol="",this._activeEncoding="",this._lastEvent=null,this._onProtocolChange=this.register(new a.EventEmitter),this.onProtocolChange=this._onProtocolChange.event;for(const p of Object.keys(v))this.addProtocol(p,v[p]);for(const p of Object.keys(i))this.addEncoding(p,i[p]);this.reset()}addProtocol(r,c){this._protocols[r]=c}addEncoding(r,c){this._encodings[r]=c}get activeProtocol(){return this._activeProtocol}get areMouseEventsActive(){return this._protocols[this._activeProtocol].events!==0}set activeProtocol(r){if(!this._protocols[r])throw new Error(`unknown protocol "${r}"`);this._activeProtocol=r,this._onProtocolChange.fire(this._protocols[r].events)}get activeEncoding(){return this._activeEncoding}set activeEncoding(r){if(!this._encodings[r])throw new Error(`unknown encoding "${r}"`);this._activeEncoding=r}reset(){this.activeProtocol="NONE",this.activeEncoding="DEFAULT",this._lastEvent=null}triggerMouseEvent(r){if(r.col<0||r.col>=this._bufferService.cols||r.row<0||r.row>=this._bufferService.rows||r.button===4&&r.action===32||r.button===3&&r.action!==32||r.button!==4&&(r.action===2||r.action===3)||(r.col++,r.row++,r.action===32&&this._lastEvent&&this._equalEvents(this._lastEvent,r,this._activeEncoding==="SGR_PIXELS"))||!this._protocols[this._activeProtocol].restrict(r))return!1;const c=this._encodings[this._activeEncoding](r);return c&&(this._activeEncoding==="DEFAULT"?this._coreService.triggerBinaryEvent(c):this._coreService.triggerDataEvent(c,!0)),this._lastEvent=r,!0}explainEvents(r){return{down:!!(1&r),up:!!(2&r),drag:!!(4&r),move:!!(8&r),wheel:!!(16&r)}}_equalEvents(r,c,p){if(p){if(r.x!==c.x||r.y!==c.y)return!1}else if(r.col!==c.col||r.row!==c.row)return!1;return r.button===c.button&&r.action===c.action&&r.ctrl===c.ctrl&&r.alt===c.alt&&r.shift===c.shift}};s.CoreMouseService=e=l([u(0,o.IBufferService),u(1,o.ICoreService)],e)},6975:function(R,s,n){var l=this&&this.__decorate||function(e,r,c,p){var g,S=arguments.length,d=S<3?r:p===null?p=Object.getOwnPropertyDescriptor(r,c):p;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")d=Reflect.decorate(e,r,c,p);else for(var w=e.length-1;w>=0;w--)(g=e[w])&&(d=(S<3?g(d):S>3?g(r,c,d):g(r,c))||d);return S>3&&d&&Object.defineProperty(r,c,d),d},u=this&&this.__param||function(e,r){return function(c,p){r(c,p,e)}};Object.defineProperty(s,"__esModule",{value:!0}),s.CoreService=void 0;const o=n(1439),a=n(8460),f=n(844),v=n(2585),h=Object.freeze({insertMode:!1}),t=Object.freeze({applicationCursorKeys:!1,applicationKeypad:!1,bracketedPasteMode:!1,origin:!1,reverseWraparound:!1,sendFocus:!1,wraparound:!0});let i=s.CoreService=class extends f.Disposable{constructor(e,r,c){super(),this._bufferService=e,this._logService=r,this._optionsService=c,this.isCursorInitialized=!1,this.isCursorHidden=!1,this._onData=this.register(new a.EventEmitter),this.onData=this._onData.event,this._onUserInput=this.register(new a.EventEmitter),this.onUserInput=this._onUserInput.event,this._onBinary=this.register(new a.EventEmitter),this.onBinary=this._onBinary.event,this._onRequestScrollToBottom=this.register(new a.EventEmitter),this.onRequestScrollToBottom=this._onRequestScrollToBottom.event,this.modes=(0,o.clone)(h),this.decPrivateModes=(0,o.clone)(t)}reset(){this.modes=(0,o.clone)(h),this.decPrivateModes=(0,o.clone)(t)}triggerDataEvent(e,r=!1){if(this._optionsService.rawOptions.disableStdin)return;const c=this._bufferService.buffer;r&&this._optionsService.rawOptions.scrollOnUserInput&&c.ybase!==c.ydisp&&this._onRequestScrollToBottom.fire(),r&&this._onUserInput.fire(),this._logService.debug(`sending data "${e}"`,()=>e.split("").map(p=>p.charCodeAt(0))),this._onData.fire(e)}triggerBinaryEvent(e){this._optionsService.rawOptions.disableStdin||(this._logService.debug(`sending binary "${e}"`,()=>e.split("").map(r=>r.charCodeAt(0))),this._onBinary.fire(e))}};s.CoreService=i=l([u(0,v.IBufferService),u(1,v.ILogService),u(2,v.IOptionsService)],i)},9074:(R,s,n)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.DecorationService=void 0;const l=n(8055),u=n(8460),o=n(844),a=n(6106);let f=0,v=0;class h extends o.Disposable{get decorations(){return this._decorations.values()}constructor(){super(),this._decorations=new a.SortedList(e=>e?.marker.line),this._onDecorationRegistered=this.register(new u.EventEmitter),this.onDecorationRegistered=this._onDecorationRegistered.event,this._onDecorationRemoved=this.register(new u.EventEmitter),this.onDecorationRemoved=this._onDecorationRemoved.event,this.register((0,o.toDisposable)(()=>this.reset()))}registerDecoration(e){if(e.marker.isDisposed)return;const r=new t(e);if(r){const c=r.marker.onDispose(()=>r.dispose());r.onDispose(()=>{r&&(this._decorations.delete(r)&&this._onDecorationRemoved.fire(r),c.dispose())}),this._decorations.insert(r),this._onDecorationRegistered.fire(r)}return r}reset(){for(const e of this._decorations.values())e.dispose();this._decorations.clear()}*getDecorationsAtCell(e,r,c){let p=0,g=0;for(const S of this._decorations.getKeyIterator(r))p=S.options.x??0,g=p+(S.options.width??1),e>=p&&e<g&&(!c||(S.options.layer??"bottom")===c)&&(yield S)}forEachDecorationAtCell(e,r,c,p){this._decorations.forEachByKey(r,g=>{f=g.options.x??0,v=f+(g.options.width??1),e>=f&&e<v&&(!c||(g.options.layer??"bottom")===c)&&p(g)})}}s.DecorationService=h;class t extends o.Disposable{get isDisposed(){return this._isDisposed}get backgroundColorRGB(){return this._cachedBg===null&&(this.options.backgroundColor?this._cachedBg=l.css.toColor(this.options.backgroundColor):this._cachedBg=void 0),this._cachedBg}get foregroundColorRGB(){return this._cachedFg===null&&(this.options.foregroundColor?this._cachedFg=l.css.toColor(this.options.foregroundColor):this._cachedFg=void 0),this._cachedFg}constructor(e){super(),this.options=e,this.onRenderEmitter=this.register(new u.EventEmitter),this.onRender=this.onRenderEmitter.event,this._onDispose=this.register(new u.EventEmitter),this.onDispose=this._onDispose.event,this._cachedBg=null,this._cachedFg=null,this.marker=e.marker,this.options.overviewRulerOptions&&!this.options.overviewRulerOptions.position&&(this.options.overviewRulerOptions.position="full")}dispose(){this._onDispose.fire(),super.dispose()}}},4348:(R,s,n)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.InstantiationService=s.ServiceCollection=void 0;const l=n(2585),u=n(8343);class o{constructor(...f){this._entries=new Map;for(const[v,h]of f)this.set(v,h)}set(f,v){const h=this._entries.get(f);return this._entries.set(f,v),h}forEach(f){for(const[v,h]of this._entries.entries())f(v,h)}has(f){return this._entries.has(f)}get(f){return this._entries.get(f)}}s.ServiceCollection=o,s.InstantiationService=class{constructor(){this._services=new o,this._services.set(l.IInstantiationService,this)}setService(a,f){this._services.set(a,f)}getService(a){return this._services.get(a)}createInstance(a,...f){const v=(0,u.getServiceDependencies)(a).sort((i,e)=>i.index-e.index),h=[];for(const i of v){const e=this._services.get(i.id);if(!e)throw new Error(`[createInstance] ${a.name} depends on UNKNOWN service ${i.id}.`);h.push(e)}const t=v.length>0?v[0].index:f.length;if(f.length!==t)throw new Error(`[createInstance] First service dependency of ${a.name} at position ${t+1} conflicts with ${f.length} static arguments`);return new a(...f,...h)}}},7866:function(R,s,n){var l=this&&this.__decorate||function(t,i,e,r){var c,p=arguments.length,g=p<3?i:r===null?r=Object.getOwnPropertyDescriptor(i,e):r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")g=Reflect.decorate(t,i,e,r);else for(var S=t.length-1;S>=0;S--)(c=t[S])&&(g=(p<3?c(g):p>3?c(i,e,g):c(i,e))||g);return p>3&&g&&Object.defineProperty(i,e,g),g},u=this&&this.__param||function(t,i){return function(e,r){i(e,r,t)}};Object.defineProperty(s,"__esModule",{value:!0}),s.traceCall=s.setTraceLogger=s.LogService=void 0;const o=n(844),a=n(2585),f={trace:a.LogLevelEnum.TRACE,debug:a.LogLevelEnum.DEBUG,info:a.LogLevelEnum.INFO,warn:a.LogLevelEnum.WARN,error:a.LogLevelEnum.ERROR,off:a.LogLevelEnum.OFF};let v,h=s.LogService=class extends o.Disposable{get logLevel(){return this._logLevel}constructor(t){super(),this._optionsService=t,this._logLevel=a.LogLevelEnum.OFF,this._updateLogLevel(),this.register(this._optionsService.onSpecificOptionChange("logLevel",()=>this._updateLogLevel())),v=this}_updateLogLevel(){this._logLevel=f[this._optionsService.rawOptions.logLevel]}_evalLazyOptionalParams(t){for(let i=0;i<t.length;i++)typeof t[i]=="function"&&(t[i]=t[i]())}_log(t,i,e){this._evalLazyOptionalParams(e),t.call(console,(this._optionsService.options.logger?"":"xterm.js: ")+i,...e)}trace(t,...i){this._logLevel<=a.LogLevelEnum.TRACE&&this._log(this._optionsService.options.logger?.trace.bind(this._optionsService.options.logger)??console.log,t,i)}debug(t,...i){this._logLevel<=a.LogLevelEnum.DEBUG&&this._log(this._optionsService.options.logger?.debug.bind(this._optionsService.options.logger)??console.log,t,i)}info(t,...i){this._logLevel<=a.LogLevelEnum.INFO&&this._log(this._optionsService.options.logger?.info.bind(this._optionsService.options.logger)??console.info,t,i)}warn(t,...i){this._logLevel<=a.LogLevelEnum.WARN&&this._log(this._optionsService.options.logger?.warn.bind(this._optionsService.options.logger)??console.warn,t,i)}error(t,...i){this._logLevel<=a.LogLevelEnum.ERROR&&this._log(this._optionsService.options.logger?.error.bind(this._optionsService.options.logger)??console.error,t,i)}};s.LogService=h=l([u(0,a.IOptionsService)],h),s.setTraceLogger=function(t){v=t},s.traceCall=function(t,i,e){if(typeof e.value!="function")throw new Error("not supported");const r=e.value;e.value=function(...c){if(v.logLevel!==a.LogLevelEnum.TRACE)return r.apply(this,c);v.trace(`GlyphRenderer#${r.name}(${c.map(g=>JSON.stringify(g)).join(", ")})`);const p=r.apply(this,c);return v.trace(`GlyphRenderer#${r.name} return`,p),p}}},7302:(R,s,n)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.OptionsService=s.DEFAULT_OPTIONS=void 0;const l=n(8460),u=n(844),o=n(6114);s.DEFAULT_OPTIONS={cols:80,rows:24,cursorBlink:!1,cursorStyle:"block",cursorWidth:1,cursorInactiveStyle:"outline",customGlyphs:!0,drawBoldTextInBrightColors:!0,documentOverride:null,fastScrollModifier:"alt",fastScrollSensitivity:5,fontFamily:"courier-new, courier, monospace",fontSize:15,fontWeight:"normal",fontWeightBold:"bold",ignoreBracketedPasteMode:!1,lineHeight:1,letterSpacing:0,linkHandler:null,logLevel:"info",logger:null,scrollback:1e3,scrollOnUserInput:!0,scrollSensitivity:1,screenReaderMode:!1,smoothScrollDuration:0,macOptionIsMeta:!1,macOptionClickForcesSelection:!1,minimumContrastRatio:1,disableStdin:!1,allowProposedApi:!1,allowTransparency:!1,tabStopWidth:8,theme:{},rescaleOverlappingGlyphs:!1,rightClickSelectsWord:o.isMac,windowOptions:{},windowsMode:!1,windowsPty:{},wordSeparator:" ()[]{}',\"`",altClickMovesCursor:!0,convertEol:!1,termName:"xterm",cancelEvents:!1,overviewRulerWidth:0};const a=["normal","bold","100","200","300","400","500","600","700","800","900"];class f extends u.Disposable{constructor(h){super(),this._onOptionChange=this.register(new l.EventEmitter),this.onOptionChange=this._onOptionChange.event;const t={...s.DEFAULT_OPTIONS};for(const i in h)if(i in t)try{const e=h[i];t[i]=this._sanitizeAndValidateOption(i,e)}catch(e){console.error(e)}this.rawOptions=t,this.options={...t},this._setupOptions(),this.register((0,u.toDisposable)(()=>{this.rawOptions.linkHandler=null,this.rawOptions.documentOverride=null}))}onSpecificOptionChange(h,t){return this.onOptionChange(i=>{i===h&&t(this.rawOptions[h])})}onMultipleOptionChange(h,t){return this.onOptionChange(i=>{h.indexOf(i)!==-1&&t()})}_setupOptions(){const h=i=>{if(!(i in s.DEFAULT_OPTIONS))throw new Error(`No option with key "${i}"`);return this.rawOptions[i]},t=(i,e)=>{if(!(i in s.DEFAULT_OPTIONS))throw new Error(`No option with key "${i}"`);e=this._sanitizeAndValidateOption(i,e),this.rawOptions[i]!==e&&(this.rawOptions[i]=e,this._onOptionChange.fire(i))};for(const i in this.rawOptions){const e={get:h.bind(this,i),set:t.bind(this,i)};Object.defineProperty(this.options,i,e)}}_sanitizeAndValidateOption(h,t){switch(h){case"cursorStyle":if(t||(t=s.DEFAULT_OPTIONS[h]),!function(i){return i==="block"||i==="underline"||i==="bar"}(t))throw new Error(`"${t}" is not a valid value for ${h}`);break;case"wordSeparator":t||(t=s.DEFAULT_OPTIONS[h]);break;case"fontWeight":case"fontWeightBold":if(typeof t=="number"&&1<=t&&t<=1e3)break;t=a.includes(t)?t:s.DEFAULT_OPTIONS[h];break;case"cursorWidth":t=Math.floor(t);case"lineHeight":case"tabStopWidth":if(t<1)throw new Error(`${h} cannot be less than 1, value: ${t}`);break;case"minimumContrastRatio":t=Math.max(1,Math.min(21,Math.round(10*t)/10));break;case"scrollback":if((t=Math.min(t,4294967295))<0)throw new Error(`${h} cannot be less than 0, value: ${t}`);break;case"fastScrollSensitivity":case"scrollSensitivity":if(t<=0)throw new Error(`${h} cannot be less than or equal to 0, value: ${t}`);break;case"rows":case"cols":if(!t&&t!==0)throw new Error(`${h} must be numeric, value: ${t}`);break;case"windowsPty":t=t??{}}return t}}s.OptionsService=f},2660:function(R,s,n){var l=this&&this.__decorate||function(f,v,h,t){var i,e=arguments.length,r=e<3?v:t===null?t=Object.getOwnPropertyDescriptor(v,h):t;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(f,v,h,t);else for(var c=f.length-1;c>=0;c--)(i=f[c])&&(r=(e<3?i(r):e>3?i(v,h,r):i(v,h))||r);return e>3&&r&&Object.defineProperty(v,h,r),r},u=this&&this.__param||function(f,v){return function(h,t){v(h,t,f)}};Object.defineProperty(s,"__esModule",{value:!0}),s.OscLinkService=void 0;const o=n(2585);let a=s.OscLinkService=class{constructor(f){this._bufferService=f,this._nextId=1,this._entriesWithId=new Map,this._dataByLinkId=new Map}registerLink(f){const v=this._bufferService.buffer;if(f.id===void 0){const c=v.addMarker(v.ybase+v.y),p={data:f,id:this._nextId++,lines:[c]};return c.onDispose(()=>this._removeMarkerFromLink(p,c)),this._dataByLinkId.set(p.id,p),p.id}const h=f,t=this._getEntryIdKey(h),i=this._entriesWithId.get(t);if(i)return this.addLineToLink(i.id,v.ybase+v.y),i.id;const e=v.addMarker(v.ybase+v.y),r={id:this._nextId++,key:this._getEntryIdKey(h),data:h,lines:[e]};return e.onDispose(()=>this._removeMarkerFromLink(r,e)),this._entriesWithId.set(r.key,r),this._dataByLinkId.set(r.id,r),r.id}addLineToLink(f,v){const h=this._dataByLinkId.get(f);if(h&&h.lines.every(t=>t.line!==v)){const t=this._bufferService.buffer.addMarker(v);h.lines.push(t),t.onDispose(()=>this._removeMarkerFromLink(h,t))}}getLinkData(f){return this._dataByLinkId.get(f)?.data}_getEntryIdKey(f){return`${f.id};;${f.uri}`}_removeMarkerFromLink(f,v){const h=f.lines.indexOf(v);h!==-1&&(f.lines.splice(h,1),f.lines.length===0&&(f.data.id!==void 0&&this._entriesWithId.delete(f.key),this._dataByLinkId.delete(f.id)))}};s.OscLinkService=a=l([u(0,o.IBufferService)],a)},8343:(R,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.createDecorator=s.getServiceDependencies=s.serviceRegistry=void 0;const n="di$target",l="di$dependencies";s.serviceRegistry=new Map,s.getServiceDependencies=function(u){return u[l]||[]},s.createDecorator=function(u){if(s.serviceRegistry.has(u))return s.serviceRegistry.get(u);const o=function(a,f,v){if(arguments.length!==3)throw new Error("@IServiceName-decorator can only be used to decorate a parameter");(function(h,t,i){t[n]===t?t[l].push({id:h,index:i}):(t[l]=[{id:h,index:i}],t[n]=t)})(o,a,v)};return o.toString=()=>u,s.serviceRegistry.set(u,o),o}},2585:(R,s,n)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.IDecorationService=s.IUnicodeService=s.IOscLinkService=s.IOptionsService=s.ILogService=s.LogLevelEnum=s.IInstantiationService=s.ICharsetService=s.ICoreService=s.ICoreMouseService=s.IBufferService=void 0;const l=n(8343);var u;s.IBufferService=(0,l.createDecorator)("BufferService"),s.ICoreMouseService=(0,l.createDecorator)("CoreMouseService"),s.ICoreService=(0,l.createDecorator)("CoreService"),s.ICharsetService=(0,l.createDecorator)("CharsetService"),s.IInstantiationService=(0,l.createDecorator)("InstantiationService"),function(o){o[o.TRACE=0]="TRACE",o[o.DEBUG=1]="DEBUG",o[o.INFO=2]="INFO",o[o.WARN=3]="WARN",o[o.ERROR=4]="ERROR",o[o.OFF=5]="OFF"}(u||(s.LogLevelEnum=u={})),s.ILogService=(0,l.createDecorator)("LogService"),s.IOptionsService=(0,l.createDecorator)("OptionsService"),s.IOscLinkService=(0,l.createDecorator)("OscLinkService"),s.IUnicodeService=(0,l.createDecorator)("UnicodeService"),s.IDecorationService=(0,l.createDecorator)("DecorationService")},1480:(R,s,n)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.UnicodeService=void 0;const l=n(8460),u=n(225);class o{static extractShouldJoin(f){return(1&f)!=0}static extractWidth(f){return f>>1&3}static extractCharKind(f){return f>>3}static createPropertyValue(f,v,h=!1){return(16777215&f)<<3|(3&v)<<1|(h?1:0)}constructor(){this._providers=Object.create(null),this._active="",this._onChange=new l.EventEmitter,this.onChange=this._onChange.event;const f=new u.UnicodeV6;this.register(f),this._active=f.version,this._activeProvider=f}dispose(){this._onChange.dispose()}get versions(){return Object.keys(this._providers)}get activeVersion(){return this._active}set activeVersion(f){if(!this._providers[f])throw new Error(`unknown Unicode version "${f}"`);this._active=f,this._activeProvider=this._providers[f],this._onChange.fire(f)}register(f){this._providers[f.version]=f}wcwidth(f){return this._activeProvider.wcwidth(f)}getStringCellWidth(f){let v=0,h=0;const t=f.length;for(let i=0;i<t;++i){let e=f.charCodeAt(i);if(55296<=e&&e<=56319){if(++i>=t)return v+this.wcwidth(e);const p=f.charCodeAt(i);56320<=p&&p<=57343?e=1024*(e-55296)+p-56320+65536:v+=this.wcwidth(p)}const r=this.charProperties(e,h);let c=o.extractWidth(r);o.extractShouldJoin(r)&&(c-=o.extractWidth(h)),v+=c,h=r}return v}charProperties(f,v){return this._activeProvider.charProperties(f,v)}}s.UnicodeService=o}},x={};function M(R){var s=x[R];if(s!==void 0)return s.exports;var n=x[R]={exports:{}};return _[R].call(n.exports,n,n.exports,M),n.exports}var O={};return(()=>{var R=O;Object.defineProperty(R,"__esModule",{value:!0}),R.Terminal=void 0;const s=M(9042),n=M(3236),l=M(844),u=M(5741),o=M(8285),a=M(7975),f=M(7090),v=["cols","rows"];class h extends l.Disposable{constructor(i){super(),this._core=this.register(new n.Terminal(i)),this._addonManager=this.register(new u.AddonManager),this._publicOptions={...this._core.options};const e=c=>this._core.options[c],r=(c,p)=>{this._checkReadonlyOptions(c),this._core.options[c]=p};for(const c in this._core.options){const p={get:e.bind(this,c),set:r.bind(this,c)};Object.defineProperty(this._publicOptions,c,p)}}_checkReadonlyOptions(i){if(v.includes(i))throw new Error(`Option "${i}" can only be set in the constructor`)}_checkProposedApi(){if(!this._core.optionsService.rawOptions.allowProposedApi)throw new Error("You must set the allowProposedApi option to true to use proposed API")}get onBell(){return this._core.onBell}get onBinary(){return this._core.onBinary}get onCursorMove(){return this._core.onCursorMove}get onData(){return this._core.onData}get onKey(){return this._core.onKey}get onLineFeed(){return this._core.onLineFeed}get onRender(){return this._core.onRender}get onResize(){return this._core.onResize}get onScroll(){return this._core.onScroll}get onSelectionChange(){return this._core.onSelectionChange}get onTitleChange(){return this._core.onTitleChange}get onWriteParsed(){return this._core.onWriteParsed}get element(){return this._core.element}get parser(){return this._parser||(this._parser=new a.ParserApi(this._core)),this._parser}get unicode(){return this._checkProposedApi(),new f.UnicodeApi(this._core)}get textarea(){return this._core.textarea}get rows(){return this._core.rows}get cols(){return this._core.cols}get buffer(){return this._buffer||(this._buffer=this.register(new o.BufferNamespaceApi(this._core))),this._buffer}get markers(){return this._checkProposedApi(),this._core.markers}get modes(){const i=this._core.coreService.decPrivateModes;let e="none";switch(this._core.coreMouseService.activeProtocol){case"X10":e="x10";break;case"VT200":e="vt200";break;case"DRAG":e="drag";break;case"ANY":e="any"}return{applicationCursorKeysMode:i.applicationCursorKeys,applicationKeypadMode:i.applicationKeypad,bracketedPasteMode:i.bracketedPasteMode,insertMode:this._core.coreService.modes.insertMode,mouseTrackingMode:e,originMode:i.origin,reverseWraparoundMode:i.reverseWraparound,sendFocusMode:i.sendFocus,wraparoundMode:i.wraparound}}get options(){return this._publicOptions}set options(i){for(const e in i)this._publicOptions[e]=i[e]}blur(){this._core.blur()}focus(){this._core.focus()}input(i,e=!0){this._core.input(i,e)}resize(i,e){this._verifyIntegers(i,e),this._core.resize(i,e)}open(i){this._core.open(i)}attachCustomKeyEventHandler(i){this._core.attachCustomKeyEventHandler(i)}attachCustomWheelEventHandler(i){this._core.attachCustomWheelEventHandler(i)}registerLinkProvider(i){return this._core.registerLinkProvider(i)}registerCharacterJoiner(i){return this._checkProposedApi(),this._core.registerCharacterJoiner(i)}deregisterCharacterJoiner(i){this._checkProposedApi(),this._core.deregisterCharacterJoiner(i)}registerMarker(i=0){return this._verifyIntegers(i),this._core.registerMarker(i)}registerDecoration(i){return this._checkProposedApi(),this._verifyPositiveIntegers(i.x??0,i.width??0,i.height??0),this._core.registerDecoration(i)}hasSelection(){return this._core.hasSelection()}select(i,e,r){this._verifyIntegers(i,e,r),this._core.select(i,e,r)}getSelection(){return this._core.getSelection()}getSelectionPosition(){return this._core.getSelectionPosition()}clearSelection(){this._core.clearSelection()}selectAll(){this._core.selectAll()}selectLines(i,e){this._verifyIntegers(i,e),this._core.selectLines(i,e)}dispose(){super.dispose()}scrollLines(i){this._verifyIntegers(i),this._core.scrollLines(i)}scrollPages(i){this._verifyIntegers(i),this._core.scrollPages(i)}scrollToTop(){this._core.scrollToTop()}scrollToBottom(){this._core.scrollToBottom()}scrollToLine(i){this._verifyIntegers(i),this._core.scrollToLine(i)}clear(){this._core.clear()}write(i,e){this._core.write(i,e)}writeln(i,e){this._core.write(i),this._core.write(`\r
`,e)}paste(i){this._core.paste(i)}refresh(i,e){this._verifyIntegers(i,e),this._core.refresh(i,e)}reset(){this._core.reset()}clearTextureAtlas(){this._core.clearTextureAtlas()}loadAddon(i){this._addonManager.loadAddon(this,i)}static get strings(){return s}_verifyIntegers(...i){for(const e of i)if(e===1/0||isNaN(e)||e%1!=0)throw new Error("This API only accepts integers")}_verifyPositiveIntegers(...i){for(const e of i)if(e&&(e===1/0||isNaN(e)||e%1!=0||e<0))throw new Error("This API only accepts positive integers")}}R.Terminal=h})(),O})())})(dr);var _r=dr.exports,gr={exports:{}};(function(b,m){(function(_,x){b.exports=x()})(self,()=>(()=>{var _={};return(()=>{var x=_;Object.defineProperty(x,"__esModule",{value:!0}),x.FitAddon=void 0,x.FitAddon=class{activate(M){this._terminal=M}dispose(){}fit(){const M=this.proposeDimensions();if(!M||!this._terminal||isNaN(M.cols)||isNaN(M.rows))return;const O=this._terminal._core;this._terminal.rows===M.rows&&this._terminal.cols===M.cols||(O._renderService.clear(),this._terminal.resize(M.cols,M.rows))}proposeDimensions(){if(!this._terminal||!this._terminal.element||!this._terminal.element.parentElement)return;const M=this._terminal._core,O=M._renderService.dimensions;if(O.css.cell.width===0||O.css.cell.height===0)return;const R=this._terminal.options.scrollback===0?0:M.viewport.scrollBarWidth,s=window.getComputedStyle(this._terminal.element.parentElement),n=parseInt(s.getPropertyValue("height")),l=Math.max(0,parseInt(s.getPropertyValue("width"))),u=window.getComputedStyle(this._terminal.element),o=n-(parseInt(u.getPropertyValue("padding-top"))+parseInt(u.getPropertyValue("padding-bottom"))),a=l-(parseInt(u.getPropertyValue("padding-right"))+parseInt(u.getPropertyValue("padding-left")))-R;return{cols:Math.max(2,Math.floor(a/O.css.cell.width)),rows:Math.max(1,Math.floor(o/O.css.cell.height))}}}})(),_})())})(gr);var Ms=gr.exports,br={exports:{}};(function(b,m){(function(_,x){b.exports=x()})(self,()=>(()=>{var _={345:(R,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.runAndSubscribe=s.forwardEvent=s.EventEmitter=void 0,s.EventEmitter=class{constructor(){this._listeners=[],this._disposed=!1}get event(){return this._event||(this._event=n=>(this._listeners.push(n),{dispose:()=>{if(!this._disposed){for(let l=0;l<this._listeners.length;l++)if(this._listeners[l]===n)return void this._listeners.splice(l,1)}}})),this._event}fire(n,l){const u=[];for(let o=0;o<this._listeners.length;o++)u.push(this._listeners[o]);for(let o=0;o<u.length;o++)u[o].call(void 0,n,l)}dispose(){this.clearListeners(),this._disposed=!0}clearListeners(){this._listeners&&(this._listeners.length=0)}},s.forwardEvent=function(n,l){return n(u=>l.fire(u))},s.runAndSubscribe=function(n,l){return l(void 0),n(u=>l(u))}},859:(R,s)=>{function n(l){for(const u of l)u.dispose();l.length=0}Object.defineProperty(s,"__esModule",{value:!0}),s.getDisposeArrayDisposable=s.disposeArray=s.toDisposable=s.MutableDisposable=s.Disposable=void 0,s.Disposable=class{constructor(){this._disposables=[],this._isDisposed=!1}dispose(){this._isDisposed=!0;for(const l of this._disposables)l.dispose();this._disposables.length=0}register(l){return this._disposables.push(l),l}unregister(l){const u=this._disposables.indexOf(l);u!==-1&&this._disposables.splice(u,1)}},s.MutableDisposable=class{constructor(){this._isDisposed=!1}get value(){return this._isDisposed?void 0:this._value}set value(l){this._isDisposed||l===this._value||(this._value?.dispose(),this._value=l)}clear(){this.value=void 0}dispose(){this._isDisposed=!0,this._value?.dispose(),this._value=void 0}},s.toDisposable=function(l){return{dispose:l}},s.disposeArray=n,s.getDisposeArrayDisposable=function(l){return{dispose:()=>n(l)}}}},x={};function M(R){var s=x[R];if(s!==void 0)return s.exports;var n=x[R]={exports:{}};return _[R](n,n.exports,M),n.exports}var O={};return(()=>{var R=O;Object.defineProperty(R,"__esModule",{value:!0}),R.SearchAddon=void 0;const s=M(345),n=M(859),l=" ~!@#$%^&*()+`-=[]{}|\\;:\"',./<>?";class u extends n.Disposable{constructor(a){super(),this._highlightedLines=new Set,this._highlightDecorations=[],this._selectedDecoration=this.register(new n.MutableDisposable),this._linesCacheTimeoutId=0,this._linesCacheDisposables=new n.MutableDisposable,this._onDidChangeResults=this.register(new s.EventEmitter),this.onDidChangeResults=this._onDidChangeResults.event,this._highlightLimit=a?.highlightLimit??1e3}activate(a){this._terminal=a,this.register(this._terminal.onWriteParsed(()=>this._updateMatches())),this.register(this._terminal.onResize(()=>this._updateMatches())),this.register((0,n.toDisposable)(()=>this.clearDecorations()))}_updateMatches(){this._highlightTimeout&&window.clearTimeout(this._highlightTimeout),this._cachedSearchTerm&&this._lastSearchOptions?.decorations&&(this._highlightTimeout=setTimeout(()=>{const a=this._cachedSearchTerm;this._cachedSearchTerm=void 0,this.findPrevious(a,{...this._lastSearchOptions,incremental:!0,noScroll:!0})},200))}clearDecorations(a){this._selectedDecoration.clear(),(0,n.disposeArray)(this._highlightDecorations),this._highlightDecorations=[],this._highlightedLines.clear(),a||(this._cachedSearchTerm=void 0)}clearActiveDecoration(){this._selectedDecoration.clear()}findNext(a,f){if(!this._terminal)throw new Error("Cannot use addon until it has been loaded");const v=!this._lastSearchOptions||this._didOptionsChange(this._lastSearchOptions,f);this._lastSearchOptions=f,f?.decorations&&(this._cachedSearchTerm===void 0||a!==this._cachedSearchTerm||v)&&this._highlightAllMatches(a,f);const h=this._findNextAndSelect(a,f);return this._fireResults(f),this._cachedSearchTerm=a,h}_highlightAllMatches(a,f){if(!this._terminal)throw new Error("Cannot use addon until it has been loaded");if(!a||a.length===0)return void this.clearDecorations();f=f||{},this.clearDecorations(!0);const v=[];let h,t=this._find(a,0,0,f);for(;t&&(h?.row!==t.row||h?.col!==t.col)&&!(v.length>=this._highlightLimit);)h=t,v.push(h),t=this._find(a,h.col+h.term.length>=this._terminal.cols?h.row+1:h.row,h.col+h.term.length>=this._terminal.cols?0:h.col+1,f);for(const i of v){const e=this._createResultDecoration(i,f.decorations);e&&(this._highlightedLines.add(e.marker.line),this._highlightDecorations.push({decoration:e,match:i,dispose(){e.dispose()}}))}}_find(a,f,v,h){if(!this._terminal||!a||a.length===0)return this._terminal?.clearSelection(),void this.clearDecorations();if(v>this._terminal.cols)throw new Error(`Invalid col: ${v} to search in terminal of ${this._terminal.cols} cols`);let t;this._initLinesCache();const i={startRow:f,startCol:v};if(t=this._findInLine(a,i,h),!t)for(let e=f+1;e<this._terminal.buffer.active.baseY+this._terminal.rows&&(i.startRow=e,i.startCol=0,t=this._findInLine(a,i,h),!t);e++);return t}_findNextAndSelect(a,f){if(!this._terminal||!a||a.length===0)return this._terminal?.clearSelection(),this.clearDecorations(),!1;const v=this._terminal.getSelectionPosition();this._terminal.clearSelection();let h=0,t=0;v&&(this._cachedSearchTerm===a?(h=v.end.x,t=v.end.y):(h=v.start.x,t=v.start.y)),this._initLinesCache();const i={startRow:t,startCol:h};let e=this._findInLine(a,i,f);if(!e)for(let r=t+1;r<this._terminal.buffer.active.baseY+this._terminal.rows&&(i.startRow=r,i.startCol=0,e=this._findInLine(a,i,f),!e);r++);if(!e&&t!==0)for(let r=0;r<t&&(i.startRow=r,i.startCol=0,e=this._findInLine(a,i,f),!e);r++);return!e&&v&&(i.startRow=v.start.y,i.startCol=0,e=this._findInLine(a,i,f)),this._selectResult(e,f?.decorations,f?.noScroll)}findPrevious(a,f){if(!this._terminal)throw new Error("Cannot use addon until it has been loaded");const v=!this._lastSearchOptions||this._didOptionsChange(this._lastSearchOptions,f);this._lastSearchOptions=f,f?.decorations&&(this._cachedSearchTerm===void 0||a!==this._cachedSearchTerm||v)&&this._highlightAllMatches(a,f);const h=this._findPreviousAndSelect(a,f);return this._fireResults(f),this._cachedSearchTerm=a,h}_didOptionsChange(a,f){return!!f&&(a.caseSensitive!==f.caseSensitive||a.regex!==f.regex||a.wholeWord!==f.wholeWord)}_fireResults(a){if(a?.decorations){let f=-1;if(this._selectedDecoration.value){const v=this._selectedDecoration.value.match;for(let h=0;h<this._highlightDecorations.length;h++){const t=this._highlightDecorations[h].match;if(t.row===v.row&&t.col===v.col&&t.size===v.size){f=h;break}}}this._onDidChangeResults.fire({resultIndex:f,resultCount:this._highlightDecorations.length})}}_findPreviousAndSelect(a,f){if(!this._terminal)throw new Error("Cannot use addon until it has been loaded");if(!this._terminal||!a||a.length===0)return this._terminal?.clearSelection(),this.clearDecorations(),!1;const v=this._terminal.getSelectionPosition();this._terminal.clearSelection();let h=this._terminal.buffer.active.baseY+this._terminal.rows-1,t=this._terminal.cols;const i=!0;this._initLinesCache();const e={startRow:h,startCol:t};let r;if(v&&(e.startRow=h=v.start.y,e.startCol=t=v.start.x,this._cachedSearchTerm!==a&&(r=this._findInLine(a,e,f,!1),r||(e.startRow=h=v.end.y,e.startCol=t=v.end.x))),r||(r=this._findInLine(a,e,f,i)),!r){e.startCol=Math.max(e.startCol,this._terminal.cols);for(let c=h-1;c>=0&&(e.startRow=c,r=this._findInLine(a,e,f,i),!r);c--);}if(!r&&h!==this._terminal.buffer.active.baseY+this._terminal.rows-1)for(let c=this._terminal.buffer.active.baseY+this._terminal.rows-1;c>=h&&(e.startRow=c,r=this._findInLine(a,e,f,i),!r);c--);return this._selectResult(r,f?.decorations,f?.noScroll)}_initLinesCache(){const a=this._terminal;this._linesCache||(this._linesCache=new Array(a.buffer.active.length),this._linesCacheDisposables.value=(0,n.getDisposeArrayDisposable)([a.onLineFeed(()=>this._destroyLinesCache()),a.onCursorMove(()=>this._destroyLinesCache()),a.onResize(()=>this._destroyLinesCache())])),window.clearTimeout(this._linesCacheTimeoutId),this._linesCacheTimeoutId=window.setTimeout(()=>this._destroyLinesCache(),15e3)}_destroyLinesCache(){this._linesCache=void 0,this._linesCacheDisposables.clear(),this._linesCacheTimeoutId&&(window.clearTimeout(this._linesCacheTimeoutId),this._linesCacheTimeoutId=0)}_isWholeWord(a,f,v){return(a===0||l.includes(f[a-1]))&&(a+v.length===f.length||l.includes(f[a+v.length]))}_findInLine(a,f,v={},h=!1){const t=this._terminal,i=f.startRow,e=f.startCol;if(t.buffer.active.getLine(i)?.isWrapped)return h?void(f.startCol+=t.cols):(f.startRow--,f.startCol+=t.cols,this._findInLine(a,f,v));let c=this._linesCache?.[i];c||(c=this._translateBufferLineToStringWithWrap(i,!0),this._linesCache&&(this._linesCache[i]=c));const[p,g]=c,S=this._bufferColsToStringOffset(i,e),d=v.caseSensitive?a:a.toLowerCase(),w=v.caseSensitive?p:p.toLowerCase();let L=-1;if(v.regex){const B=RegExp(d,"g");let A;if(h)for(;A=B.exec(w.slice(0,S));)L=B.lastIndex-A[0].length,a=A[0],B.lastIndex-=a.length-1;else A=B.exec(w.slice(S)),A&&A[0].length>0&&(L=S+(B.lastIndex-A[0].length),a=A[0])}else h?S-d.length>=0&&(L=w.lastIndexOf(d,S-d.length)):L=w.indexOf(d,S);if(L>=0){if(v.wholeWord&&!this._isWholeWord(L,w,a))return;let B=0;for(;B<g.length-1&&L>=g[B+1];)B++;let A=B;for(;A<g.length-1&&L+a.length>=g[A+1];)A++;const k=L-g[B],I=L+a.length-g[A],W=this._stringLengthToBufferSize(i+B,k);return{term:a,col:W,row:i+B,size:this._stringLengthToBufferSize(i+A,I)-W+t.cols*(A-B)}}}_stringLengthToBufferSize(a,f){const v=this._terminal.buffer.active.getLine(a);if(!v)return 0;for(let h=0;h<f;h++){const t=v.getCell(h);if(!t)break;const i=t.getChars();i.length>1&&(f-=i.length-1);const e=v.getCell(h+1);e&&e.getWidth()===0&&f++}return f}_bufferColsToStringOffset(a,f){const v=this._terminal;let h=a,t=0,i=v.buffer.active.getLine(h);for(;f>0&&i;){for(let e=0;e<f&&e<v.cols;e++){const r=i.getCell(e);if(!r)break;r.getWidth()&&(t+=r.getCode()===0?1:r.getChars().length)}if(h++,i=v.buffer.active.getLine(h),i&&!i.isWrapped)break;f-=v.cols}return t}_translateBufferLineToStringWithWrap(a,f){const v=this._terminal,h=[],t=[0];let i=v.buffer.active.getLine(a);for(;i;){const e=v.buffer.active.getLine(a+1),r=!!e&&e.isWrapped;let c=i.translateToString(!r&&f);if(r&&e){const p=i.getCell(i.length-1);p&&p.getCode()===0&&p.getWidth()===1&&e.getCell(0)?.getWidth()===2&&(c=c.slice(0,-1))}if(h.push(c),!r)break;t.push(t[t.length-1]+c.length),a++,i=e}return[h.join(""),t]}_selectResult(a,f,v){const h=this._terminal;if(this._selectedDecoration.clear(),!a)return h.clearSelection(),!1;if(h.select(a.col,a.row,a.size),f){const t=h.registerMarker(-h.buffer.active.baseY-h.buffer.active.cursorY+a.row);if(t){const i=h.registerDecoration({marker:t,x:a.col,width:a.size,backgroundColor:f.activeMatchBackground,layer:"top",overviewRulerOptions:{color:f.activeMatchColorOverviewRuler}});if(i){const e=[];e.push(t),e.push(i.onRender(r=>this._applyStyles(r,f.activeMatchBorder,!0))),e.push(i.onDispose(()=>(0,n.disposeArray)(e))),this._selectedDecoration.value={decoration:i,match:a,dispose(){i.dispose()}}}}}if(!v&&(a.row>=h.buffer.active.viewportY+h.rows||a.row<h.buffer.active.viewportY)){let t=a.row-h.buffer.active.viewportY;t-=Math.floor(h.rows/2),h.scrollLines(t)}return!0}_applyStyles(a,f,v){a.classList.contains("xterm-find-result-decoration")||(a.classList.add("xterm-find-result-decoration"),f&&(a.style.outline=`1px solid ${f}`)),v&&a.classList.add("xterm-find-active-result-decoration")}_createResultDecoration(a,f){const v=this._terminal,h=v.registerMarker(-v.buffer.active.baseY-v.buffer.active.cursorY+a.row);if(!h)return;const t=v.registerDecoration({marker:h,x:a.col,width:a.size,backgroundColor:f.matchBackground,overviewRulerOptions:this._highlightedLines.has(h.line)?void 0:{color:f.matchOverviewRuler,position:"center"}});if(t){const i=[];i.push(h),i.push(t.onRender(e=>this._applyStyles(e,f.matchBorder,!1))),i.push(t.onDispose(()=>(0,n.disposeArray)(i)))}return t}}R.SearchAddon=u})(),O})())})(br);var As=br.exports;const Ts="1.0.0";function Os(b){return new Uint8Array(atob(b).split("").map(Ps))}function Ps(b){return b.charCodeAt(0)}const vr=typeof window.webkit<"u";var rt={exports:{}};(function(b,m){(function(_,x){x(m)})(xs,function(_){var x={foreground:"#a5a2a2",background:"#090300",cursor:"#a5a2a2",black:"#090300",brightBlack:"#5c5855",red:"#db2d20",brightRed:"#e8bbd0",green:"#01a252",brightGreen:"#3a3432",yellow:"#fded02",brightYellow:"#4a4543",blue:"#01a0e4",brightBlue:"#807d7c",magenta:"#a16a94",brightMagenta:"#d6d5d4",cyan:"#b5e4f4",brightCyan:"#cdab53",white:"#a5a2a2",brightWhite:"#f7f7f7"},M={foreground:"#f8dcc0",background:"#1f1d45",cursor:"#efbf38",black:"#050404",brightBlack:"#4e7cbf",red:"#bd0013",brightRed:"#fc5f5a",green:"#4ab118",brightGreen:"#9eff6e",yellow:"#e7741e",brightYellow:"#efc11a",blue:"#0f4ac6",brightBlue:"#1997c6",magenta:"#665993",brightMagenta:"#9b5953",cyan:"#70a598",brightCyan:"#c8faf4",white:"#f8dcc0",brightWhite:"#f6f5fb"},O={foreground:"#d0d0d0",background:"#212121",cursor:"#d0d0d0",black:"#151515",brightBlack:"#505050",red:"#ac4142",brightRed:"#ac4142",green:"#7e8e50",brightGreen:"#7e8e50",yellow:"#e5b567",brightYellow:"#e5b567",blue:"#6c99bb",brightBlue:"#6c99bb",magenta:"#9f4e85",brightMagenta:"#9f4e85",cyan:"#7dd6cf",brightCyan:"#7dd6cf",white:"#d0d0d0",brightWhite:"#f5f5f5"},R={foreground:"#637d75",background:"#0f1610",cursor:"#73fa91",black:"#112616",brightBlack:"#3c4812",red:"#7f2b27",brightRed:"#e08009",green:"#2f7e25",brightGreen:"#18e000",yellow:"#717f24",brightYellow:"#bde000",blue:"#2f6a7f",brightBlue:"#00aae0",magenta:"#47587f",brightMagenta:"#0058e0",cyan:"#327f77",brightCyan:"#00e0c4",white:"#647d75",brightWhite:"#73fa91"},s={foreground:"#fffaf4",background:"#0e1019",cursor:"#ff0018",black:"#232323",brightBlack:"#444444",red:"#ff000f",brightRed:"#ff2740",green:"#8ce10b",brightGreen:"#abe15b",yellow:"#ffb900",brightYellow:"#ffd242",blue:"#008df8",brightBlue:"#0092ff",magenta:"#6d43a6",brightMagenta:"#9a5feb",cyan:"#00d8eb",brightCyan:"#67fff0",white:"#ffffff",brightWhite:"#ffffff"},n={foreground:"#ddeedd",background:"#1c1c1c",cursor:"#e2bbef",black:"#3d352a",brightBlack:"#554444",red:"#cd5c5c",brightRed:"#cc5533",green:"#86af80",brightGreen:"#88aa22",yellow:"#e8ae5b",brightYellow:"#ffa75d",blue:"#6495ed",brightBlue:"#87ceeb",magenta:"#deb887",brightMagenta:"#996600",cyan:"#b0c4de",brightCyan:"#b0c4de",white:"#bbaa99",brightWhite:"#ddccbb"},l={foreground:"#979db4",background:"#202746",cursor:"#979db4",black:"#202746",brightBlack:"#6b7394",red:"#c94922",brightRed:"#c76b29",green:"#ac9739",brightGreen:"#293256",yellow:"#c08b30",brightYellow:"#5e6687",blue:"#3d8fd1",brightBlue:"#898ea4",magenta:"#6679cc",brightMagenta:"#dfe2f1",cyan:"#22a2c9",brightCyan:"#9c637a",white:"#979db4",brightWhite:"#f5f7ff"},u={foreground:"#c5c8c6",background:"#161719",cursor:"#d0d0d0",black:"#000000",brightBlack:"#000000",red:"#fd5ff1",brightRed:"#fd5ff1",green:"#87c38a",brightGreen:"#94fa36",yellow:"#ffd7b1",brightYellow:"#f5ffa8",blue:"#85befd",brightBlue:"#96cbfe",magenta:"#b9b6fc",brightMagenta:"#b9b6fc",cyan:"#85befd",brightCyan:"#85befd",white:"#e0e0e0",brightWhite:"#e0e0e0"},o={foreground:"#6f6f6f",background:"#1b1d1e",cursor:"#fcef0c",black:"#1b1d1e",brightBlack:"#505354",red:"#e6dc44",brightRed:"#fff78e",green:"#c8be46",brightGreen:"#fff27d",yellow:"#f4fd22",brightYellow:"#feed6c",blue:"#737174",brightBlue:"#919495",magenta:"#747271",brightMagenta:"#9a9a9d",cyan:"#62605f",brightCyan:"#a3a3a6",white:"#c6c5bf",brightWhite:"#dadbd6"},a={foreground:"#968c83",background:"#20111b",cursor:"#968c83",black:"#20111b",brightBlack:"#5e5252",red:"#be100e",brightRed:"#be100e",green:"#858162",brightGreen:"#858162",yellow:"#eaa549",brightYellow:"#eaa549",blue:"#426a79",brightBlue:"#426a79",magenta:"#97522c",brightMagenta:"#97522c",cyan:"#989a9c",brightCyan:"#989a9c",white:"#968c83",brightWhite:"#d5ccba"},f={foreground:"#e0dbb7",background:"#2a1f1d",cursor:"#573d26",black:"#573d26",brightBlack:"#9b6c4a",red:"#be2d26",brightRed:"#e84627",green:"#6ba18a",brightGreen:"#95d8ba",yellow:"#e99d2a",brightYellow:"#d0d150",blue:"#5a86ad",brightBlue:"#b8d3ed",magenta:"#ac80a6",brightMagenta:"#d19ecb",cyan:"#74a6ad",brightCyan:"#93cfd7",white:"#e0dbb7",brightWhite:"#fff9d5"},v={foreground:"#d9e6f2",background:"#0d1926",cursor:"#d9e6f2",black:"#000000",brightBlack:"#262626",red:"#b87a7a",brightRed:"#dbbdbd",green:"#7ab87a",brightGreen:"#bddbbd",yellow:"#b8b87a",brightYellow:"#dbdbbd",blue:"#7a7ab8",brightBlue:"#bdbddb",magenta:"#b87ab8",brightMagenta:"#dbbddb",cyan:"#7ab8b8",brightCyan:"#bddbdb",white:"#d9d9d9",brightWhite:"#ffffff"},h={foreground:"#ffff4e",background:"#0000a4",cursor:"#ffa560",black:"#4f4f4f",brightBlack:"#7c7c7c",red:"#ff6c60",brightRed:"#ffb6b0",green:"#a8ff60",brightGreen:"#ceffac",yellow:"#ffffb6",brightYellow:"#ffffcc",blue:"#96cbfe",brightBlue:"#b5dcff",magenta:"#ff73fd",brightMagenta:"#ff9cfe",cyan:"#c6c5fe",brightCyan:"#dfdffe",white:"#eeeeee",brightWhite:"#ffffff"},t={foreground:"#b3c9d7",background:"#191919",cursor:"#f34b00",black:"#191919",brightBlack:"#191919",red:"#ff355b",brightRed:"#ff355b",green:"#b7e876",brightGreen:"#b7e876",yellow:"#ffc251",brightYellow:"#ffc251",blue:"#76d4ff",brightBlue:"#76d5ff",magenta:"#ba76e7",brightMagenta:"#ba76e7",cyan:"#6cbfb5",brightCyan:"#6cbfb5",white:"#c2c8d7",brightWhite:"#c2c8d7"},i={foreground:"#e6e1dc",background:"#2b2b2b",cursor:"#ffffff",black:"#000000",brightBlack:"#323232",red:"#da4939",brightRed:"#ff7b6b",green:"#519f50",brightGreen:"#83d182",yellow:"#ffd24a",brightYellow:"#ffff7c",blue:"#6d9cbe",brightBlue:"#9fcef0",magenta:"#d0d0ff",brightMagenta:"#ffffff",cyan:"#6e9cbe",brightCyan:"#a0cef0",white:"#ffffff",brightWhite:"#ffffff"},e={foreground:"#d6dbe5",background:"#131313",cursor:"#b9b9b9",black:"#1f1f1f",brightBlack:"#d6dbe5",red:"#f81118",brightRed:"#de352e",green:"#2dc55e",brightGreen:"#1dd361",yellow:"#ecba0f",brightYellow:"#f3bd09",blue:"#2a84d2",brightBlue:"#1081d6",magenta:"#4e5ab7",brightMagenta:"#5350b9",cyan:"#1081d6",brightCyan:"#0f7ddb",white:"#d6dbe5",brightWhite:"#ffffff"},r={foreground:"#7869c4",background:"#40318d",cursor:"#7869c4",black:"#090300",brightBlack:"#000000",red:"#883932",brightRed:"#883932",green:"#55a049",brightGreen:"#55a049",yellow:"#bfce72",brightYellow:"#bfce72",blue:"#40318d",brightBlue:"#40318d",magenta:"#8b3f96",brightMagenta:"#8b3f96",cyan:"#67b6bd",brightCyan:"#67b6bd",white:"#ffffff",brightWhite:"#f7f7f7"},c={foreground:"#d2d8d9",background:"#2b2d2e",cursor:"#708284",black:"#7d8b8f",brightBlack:"#888888",red:"#b23a52",brightRed:"#f24840",green:"#789b6a",brightGreen:"#80c470",yellow:"#b9ac4a",brightYellow:"#ffeb62",blue:"#2a7fac",brightBlue:"#4196ff",magenta:"#bd4f5a",brightMagenta:"#fc5275",cyan:"#44a799",brightCyan:"#53cdbd",white:"#d2d8d9",brightWhite:"#d2d8d9"},p={foreground:"#d9e6f2",background:"#29262f",cursor:"#d9e6f2",black:"#000000",brightBlack:"#323232",red:"#c37372",brightRed:"#dbaaaa",green:"#72c373",brightGreen:"#aadbaa",yellow:"#c2c372",brightYellow:"#dadbaa",blue:"#7372c3",brightBlue:"#aaaadb",magenta:"#c372c2",brightMagenta:"#dbaada",cyan:"#72c2c3",brightCyan:"#aadadb",white:"#d9d9d9",brightWhite:"#ffffff"},g={foreground:"#aea47a",background:"#191c27",cursor:"#92805b",black:"#181818",brightBlack:"#555555",red:"#810009",brightRed:"#ac3835",green:"#48513b",brightGreen:"#a6a75d",yellow:"#cc8b3f",brightYellow:"#dcdf7c",blue:"#576d8c",brightBlue:"#3097c6",magenta:"#724d7c",brightMagenta:"#d33061",cyan:"#5c4f4b",brightCyan:"#f3dbb2",white:"#aea47f",brightWhite:"#f4f4f4"},S={foreground:"#ffffff",background:"#132738",cursor:"#f0cc09",black:"#000000",brightBlack:"#555555",red:"#ff0000",brightRed:"#f40e17",green:"#38de21",brightGreen:"#3bd01d",yellow:"#ffe50a",brightYellow:"#edc809",blue:"#1460d2",brightBlue:"#5555ff",magenta:"#ff005d",brightMagenta:"#ff55ff",cyan:"#00bbbb",brightCyan:"#6ae3fa",white:"#bbbbbb",brightWhite:"#ffffff"},d={foreground:"#8ff586",background:"#142838",cursor:"#c4206f",black:"#142631",brightBlack:"#fff688",red:"#ff2320",brightRed:"#d4312e",green:"#3ba5ff",brightGreen:"#8ff586",yellow:"#e9e75c",brightYellow:"#e9f06d",blue:"#8ff586",brightBlue:"#3c7dd2",magenta:"#781aa0",brightMagenta:"#8230a7",cyan:"#8ff586",brightCyan:"#6cbc67",white:"#ba46b2",brightWhite:"#8ff586"},w={foreground:"#68525a",background:"#150707",cursor:"#68525a",black:"#2b1b1d",brightBlack:"#3d2b2e",red:"#91002b",brightRed:"#c5255d",green:"#579524",brightGreen:"#8dff57",yellow:"#ab311b",brightYellow:"#c8381d",blue:"#8c87b0",brightBlue:"#cfc9ff",magenta:"#692f50",brightMagenta:"#fc6cba",cyan:"#e8a866",brightCyan:"#ffceaf",white:"#68525a",brightWhite:"#b0949d"},L={foreground:"#ffffff",background:"#000000",cursor:"#bbbbbb",black:"#000000",brightBlack:"#555555",red:"#ff5555",brightRed:"#ff5555",green:"#55ff55",brightGreen:"#55ff55",yellow:"#ffff55",brightYellow:"#ffff55",blue:"#5555ff",brightBlue:"#5555ff",magenta:"#ff55ff",brightMagenta:"#ff55ff",cyan:"#55ffff",brightCyan:"#55ffff",white:"#bbbbbb",brightWhite:"#ffffff"},B={foreground:"#bababa",background:"#222324",cursor:"#bbbbbb",black:"#000000",brightBlack:"#000000",red:"#e8341c",brightRed:"#e05a4f",green:"#68c256",brightGreen:"#77b869",yellow:"#f2d42c",brightYellow:"#efd64b",blue:"#1c98e8",brightBlue:"#387cd3",magenta:"#8e69c9",brightMagenta:"#957bbe",cyan:"#1c98e8",brightCyan:"#3d97e2",white:"#bababa",brightWhite:"#bababa"},A={foreground:"#ffffff",background:"#333333",cursor:"#00ff00",black:"#4d4d4d",brightBlack:"#555555",red:"#ff2b2b",brightRed:"#ff5555",green:"#98fb98",brightGreen:"#55ff55",yellow:"#f0e68c",brightYellow:"#ffff55",blue:"#cd853f",brightBlue:"#87ceff",magenta:"#ffdead",brightMagenta:"#ff55ff",cyan:"#ffa0a0",brightCyan:"#ffd700",white:"#f5deb3",brightWhite:"#ffffff"},k={foreground:"#b9bcba",background:"#1f1f1f",cursor:"#f83e19",black:"#3a3d43",brightBlack:"#888987",red:"#be3f48",brightRed:"#fb001f",green:"#879a3b",brightGreen:"#0f722f",yellow:"#c5a635",brightYellow:"#c47033",blue:"#4f76a1",brightBlue:"#186de3",magenta:"#855c8d",brightMagenta:"#fb0067",cyan:"#578fa4",brightCyan:"#2e706d",white:"#b9bcba",brightWhite:"#fdffb9"},I={foreground:"#ebebeb",background:"#262c35",cursor:"#d9002f",black:"#191919",brightBlack:"#191919",red:"#bf091d",brightRed:"#bf091d",green:"#3d9751",brightGreen:"#3d9751",yellow:"#f6bb34",brightYellow:"#f6bb34",blue:"#17b2e0",brightBlue:"#17b2e0",magenta:"#7830b0",brightMagenta:"#7830b0",cyan:"#8bd2ed",brightCyan:"#8bd2ed",white:"#ffffff",brightWhite:"#ffffff"},W={foreground:"#f8f8f2",background:"#1e1f29",cursor:"#bbbbbb",black:"#000000",brightBlack:"#555555",red:"#ff5555",brightRed:"#ff5555",green:"#50fa7b",brightGreen:"#50fa7b",yellow:"#f1fa8c",brightYellow:"#f1fa8c",blue:"#bd93f9",brightBlue:"#bd93f9",magenta:"#ff79c6",brightMagenta:"#ff79c6",cyan:"#8be9fd",brightCyan:"#8be9fd",white:"#bbbbbb",brightWhite:"#ffffff"},U={foreground:"#b7a1ff",background:"#1f1d27",cursor:"#ff9839",black:"#1f1d27",brightBlack:"#353147",red:"#d9393e",brightRed:"#d9393e",green:"#2dcd73",brightGreen:"#2dcd73",yellow:"#d9b76e",brightYellow:"#d9b76e",blue:"#ffc284",brightBlue:"#ffc284",magenta:"#de8d40",brightMagenta:"#de8d40",cyan:"#2488ff",brightCyan:"#2488ff",white:"#b7a1ff",brightWhite:"#eae5ff"},Y={foreground:"#00a595",background:"#000000",cursor:"#bbbbbb",black:"#000000",brightBlack:"#555555",red:"#9f0000",brightRed:"#ff0000",green:"#008b00",brightGreen:"#00ee00",yellow:"#ffd000",brightYellow:"#ffff00",blue:"#0081ff",brightBlue:"#0000ff",magenta:"#bc00ca",brightMagenta:"#ff00ff",cyan:"#008b8b",brightCyan:"#00cdcd",white:"#bbbbbb",brightWhite:"#ffffff"},$={foreground:"#e5c7a9",background:"#292520",cursor:"#f6f7ec",black:"#121418",brightBlack:"#675f54",red:"#c94234",brightRed:"#ff645a",green:"#85c54c",brightGreen:"#98e036",yellow:"#f5ae2e",brightYellow:"#e0d561",blue:"#1398b9",brightBlue:"#5fdaff",magenta:"#d0633d",brightMagenta:"#ff9269",cyan:"#509552",brightCyan:"#84f088",white:"#e5c6aa",brightWhite:"#f6f7ec"},y={foreground:"#807a74",background:"#22211d",cursor:"#facb80",black:"#3c3c30",brightBlack:"#555445",red:"#98290f",brightRed:"#e0502a",green:"#479a43",brightGreen:"#61e070",yellow:"#7f7111",brightYellow:"#d69927",blue:"#497f7d",brightBlue:"#79d9d9",magenta:"#7f4e2f",brightMagenta:"#cd7c54",cyan:"#387f58",brightCyan:"#59d599",white:"#807974",brightWhite:"#fff1e9"},E={foreground:"#efefef",background:"#181818",cursor:"#bbbbbb",black:"#242424",brightBlack:"#4b4b4b",red:"#d71c15",brightRed:"#fc1c18",green:"#5aa513",brightGreen:"#6bc219",yellow:"#fdb40c",brightYellow:"#fec80e",blue:"#063b8c",brightBlue:"#0955ff",magenta:"#e40038",brightMagenta:"#fb0050",cyan:"#2595e1",brightCyan:"#3ea8fc",white:"#efefef",brightWhite:"#8c00ec"},D={foreground:"#ffffff",background:"#323232",cursor:"#d6d6d6",black:"#353535",brightBlack:"#535353",red:"#d25252",brightRed:"#f00c0c",green:"#a5c261",brightGreen:"#c2e075",yellow:"#ffc66d",brightYellow:"#e1e48b",blue:"#6c99bb",brightBlue:"#8ab7d9",magenta:"#d197d9",brightMagenta:"#efb5f7",cyan:"#bed6ff",brightCyan:"#dcf4ff",white:"#eeeeec",brightWhite:"#ffffff"},T={foreground:"#b8a898",background:"#2a211c",cursor:"#ffffff",black:"#000000",brightBlack:"#555753",red:"#cc0000",brightRed:"#ef2929",green:"#1a921c",brightGreen:"#9aff87",yellow:"#f0e53a",brightYellow:"#fffb5c",blue:"#0066ff",brightBlue:"#43a8ed",magenta:"#c5656b",brightMagenta:"#ff818a",cyan:"#06989a",brightCyan:"#34e2e2",white:"#d3d7cf",brightWhite:"#eeeeec"},F={foreground:"#dbdae0",background:"#292f33",cursor:"#d4605a",black:"#292f33",brightBlack:"#092028",red:"#cb1e2d",brightRed:"#d4605a",green:"#edb8ac",brightGreen:"#d4605a",yellow:"#b7ab9b",brightYellow:"#a86671",blue:"#2e78c2",brightBlue:"#7c85c4",magenta:"#c0236f",brightMagenta:"#5c5db2",cyan:"#309186",brightCyan:"#819090",white:"#eae3ce",brightWhite:"#fcf4df"},G={foreground:"#7c8fa4",background:"#0e1011",cursor:"#708284",black:"#002831",brightBlack:"#001e27",red:"#e63853",brightRed:"#e1003f",green:"#5eb83c",brightGreen:"#1d9000",yellow:"#a57706",brightYellow:"#cd9409",blue:"#359ddf",brightBlue:"#006fc0",magenta:"#d75cff",brightMagenta:"#a200da",cyan:"#4b73a2",brightCyan:"#005794",white:"#dcdcdc",brightWhite:"#e2e2e2"},K={foreground:"#9ba2b2",background:"#1e2027",cursor:"#f6f7ec",black:"#585f6d",brightBlack:"#585f6d",red:"#d95360",brightRed:"#d95360",green:"#5ab977",brightGreen:"#5ab977",yellow:"#dfb563",brightYellow:"#dfb563",blue:"#4d89c4",brightBlue:"#4c89c5",magenta:"#d55119",brightMagenta:"#d55119",cyan:"#44a8b6",brightCyan:"#44a8b6",white:"#e6e5ff",brightWhite:"#e6e5ff"},q={foreground:"#ecf0fe",background:"#232537",cursor:"#fecd5e",black:"#03073c",brightBlack:"#6c5b30",red:"#c6004a",brightRed:"#da4b8a",green:"#acf157",brightGreen:"#dbffa9",yellow:"#fecd5e",brightYellow:"#fee6a9",blue:"#525fb8",brightBlue:"#b2befa",magenta:"#986f82",brightMagenta:"#fda5cd",cyan:"#968763",brightCyan:"#a5bd86",white:"#ecf0fc",brightWhite:"#f6ffec"},P={foreground:"#2cc55d",background:"#002240",cursor:"#e5be0c",black:"#222d3f",brightBlack:"#212c3c",red:"#a82320",brightRed:"#d4312e",green:"#32a548",brightGreen:"#2d9440",yellow:"#e58d11",brightYellow:"#e5be0c",blue:"#3167ac",brightBlue:"#3c7dd2",magenta:"#781aa0",brightMagenta:"#8230a7",cyan:"#2c9370",brightCyan:"#35b387",white:"#b0b6ba",brightWhite:"#e7eced"},C={foreground:"#b8dbef",background:"#1d1f21",cursor:"#708284",black:"#1d1d19",brightBlack:"#1d1d19",red:"#f18339",brightRed:"#d22a24",green:"#9fd364",brightGreen:"#a7d42c",yellow:"#f4ef6d",brightYellow:"#ff8949",blue:"#5096be",brightBlue:"#61b9d0",magenta:"#695abc",brightMagenta:"#695abc",cyan:"#d63865",brightCyan:"#d63865",white:"#ffffff",brightWhite:"#ffffff"},H={foreground:"#dbd1b9",background:"#0e0d15",cursor:"#bbbbbb",black:"#08002e",brightBlack:"#331e4d",red:"#64002c",brightRed:"#d02063",green:"#5d731a",brightGreen:"#b4ce59",yellow:"#cd751c",brightYellow:"#fac357",blue:"#1d6da1",brightBlue:"#40a4cf",magenta:"#b7077e",brightMagenta:"#f12aae",cyan:"#42a38c",brightCyan:"#62caa8",white:"#f3e0b8",brightWhite:"#fff5db"},N={foreground:"#e2d8cd",background:"#051519",cursor:"#9e9ecb",black:"#333333",brightBlack:"#3d3d3d",red:"#f8818e",brightRed:"#fb3d66",green:"#92d3a2",brightGreen:"#6bb48d",yellow:"#1a8e63",brightYellow:"#30c85a",blue:"#8ed0ce",brightBlue:"#39a7a2",magenta:"#5e468c",brightMagenta:"#7e62b3",cyan:"#31658c",brightCyan:"#6096bf",white:"#e2d8cd",brightWhite:"#e2d8cd"},z={foreground:"#adadad",background:"#1b1c1d",cursor:"#cdcdcd",black:"#242526",brightBlack:"#5fac6d",red:"#f8511b",brightRed:"#f74319",green:"#565747",brightGreen:"#74ec4c",yellow:"#fa771d",brightYellow:"#fdc325",blue:"#2c70b7",brightBlue:"#3393ca",magenta:"#f02e4f",brightMagenta:"#e75e4f",cyan:"#3ca1a6",brightCyan:"#4fbce6",white:"#adadad",brightWhite:"#8c735b"},j={foreground:"#dec165",background:"#251200",cursor:"#e5591c",black:"#000000",brightBlack:"#7f6a55",red:"#d6262b",brightRed:"#e55a1c",green:"#919c00",brightGreen:"#bfc65a",yellow:"#be8a13",brightYellow:"#ffcb1b",blue:"#4699a3",brightBlue:"#7cc9cf",magenta:"#8d4331",brightMagenta:"#d26349",cyan:"#da8213",brightCyan:"#e6a96b",white:"#ddc265",brightWhite:"#ffeaa3"},X={foreground:"#ffffff",background:"#1d2837",cursor:"#bbbbbb",black:"#000000",brightBlack:"#555555",red:"#f9555f",brightRed:"#fa8c8f",green:"#21b089",brightGreen:"#35bb9a",yellow:"#fef02a",brightYellow:"#ffff55",blue:"#589df6",brightBlue:"#589df6",magenta:"#944d95",brightMagenta:"#e75699",cyan:"#1f9ee7",brightCyan:"#3979bc",white:"#bbbbbb",brightWhite:"#ffffff"},Z={foreground:"#3e3e3e",background:"#f4f4f4",cursor:"#3f3f3f",black:"#3e3e3e",brightBlack:"#666666",red:"#970b16",brightRed:"#de0000",green:"#07962a",brightGreen:"#87d5a2",yellow:"#f8eec7",brightYellow:"#f1d007",blue:"#003e8a",brightBlue:"#2e6cba",magenta:"#e94691",brightMagenta:"#ffa29f",cyan:"#89d1ec",brightCyan:"#1cfafe",white:"#ffffff",brightWhite:"#ffffff"},Q={foreground:"#ffffff",background:"#0c1115",cursor:"#6c6c6c",black:"#2e343c",brightBlack:"#404a55",red:"#bd0f2f",brightRed:"#bd0f2f",green:"#35a770",brightGreen:"#49e998",yellow:"#fb9435",brightYellow:"#fddf6e",blue:"#1f5872",brightBlue:"#2a8bc1",magenta:"#bd2523",brightMagenta:"#ea4727",cyan:"#778397",brightCyan:"#a0b6d3",white:"#ffffff",brightWhite:"#ffffff"},ie={foreground:"#9f9fa1",background:"#171423",cursor:"#a288f7",black:"#2d283f",brightBlack:"#59516a",red:"#ed2261",brightRed:"#f0729a",green:"#1fa91b",brightGreen:"#53aa5e",yellow:"#8ddc20",brightYellow:"#b2dc87",blue:"#487df4",brightBlue:"#a9bcec",magenta:"#8d35c9",brightMagenta:"#ad81c2",cyan:"#3bdeed",brightCyan:"#9de3eb",white:"#9e9ea0",brightWhite:"#a288f7"},V={foreground:"#fff0a5",background:"#13773d",cursor:"#8c2800",black:"#000000",brightBlack:"#555555",red:"#bb0000",brightRed:"#bb0000",green:"#00bb00",brightGreen:"#00bb00",yellow:"#e7b000",brightYellow:"#e7b000",blue:"#0000a3",brightBlue:"#0000bb",magenta:"#950062",brightMagenta:"#ff55ff",cyan:"#00bbbb",brightCyan:"#55ffff",white:"#bbbbbb",brightWhite:"#ffffff"},ue={foreground:"#e6d4a3",background:"#1e1e1e",cursor:"#bbbbbb",black:"#161819",brightBlack:"#7f7061",red:"#f73028",brightRed:"#be0f17",green:"#aab01e",brightGreen:"#868715",yellow:"#f7b125",brightYellow:"#cc881a",blue:"#719586",brightBlue:"#377375",magenta:"#c77089",brightMagenta:"#a04b73",cyan:"#7db669",brightCyan:"#578e57",white:"#faefbb",brightWhite:"#e6d4a3"},Se={foreground:"#a0a0a0",background:"#121212",cursor:"#bbbbbb",black:"#1b1d1e",brightBlack:"#505354",red:"#f92672",brightRed:"#ff669d",green:"#a6e22e",brightGreen:"#beed5f",yellow:"#fd971f",brightYellow:"#e6db74",blue:"#66d9ef",brightBlue:"#66d9ef",magenta:"#9e6ffe",brightMagenta:"#9e6ffe",cyan:"#5e7175",brightCyan:"#a3babf",white:"#ccccc6",brightWhite:"#f8f8f2"},we={foreground:"#a8a49d",background:"#010101",cursor:"#a8a49d",black:"#010101",brightBlack:"#726e6a",red:"#f8b63f",brightRed:"#f8b63f",green:"#7fb5e1",brightGreen:"#7fb5e1",yellow:"#d6da25",brightYellow:"#d6da25",blue:"#489e48",brightBlue:"#489e48",magenta:"#b296c6",brightMagenta:"#b296c6",cyan:"#f5bfd7",brightCyan:"#f5bfd7",white:"#a8a49d",brightWhite:"#fefbea"},ye={foreground:"#ededed",background:"#222225",cursor:"#e0d9b9",black:"#000000",brightBlack:"#5d504a",red:"#d00e18",brightRed:"#f07e18",green:"#138034",brightGreen:"#b1d130",yellow:"#ffcb3e",brightYellow:"#fff120",blue:"#006bb3",brightBlue:"#4fc2fd",magenta:"#6b2775",brightMagenta:"#de0071",cyan:"#384564",brightCyan:"#5d504a",white:"#ededed",brightWhite:"#ffffff"},ve={foreground:"#84c138",background:"#100b05",cursor:"#23ff18",black:"#000000",brightBlack:"#666666",red:"#b6214a",brightRed:"#e50000",green:"#00a600",brightGreen:"#86a93e",yellow:"#bfbf00",brightYellow:"#e5e500",blue:"#246eb2",brightBlue:"#0000ff",magenta:"#b200b2",brightMagenta:"#e500e5",cyan:"#00a6b2",brightCyan:"#00e5e5",white:"#bfbfbf",brightWhite:"#e5e5e5"},se={foreground:"#00ff00",background:"#000000",cursor:"#23ff18",black:"#000000",brightBlack:"#666666",red:"#990000",brightRed:"#e50000",green:"#00a600",brightGreen:"#00d900",yellow:"#999900",brightYellow:"#e5e500",blue:"#0000b2",brightBlue:"#0000ff",magenta:"#b200b2",brightMagenta:"#e500e5",cyan:"#00a6b2",brightCyan:"#00e5e5",white:"#bfbfbf",brightWhite:"#e5e5e5"},_e={foreground:"#dbdbdb",background:"#000000",cursor:"#bbbbbb",black:"#575757",brightBlack:"#262626",red:"#ff1b00",brightRed:"#d51d00",green:"#a5e055",brightGreen:"#a5df55",yellow:"#fbe74a",brightYellow:"#fbe84a",blue:"#496487",brightBlue:"#89beff",magenta:"#fd5ff1",brightMagenta:"#c001c1",cyan:"#86e9fe",brightCyan:"#86eafe",white:"#cbcccb",brightWhite:"#dbdbdb"},ne={foreground:"#b7bcba",background:"#161719",cursor:"#b7bcba",black:"#2a2e33",brightBlack:"#1d1f22",red:"#b84d51",brightRed:"#8d2e32",green:"#b3bf5a",brightGreen:"#798431",yellow:"#e4b55e",brightYellow:"#e58a50",blue:"#6e90b0",brightBlue:"#4b6b88",magenta:"#a17eac",brightMagenta:"#6e5079",cyan:"#7fbfb4",brightCyan:"#4d7b74",white:"#b5b9b6",brightWhite:"#5a626a"},ge={foreground:"#d9efd3",background:"#3a3d3f",cursor:"#42ff58",black:"#1f1f1f",brightBlack:"#032710",red:"#fb002a",brightRed:"#a7ff3f",green:"#339c24",brightGreen:"#9fff6d",yellow:"#659b25",brightYellow:"#d2ff6d",blue:"#149b45",brightBlue:"#72ffb5",magenta:"#53b82c",brightMagenta:"#50ff3e",cyan:"#2cb868",brightCyan:"#22ff71",white:"#e0ffef",brightWhite:"#daefd0"},Ce={foreground:"#ffcb83",background:"#262626",cursor:"#fc531d",black:"#000000",brightBlack:"#6a4f2a",red:"#c13900",brightRed:"#ff8c68",green:"#a4a900",brightGreen:"#f6ff40",yellow:"#caaf00",brightYellow:"#ffe36e",blue:"#bd6d00",brightBlue:"#ffbe55",magenta:"#fc5e00",brightMagenta:"#fc874f",cyan:"#f79500",brightCyan:"#c69752",white:"#ffc88a",brightWhite:"#fafaff"},oe={foreground:"#f1f1f1",background:"#000000",cursor:"#808080",black:"#4f4f4f",brightBlack:"#7b7b7b",red:"#fa6c60",brightRed:"#fcb6b0",green:"#a8ff60",brightGreen:"#cfffab",yellow:"#fffeb7",brightYellow:"#ffffcc",blue:"#96cafe",brightBlue:"#b5dcff",magenta:"#fa73fd",brightMagenta:"#fb9cfe",cyan:"#c6c5fe",brightCyan:"#e0e0fe",white:"#efedef",brightWhite:"#ffffff"},pe={foreground:"#ffcc2f",background:"#2c1d16",cursor:"#23ff18",black:"#2c1d16",brightBlack:"#666666",red:"#ef5734",brightRed:"#e50000",green:"#2baf2b",brightGreen:"#86a93e",yellow:"#bebf00",brightYellow:"#e5e500",blue:"#246eb2",brightBlue:"#0000ff",magenta:"#d05ec1",brightMagenta:"#e500e5",cyan:"#00acee",brightCyan:"#00e5e5",white:"#bfbfbf",brightWhite:"#e5e5e5"},ae={foreground:"#f7f6ec",background:"#1e1e1e",cursor:"#edcf4f",black:"#343935",brightBlack:"#595b59",red:"#cf3f61",brightRed:"#d18fa6",green:"#7bb75b",brightGreen:"#767f2c",yellow:"#e9b32a",brightYellow:"#78592f",blue:"#4c9ad4",brightBlue:"#135979",magenta:"#a57fc4",brightMagenta:"#604291",cyan:"#389aad",brightCyan:"#76bbca",white:"#fafaf6",brightWhite:"#b2b5ae"},be={foreground:"#dedede",background:"#121212",cursor:"#ffa560",black:"#929292",brightBlack:"#bdbdbd",red:"#e27373",brightRed:"#ffa1a1",green:"#94b979",brightGreen:"#bddeab",yellow:"#ffba7b",brightYellow:"#ffdca0",blue:"#97bedc",brightBlue:"#b1d8f6",magenta:"#e1c0fa",brightMagenta:"#fbdaff",cyan:"#00988e",brightCyan:"#1ab2a8",white:"#dedede",brightWhite:"#ffffff"},J={foreground:"#adadad",background:"#202020",cursor:"#ffffff",black:"#000000",brightBlack:"#555555",red:"#fa5355",brightRed:"#fb7172",green:"#126e00",brightGreen:"#67ff4f",yellow:"#c2c300",brightYellow:"#ffff00",blue:"#4581eb",brightBlue:"#6d9df1",magenta:"#fa54ff",brightMagenta:"#fb82ff",cyan:"#33c2c1",brightCyan:"#60d3d1",white:"#adadad",brightWhite:"#eeeeee"},He={foreground:"#f7f7f7",background:"#0e100a",cursor:"#9fda9c",black:"#4d4d4d",brightBlack:"#5a5a5a",red:"#c70031",brightRed:"#f01578",green:"#29cf13",brightGreen:"#6ce05c",yellow:"#d8e30e",brightYellow:"#f3f79e",blue:"#3449d1",brightBlue:"#97a4f7",magenta:"#8400ff",brightMagenta:"#c495f0",cyan:"#0798ab",brightCyan:"#68f2e0",white:"#e2d1e3",brightWhite:"#ffffff"},ht={foreground:"#959595",background:"#222222",cursor:"#424242",black:"#2b2b2b",brightBlack:"#454747",red:"#d45a60",brightRed:"#d3232f",green:"#afba67",brightGreen:"#aabb39",yellow:"#e5d289",brightYellow:"#e5be39",blue:"#a0bad6",brightBlue:"#6699d6",magenta:"#c092d6",brightMagenta:"#ab53d6",cyan:"#91bfb7",brightCyan:"#5fc0ae",white:"#3c3d3d",brightWhite:"#c1c2c2"},ct={foreground:"#736e7d",background:"#050014",cursor:"#8c91fa",black:"#230046",brightBlack:"#372d46",red:"#7d1625",brightRed:"#e05167",green:"#337e6f",brightGreen:"#52e0c4",yellow:"#7f6f49",brightYellow:"#e0c386",blue:"#4f4a7f",brightBlue:"#8e87e0",magenta:"#5a3f7f",brightMagenta:"#a776e0",cyan:"#58777f",brightCyan:"#9ad4e0",white:"#736e7d",brightWhite:"#8c91fa"},lt={foreground:"#afc2c2",background:"#303030",cursor:"#ffffff",black:"#000000",brightBlack:"#000000",red:"#ff3030",brightRed:"#ff3030",green:"#559a70",brightGreen:"#559a70",yellow:"#ccac00",brightYellow:"#ccac00",blue:"#0099cc",brightBlue:"#0099cc",magenta:"#cc69c8",brightMagenta:"#cc69c8",cyan:"#7ac4cc",brightCyan:"#7ac4cc",white:"#bccccc",brightWhite:"#bccccc"},ft={foreground:"#afc2c2",background:"#000000",cursor:"#ffffff",black:"#000000",brightBlack:"#000000",red:"#ff3030",brightRed:"#ff3030",green:"#559a70",brightGreen:"#559a70",yellow:"#ccac00",brightYellow:"#ccac00",blue:"#0099cc",brightBlue:"#0099cc",magenta:"#cc69c8",brightMagenta:"#cc69c8",cyan:"#7ac4cc",brightCyan:"#7ac4cc",white:"#bccccc",brightWhite:"#bccccc"},dt={foreground:"#afc2c2",background:"#000000",cursor:"#ffffff",black:"#bccccd",brightBlack:"#ffffff",red:"#ff3030",brightRed:"#ff3030",green:"#559a70",brightGreen:"#559a70",yellow:"#ccac00",brightYellow:"#ccac00",blue:"#0099cc",brightBlue:"#0099cc",magenta:"#cc69c8",brightMagenta:"#cc69c8",cyan:"#7ac4cc",brightCyan:"#7ac4cc",white:"#000000",brightWhite:"#000000"},ut={foreground:"#000000",background:"#fef49c",cursor:"#7f7f7f",black:"#000000",brightBlack:"#666666",red:"#cc0000",brightRed:"#e50000",green:"#00a600",brightGreen:"#00d900",yellow:"#999900",brightYellow:"#e5e500",blue:"#0000b2",brightBlue:"#0000ff",magenta:"#b200b2",brightMagenta:"#e500e5",cyan:"#00a6b2",brightCyan:"#00e5e5",white:"#cccccc",brightWhite:"#e5e5e5"},_t={foreground:"#232322",background:"#eaeaea",cursor:"#16afca",black:"#212121",brightBlack:"#424242",red:"#b7141f",brightRed:"#e83b3f",green:"#457b24",brightGreen:"#7aba3a",yellow:"#f6981e",brightYellow:"#ffea2e",blue:"#134eb2",brightBlue:"#54a4f3",magenta:"#560088",brightMagenta:"#aa4dbc",cyan:"#0e717c",brightCyan:"#26bbd1",white:"#efefef",brightWhite:"#d9d9d9"},gt={foreground:"#e5e5e5",background:"#232322",cursor:"#16afca",black:"#212121",brightBlack:"#424242",red:"#b7141f",brightRed:"#e83b3f",green:"#457b24",brightGreen:"#7aba3a",yellow:"#f6981e",brightYellow:"#ffea2e",blue:"#134eb2",brightBlue:"#54a4f3",magenta:"#560088",brightMagenta:"#aa4dbc",cyan:"#0e717c",brightCyan:"#26bbd1",white:"#efefef",brightWhite:"#d9d9d9"},bt={foreground:"#bbbbbb",background:"#000000",cursor:"#bbbbbb",black:"#000000",brightBlack:"#555555",red:"#e52222",brightRed:"#ff5555",green:"#a6e32d",brightGreen:"#55ff55",yellow:"#fc951e",brightYellow:"#ffff55",blue:"#c48dff",brightBlue:"#5555ff",magenta:"#fa2573",brightMagenta:"#ff55ff",cyan:"#67d9f0",brightCyan:"#55ffff",white:"#f2f2f2",brightWhite:"#ffffff"},vt={foreground:"#cac296",background:"#1d1908",cursor:"#d3ba30",black:"#000000",brightBlack:"#5e5219",red:"#b64c00",brightRed:"#ff9149",green:"#7c8b16",brightGreen:"#b2ca3b",yellow:"#d3bd26",brightYellow:"#ffe54a",blue:"#616bb0",brightBlue:"#acb8ff",magenta:"#8c5a90",brightMagenta:"#ffa0ff",cyan:"#916c25",brightCyan:"#ffbc51",white:"#cac29a",brightWhite:"#fed698"},pt={foreground:"#e1e1e0",background:"#2d3743",cursor:"#000000",black:"#000000",brightBlack:"#555555",red:"#ff4242",brightRed:"#ff3242",green:"#74af68",brightGreen:"#74cd68",yellow:"#ffad29",brightYellow:"#ffb929",blue:"#338f86",brightBlue:"#23d7d7",magenta:"#9414e6",brightMagenta:"#ff37ff",cyan:"#23d7d7",brightCyan:"#00ede1",white:"#e1e1e0",brightWhite:"#ffffff"},mt={foreground:"#bbbbbb",background:"#121212",cursor:"#bbbbbb",black:"#121212",brightBlack:"#555555",red:"#fa2573",brightRed:"#f6669d",green:"#98e123",brightGreen:"#b1e05f",yellow:"#dfd460",brightYellow:"#fff26d",blue:"#1080d0",brightBlue:"#00afff",magenta:"#8700ff",brightMagenta:"#af87ff",cyan:"#43a8d0",brightCyan:"#51ceff",white:"#bbbbbb",brightWhite:"#ffffff"},St={foreground:"#f7d66a",background:"#120b0d",cursor:"#c46c32",black:"#351b0e",brightBlack:"#874228",red:"#9b291c",brightRed:"#ff4331",green:"#636232",brightGreen:"#b4b264",yellow:"#c36e28",brightYellow:"#ff9566",blue:"#515c5d",brightBlue:"#9eb2b4",magenta:"#9b1d29",brightMagenta:"#ff5b6a",cyan:"#588056",brightCyan:"#8acd8f",white:"#f7d75c",brightWhite:"#ffe598"},wt={foreground:"#c4c5b5",background:"#1a1a1a",cursor:"#f6f7ec",black:"#1a1a1a",brightBlack:"#625e4c",red:"#f4005f",brightRed:"#f4005f",green:"#98e024",brightGreen:"#98e024",yellow:"#fa8419",brightYellow:"#e0d561",blue:"#9d65ff",brightBlue:"#9d65ff",magenta:"#f4005f",brightMagenta:"#f4005f",cyan:"#58d1eb",brightCyan:"#58d1eb",white:"#c4c5b5",brightWhite:"#f6f6ef"},yt={foreground:"#f9f9f9",background:"#121212",cursor:"#fb0007",black:"#121212",brightBlack:"#838383",red:"#fa2934",brightRed:"#f6669d",green:"#98e123",brightGreen:"#b1e05f",yellow:"#fff30a",brightYellow:"#fff26d",blue:"#0443ff",brightBlue:"#0443ff",magenta:"#f800f8",brightMagenta:"#f200f6",cyan:"#01b6ed",brightCyan:"#51ceff",white:"#ffffff",brightWhite:"#ffffff"},Ct={foreground:"#a0a0a0",background:"#222222",cursor:"#aa9175",black:"#383838",brightBlack:"#474747",red:"#a95551",brightRed:"#a97775",green:"#666666",brightGreen:"#8c8c8c",yellow:"#a98051",brightYellow:"#a99175",blue:"#657d3e",brightBlue:"#98bd5e",magenta:"#767676",brightMagenta:"#a3a3a3",cyan:"#c9c9c9",brightCyan:"#dcdcdc",white:"#d0b8a3",brightWhite:"#d8c8bb"},kt={foreground:"#ffffff",background:"#271f19",cursor:"#ffffff",black:"#000000",brightBlack:"#000000",red:"#800000",brightRed:"#800000",green:"#61ce3c",brightGreen:"#61ce3c",yellow:"#fbde2d",brightYellow:"#fbde2d",blue:"#253b76",brightBlue:"#253b76",magenta:"#ff0080",brightMagenta:"#ff0080",cyan:"#8da6ce",brightCyan:"#8da6ce",white:"#f8f8f8",brightWhite:"#f8f8f8"},Et={foreground:"#e6e8ef",background:"#1c1e22",cursor:"#f6f7ec",black:"#23252b",brightBlack:"#23252b",red:"#b54036",brightRed:"#b54036",green:"#5ab977",brightGreen:"#5ab977",yellow:"#deb566",brightYellow:"#deb566",blue:"#6a7c93",brightBlue:"#6a7c93",magenta:"#a4799d",brightMagenta:"#a4799d",cyan:"#3f94a8",brightCyan:"#3f94a8",white:"#e6e8ef",brightWhite:"#ebedf2"},Bt={foreground:"#bbbbbb",background:"#000000",cursor:"#bbbbbb",black:"#4c4c4c",brightBlack:"#555555",red:"#bb0000",brightRed:"#ff5555",green:"#5fde8f",brightGreen:"#55ff55",yellow:"#f3f167",brightYellow:"#ffff55",blue:"#276bd8",brightBlue:"#5555ff",magenta:"#bb00bb",brightMagenta:"#ff55ff",cyan:"#00dadf",brightCyan:"#55ffff",white:"#bbbbbb",brightWhite:"#ffffff"},Rt={foreground:"#bbbbbb",background:"#171717",cursor:"#bbbbbb",black:"#4c4c4c",brightBlack:"#555555",red:"#bb0000",brightRed:"#ff5555",green:"#04f623",brightGreen:"#7df71d",yellow:"#f3f167",brightYellow:"#ffff55",blue:"#64d0f0",brightBlue:"#62cbe8",magenta:"#ce6fdb",brightMagenta:"#ff9bf5",cyan:"#00dadf",brightCyan:"#00ccd8",white:"#bbbbbb",brightWhite:"#ffffff"},Lt={foreground:"#3b2322",background:"#dfdbc3",cursor:"#73635a",black:"#000000",brightBlack:"#808080",red:"#cc0000",brightRed:"#cc0000",green:"#009600",brightGreen:"#009600",yellow:"#d06b00",brightYellow:"#d06b00",blue:"#0000cc",brightBlue:"#0000cc",magenta:"#cc00cc",brightMagenta:"#cc00cc",cyan:"#0087cc",brightCyan:"#0087cc",white:"#cccccc",brightWhite:"#ffffff"},Dt={foreground:"#cdcdcd",background:"#283033",cursor:"#c0cad0",black:"#000000",brightBlack:"#555555",red:"#a60001",brightRed:"#ff0003",green:"#00bb00",brightGreen:"#93c863",yellow:"#fecd22",brightYellow:"#fef874",blue:"#3a9bdb",brightBlue:"#a1d7ff",magenta:"#bb00bb",brightMagenta:"#ff55ff",cyan:"#00bbbb",brightCyan:"#55ffff",white:"#bbbbbb",brightWhite:"#ffffff"},xt={foreground:"#ffffff",background:"#224fbc",cursor:"#7f7f7f",black:"#000000",brightBlack:"#666666",red:"#990000",brightRed:"#e50000",green:"#00a600",brightGreen:"#00d900",yellow:"#999900",brightYellow:"#e5e500",blue:"#0000b2",brightBlue:"#0000ff",magenta:"#b200b2",brightMagenta:"#e500e5",cyan:"#00a6b2",brightCyan:"#00e5e5",white:"#bfbfbf",brightWhite:"#e5e5e5"},Mt={foreground:"#c2c8d7",background:"#1c262b",cursor:"#b3b8c3",black:"#000000",brightBlack:"#777777",red:"#ee2b2a",brightRed:"#dc5c60",green:"#40a33f",brightGreen:"#70be71",yellow:"#ffea2e",brightYellow:"#fff163",blue:"#1e80f0",brightBlue:"#54a4f3",magenta:"#8800a0",brightMagenta:"#aa4dbc",cyan:"#16afca",brightCyan:"#42c7da",white:"#a4a4a4",brightWhite:"#ffffff"},At={foreground:"#8a8dae",background:"#222125",cursor:"#5b6ea7",black:"#000000",brightBlack:"#5b3725",red:"#ac2e31",brightRed:"#ff3d48",green:"#31ac61",brightGreen:"#3bff99",yellow:"#ac4300",brightYellow:"#ff5e1e",blue:"#2d57ac",brightBlue:"#4488ff",magenta:"#b08528",brightMagenta:"#ffc21d",cyan:"#1fa6ac",brightCyan:"#1ffaff",white:"#8a8eac",brightWhite:"#5b6ea7"},Tt={foreground:"#dcdfe4",background:"#282c34",cursor:"#a3b3cc",black:"#282c34",brightBlack:"#282c34",red:"#e06c75",brightRed:"#e06c75",green:"#98c379",brightGreen:"#98c379",yellow:"#e5c07b",brightYellow:"#e5c07b",blue:"#61afef",brightBlue:"#61afef",magenta:"#c678dd",brightMagenta:"#c678dd",cyan:"#56b6c2",brightCyan:"#56b6c2",white:"#dcdfe4",brightWhite:"#dcdfe4"},Ot={foreground:"#383a42",background:"#fafafa",cursor:"#bfceff",black:"#383a42",brightBlack:"#4f525e",red:"#e45649",brightRed:"#e06c75",green:"#50a14f",brightGreen:"#98c379",yellow:"#c18401",brightYellow:"#e5c07b",blue:"#0184bc",brightBlue:"#61afef",magenta:"#a626a4",brightMagenta:"#c678dd",cyan:"#0997b3",brightCyan:"#56b6c2",white:"#fafafa",brightWhite:"#ffffff"},Pt={foreground:"#e1e1e1",background:"#141e43",cursor:"#43d58e",black:"#000000",brightBlack:"#3f5648",red:"#ff4242",brightRed:"#ff3242",green:"#74af68",brightGreen:"#74cd68",yellow:"#ffad29",brightYellow:"#ffb929",blue:"#338f86",brightBlue:"#23d7d7",magenta:"#9414e6",brightMagenta:"#ff37ff",cyan:"#23d7d7",brightCyan:"#00ede1",white:"#e2e2e2",brightWhite:"#ffffff"},It={foreground:"#a39e9b",background:"#2f1e2e",cursor:"#a39e9b",black:"#2f1e2e",brightBlack:"#776e71",red:"#ef6155",brightRed:"#ef6155",green:"#48b685",brightGreen:"#48b685",yellow:"#fec418",brightYellow:"#fec418",blue:"#06b6ef",brightBlue:"#06b6ef",magenta:"#815ba4",brightMagenta:"#815ba4",cyan:"#5bc4bf",brightCyan:"#5bc4bf",white:"#a39e9b",brightWhite:"#e7e9db"},Ht={foreground:"#a39e9b",background:"#2f1e2e",cursor:"#a39e9b",black:"#2f1e2e",brightBlack:"#776e71",red:"#ef6155",brightRed:"#ef6155",green:"#48b685",brightGreen:"#48b685",yellow:"#fec418",brightYellow:"#fec418",blue:"#06b6ef",brightBlue:"#06b6ef",magenta:"#815ba4",brightMagenta:"#815ba4",cyan:"#5bc4bf",brightCyan:"#5bc4bf",white:"#a39e9b",brightWhite:"#e7e9db"},Wt={foreground:"#f2f2f2",background:"#000000",cursor:"#4d4d4d",black:"#2a2a2a",brightBlack:"#666666",red:"#ff0000",brightRed:"#ff0080",green:"#79ff0f",brightGreen:"#66ff66",yellow:"#e7bf00",brightYellow:"#f3d64e",blue:"#396bd7",brightBlue:"#709aed",magenta:"#b449be",brightMagenta:"#db67e6",cyan:"#66ccff",brightCyan:"#7adff2",white:"#bbbbbb",brightWhite:"#ffffff"},Ft={foreground:"#f1f1f1",background:"#212121",cursor:"#20bbfc",black:"#212121",brightBlack:"#424242",red:"#c30771",brightRed:"#fb007a",green:"#10a778",brightGreen:"#5fd7af",yellow:"#a89c14",brightYellow:"#f3e430",blue:"#008ec4",brightBlue:"#20bbfc",magenta:"#523c79",brightMagenta:"#6855de",cyan:"#20a5ba",brightCyan:"#4fb8cc",white:"#d9d9d9",brightWhite:"#f1f1f1"},Nt={foreground:"#424242",background:"#f1f1f1",cursor:"#20bbfc",black:"#212121",brightBlack:"#424242",red:"#c30771",brightRed:"#fb007a",green:"#10a778",brightGreen:"#5fd7af",yellow:"#a89c14",brightYellow:"#f3e430",blue:"#008ec4",brightBlue:"#20bbfc",magenta:"#523c79",brightMagenta:"#6855de",cyan:"#20a5ba",brightCyan:"#4fb8cc",white:"#d9d9d9",brightWhite:"#f1f1f1"},$t={foreground:"#414141",background:"#ffffff",cursor:"#5e77c8",black:"#414141",brightBlack:"#3f3f3f",red:"#b23771",brightRed:"#db3365",green:"#66781e",brightGreen:"#829429",yellow:"#cd6f34",brightYellow:"#cd6f34",blue:"#3c5ea8",brightBlue:"#3c5ea8",magenta:"#a454b2",brightMagenta:"#a454b2",cyan:"#66781e",brightCyan:"#829429",white:"#ffffff",brightWhite:"#f2f2f2"},Ut={foreground:"#d0d0d0",background:"#1c1c1c",cursor:"#e4c9af",black:"#2f2e2d",brightBlack:"#4a4845",red:"#a36666",brightRed:"#d78787",green:"#90a57d",brightGreen:"#afbea2",yellow:"#d7af87",brightYellow:"#e4c9af",blue:"#7fa5bd",brightBlue:"#a1bdce",magenta:"#c79ec4",brightMagenta:"#d7beda",cyan:"#8adbb4",brightCyan:"#b1e7dd",white:"#d0d0d0",brightWhite:"#efefef"},Gt={foreground:"#f2f2f2",background:"#000000",cursor:"#4d4d4d",black:"#000000",brightBlack:"#666666",red:"#990000",brightRed:"#e50000",green:"#00a600",brightGreen:"#00d900",yellow:"#999900",brightYellow:"#e5e500",blue:"#2009db",brightBlue:"#0000ff",magenta:"#b200b2",brightMagenta:"#e500e5",cyan:"#00a6b2",brightCyan:"#00e5e5",white:"#bfbfbf",brightWhite:"#e5e5e5"},jt={foreground:"#ffffff",background:"#762423",cursor:"#ffffff",black:"#000000",brightBlack:"#262626",red:"#d62e4e",brightRed:"#e02553",green:"#71be6b",brightGreen:"#aff08c",yellow:"#beb86b",brightYellow:"#dfddb7",blue:"#489bee",brightBlue:"#65aaf1",magenta:"#e979d7",brightMagenta:"#ddb7df",cyan:"#6bbeb8",brightCyan:"#b7dfdd",white:"#d6d6d6",brightWhite:"#ffffff"},zt={foreground:"#d7c9a7",background:"#7a251e",cursor:"#ffffff",black:"#000000",brightBlack:"#555555",red:"#ff3f00",brightRed:"#bb0000",green:"#00bb00",brightGreen:"#00bb00",yellow:"#e7b000",brightYellow:"#e7b000",blue:"#0072ff",brightBlue:"#0072ae",magenta:"#bb00bb",brightMagenta:"#ff55ff",cyan:"#00bbbb",brightCyan:"#55ffff",white:"#bbbbbb",brightWhite:"#ffffff"},Yt={foreground:"#ffffff",background:"#2b2b2b",cursor:"#7f7f7f",black:"#000000",brightBlack:"#666666",red:"#cdaf95",brightRed:"#eecbad",green:"#a8ff60",brightGreen:"#bcee68",yellow:"#bfbb1f",brightYellow:"#e5e500",blue:"#75a5b0",brightBlue:"#86bdc9",magenta:"#ff73fd",brightMagenta:"#e500e5",cyan:"#5a647e",brightCyan:"#8c9bc4",white:"#bfbfbf",brightWhite:"#e5e5e5"},Kt={foreground:"#514968",background:"#100815",cursor:"#524966",black:"#241f2b",brightBlack:"#312d3d",red:"#91284c",brightRed:"#d5356c",green:"#23801c",brightGreen:"#2cd946",yellow:"#b49d27",brightYellow:"#fde83b",blue:"#6580b0",brightBlue:"#90baf9",magenta:"#674d96",brightMagenta:"#a479e3",cyan:"#8aaabe",brightCyan:"#acd4eb",white:"#524966",brightWhite:"#9e8cbd"},qt={foreground:"#ececec",background:"#2c3941",cursor:"#ececec",black:"#2c3941",brightBlack:"#5d7079",red:"#865f5b",brightRed:"#865f5b",green:"#66907d",brightGreen:"#66907d",yellow:"#b1a990",brightYellow:"#b1a990",blue:"#6a8e95",brightBlue:"#6a8e95",magenta:"#b18a73",brightMagenta:"#b18a73",cyan:"#88b2ac",brightCyan:"#88b2ac",white:"#ececec",brightWhite:"#ececec"},Vt={foreground:"#deb88d",background:"#09141b",cursor:"#fca02f",black:"#17384c",brightBlack:"#434b53",red:"#d15123",brightRed:"#d48678",green:"#027c9b",brightGreen:"#628d98",yellow:"#fca02f",brightYellow:"#fdd39f",blue:"#1e4950",brightBlue:"#1bbcdd",magenta:"#68d4f1",brightMagenta:"#bbe3ee",cyan:"#50a3b5",brightCyan:"#87acb4",white:"#deb88d",brightWhite:"#fee4ce"},Xt={foreground:"#d4e7d4",background:"#243435",cursor:"#57647a",black:"#757575",brightBlack:"#8a8a8a",red:"#825d4d",brightRed:"#cf937a",green:"#728c62",brightGreen:"#98d9aa",yellow:"#ada16d",brightYellow:"#fae79d",blue:"#4d7b82",brightBlue:"#7ac3cf",magenta:"#8a7267",brightMagenta:"#d6b2a1",cyan:"#729494",brightCyan:"#ade0e0",white:"#e0e0e0",brightWhite:"#e0e0e0"},Jt={foreground:"#cacecd",background:"#111213",cursor:"#e3bf21",black:"#323232",brightBlack:"#323232",red:"#c22832",brightRed:"#c22832",green:"#8ec43d",brightGreen:"#8ec43d",yellow:"#e0c64f",brightYellow:"#e0c64f",blue:"#43a5d5",brightBlue:"#43a5d5",magenta:"#8b57b5",brightMagenta:"#8b57b5",cyan:"#8ec43d",brightCyan:"#8ec43d",white:"#eeeeee",brightWhite:"#ffffff"},Zt={foreground:"#405555",background:"#001015",cursor:"#4afcd6",black:"#012026",brightBlack:"#384451",red:"#b2302d",brightRed:"#ff4242",green:"#00a941",brightGreen:"#2aea5e",yellow:"#5e8baa",brightYellow:"#8ed4fd",blue:"#449a86",brightBlue:"#61d5ba",magenta:"#00599d",brightMagenta:"#1298ff",cyan:"#5d7e19",brightCyan:"#98d028",white:"#405555",brightWhite:"#58fbd6"},Qt={foreground:"#35b1d2",background:"#222222",cursor:"#87d3c4",black:"#222222",brightBlack:"#ffffff",red:"#e2a8bf",brightRed:"#ffcdd9",green:"#81d778",brightGreen:"#beffa8",yellow:"#c4c9c0",brightYellow:"#d0ccca",blue:"#264b49",brightBlue:"#7ab0d2",magenta:"#a481d3",brightMagenta:"#c5a7d9",cyan:"#15ab9c",brightCyan:"#8cdfe0",white:"#02c5e0",brightWhite:"#e0e0e0"},ei={foreground:"#f7f7f7",background:"#1b1b1b",cursor:"#bbbbbb",black:"#000000",brightBlack:"#7a7a7a",red:"#b84131",brightRed:"#d6837c",green:"#7da900",brightGreen:"#c4f137",yellow:"#c4a500",brightYellow:"#fee14d",blue:"#62a3c4",brightBlue:"#8dcff0",magenta:"#ba8acc",brightMagenta:"#f79aff",cyan:"#207383",brightCyan:"#6ad9cf",white:"#a1a1a1",brightWhite:"#f7f7f7"},ti={foreground:"#99a3a2",background:"#242626",cursor:"#d2e0de",black:"#000000",brightBlack:"#666c6c",red:"#a2686a",brightRed:"#dd5c60",green:"#9aa56a",brightGreen:"#bfdf55",yellow:"#a3906a",brightYellow:"#deb360",blue:"#6b8fa3",brightBlue:"#62b1df",magenta:"#6a71a3",brightMagenta:"#606edf",cyan:"#6ba58f",brightCyan:"#64e39c",white:"#99a3a2",brightWhite:"#d2e0de"},ii={foreground:"#d2d8d9",background:"#3d3f41",cursor:"#708284",black:"#25292a",brightBlack:"#25292a",red:"#f24840",brightRed:"#f24840",green:"#629655",brightGreen:"#629655",yellow:"#b68800",brightYellow:"#b68800",blue:"#2075c7",brightBlue:"#2075c7",magenta:"#797fd4",brightMagenta:"#797fd4",cyan:"#15968d",brightCyan:"#15968d",white:"#d2d8d9",brightWhite:"#d2d8d9"},ri={foreground:"#708284",background:"#001e27",cursor:"#708284",black:"#002831",brightBlack:"#001e27",red:"#d11c24",brightRed:"#bd3613",green:"#738a05",brightGreen:"#475b62",yellow:"#a57706",brightYellow:"#536870",blue:"#2176c7",brightBlue:"#708284",magenta:"#c61c6f",brightMagenta:"#5956ba",cyan:"#259286",brightCyan:"#819090",white:"#eae3cb",brightWhite:"#fcf4dc"},si={foreground:"#708284",background:"#001e27",cursor:"#708284",black:"#002831",brightBlack:"#475b62",red:"#d11c24",brightRed:"#bd3613",green:"#738a05",brightGreen:"#475b62",yellow:"#a57706",brightYellow:"#536870",blue:"#2176c7",brightBlue:"#708284",magenta:"#c61c6f",brightMagenta:"#5956ba",cyan:"#259286",brightCyan:"#819090",white:"#eae3cb",brightWhite:"#fcf4dc"},ni={foreground:"#9cc2c3",background:"#001e27",cursor:"#f34b00",black:"#002831",brightBlack:"#006488",red:"#d11c24",brightRed:"#f5163b",green:"#6cbe6c",brightGreen:"#51ef84",yellow:"#a57706",brightYellow:"#b27e28",blue:"#2176c7",brightBlue:"#178ec8",magenta:"#c61c6f",brightMagenta:"#e24d8e",cyan:"#259286",brightCyan:"#00b39e",white:"#eae3cb",brightWhite:"#fcf4dc"},oi={foreground:"#536870",background:"#fcf4dc",cursor:"#536870",black:"#002831",brightBlack:"#001e27",red:"#d11c24",brightRed:"#bd3613",green:"#738a05",brightGreen:"#475b62",yellow:"#a57706",brightYellow:"#536870",blue:"#2176c7",brightBlue:"#708284",magenta:"#c61c6f",brightMagenta:"#5956ba",cyan:"#259286",brightCyan:"#819090",white:"#eae3cb",brightWhite:"#fcf4dc"},ai={foreground:"#b3b8c3",background:"#20242d",cursor:"#b3b8c3",black:"#000000",brightBlack:"#000000",red:"#b04b57",brightRed:"#b04b57",green:"#87b379",brightGreen:"#87b379",yellow:"#e5c179",brightYellow:"#e5c179",blue:"#7d8fa4",brightBlue:"#7d8fa4",magenta:"#a47996",brightMagenta:"#a47996",cyan:"#85a7a5",brightCyan:"#85a7a5",white:"#b3b8c3",brightWhite:"#ffffff"},hi={foreground:"#bdbaae",background:"#222222",cursor:"#bbbbbb",black:"#15171c",brightBlack:"#555555",red:"#ec5f67",brightRed:"#ff6973",green:"#81a764",brightGreen:"#93d493",yellow:"#fec254",brightYellow:"#ffd256",blue:"#5486c0",brightBlue:"#4d84d1",magenta:"#bf83c1",brightMagenta:"#ff55ff",cyan:"#57c2c1",brightCyan:"#83e9e4",white:"#efece7",brightWhite:"#ffffff"},ci={foreground:"#c9c6bc",background:"#222222",cursor:"#bbbbbb",black:"#15171c",brightBlack:"#555555",red:"#b24a56",brightRed:"#ec5f67",green:"#92b477",brightGreen:"#89e986",yellow:"#c6735a",brightYellow:"#fec254",blue:"#7c8fa5",brightBlue:"#5486c0",magenta:"#a5789e",brightMagenta:"#bf83c1",cyan:"#80cdcb",brightCyan:"#58c2c1",white:"#b3b8c3",brightWhite:"#ffffff"},li={foreground:"#ecf0c1",background:"#0a1e24",cursor:"#708284",black:"#6e5346",brightBlack:"#684c31",red:"#e35b00",brightRed:"#ff8a3a",green:"#5cab96",brightGreen:"#aecab8",yellow:"#e3cd7b",brightYellow:"#ffc878",blue:"#0f548b",brightBlue:"#67a0ce",magenta:"#e35b00",brightMagenta:"#ff8a3a",cyan:"#06afc7",brightCyan:"#83a7b4",white:"#f0f1ce",brightWhite:"#fefff1"},fi={foreground:"#e3e3e3",background:"#1b1d1e",cursor:"#2c3fff",black:"#1b1d1e",brightBlack:"#505354",red:"#e60813",brightRed:"#ff0325",green:"#e22928",brightGreen:"#ff3338",yellow:"#e24756",brightYellow:"#fe3a35",blue:"#2c3fff",brightBlue:"#1d50ff",magenta:"#2435db",brightMagenta:"#747cff",cyan:"#3256ff",brightCyan:"#6184ff",white:"#fffef6",brightWhite:"#fffff9"},di={foreground:"#4d4d4c",background:"#ffffff",cursor:"#4d4d4c",black:"#000000",brightBlack:"#000000",red:"#ff4d83",brightRed:"#ff0021",green:"#1f8c3b",brightGreen:"#1fc231",yellow:"#1fc95b",brightYellow:"#d5b807",blue:"#1dd3ee",brightBlue:"#15a9fd",magenta:"#8959a8",brightMagenta:"#8959a8",cyan:"#3e999f",brightCyan:"#3e999f",white:"#ffffff",brightWhite:"#ffffff"},ui={foreground:"#acacab",background:"#1a1a1a",cursor:"#fcfbcc",black:"#050505",brightBlack:"#141414",red:"#e9897c",brightRed:"#f99286",green:"#b6377d",brightGreen:"#c3f786",yellow:"#ecebbe",brightYellow:"#fcfbcc",blue:"#a9cdeb",brightBlue:"#b6defb",magenta:"#75507b",brightMagenta:"#ad7fa8",cyan:"#c9caec",brightCyan:"#d7d9fc",white:"#f2f2f2",brightWhite:"#e2e2e2"},_i={foreground:"#c9c9c9",background:"#1a1818",cursor:"#ffffff",black:"#302b2a",brightBlack:"#4d4e48",red:"#a7463d",brightRed:"#aa000c",green:"#587744",brightGreen:"#128c21",yellow:"#9d602a",brightYellow:"#fc6a21",blue:"#485b98",brightBlue:"#7999f7",magenta:"#864651",brightMagenta:"#fd8aa1",cyan:"#9c814f",brightCyan:"#fad484",white:"#c9c9c9",brightWhite:"#ffffff"},gi={foreground:"#ffffff",background:"#000000",cursor:"#dc322f",black:"#000000",brightBlack:"#1b1d21",red:"#dc322f",brightRed:"#dc322f",green:"#56db3a",brightGreen:"#56db3a",yellow:"#ff8400",brightYellow:"#ff8400",blue:"#0084d4",brightBlue:"#0084d4",magenta:"#b729d9",brightMagenta:"#b729d9",cyan:"#ccccff",brightCyan:"#ccccff",white:"#ffffff",brightWhite:"#ffffff"},bi={foreground:"#d0d0d0",background:"#262626",cursor:"#e4c9af",black:"#1c1c1c",brightBlack:"#1c1c1c",red:"#d68686",brightRed:"#d68686",green:"#aed686",brightGreen:"#aed686",yellow:"#d7af87",brightYellow:"#e4c9af",blue:"#86aed6",brightBlue:"#86aed6",magenta:"#d6aed6",brightMagenta:"#d6aed6",cyan:"#8adbb4",brightCyan:"#b1e7dd",white:"#d0d0d0",brightWhite:"#efefef"},vi={foreground:"#000000",background:"#ffffff",cursor:"#7f7f7f",black:"#000000",brightBlack:"#666666",red:"#990000",brightRed:"#e50000",green:"#00a600",brightGreen:"#00d900",yellow:"#999900",brightYellow:"#e5e500",blue:"#0000b2",brightBlue:"#0000ff",magenta:"#b200b2",brightMagenta:"#e500e5",cyan:"#00a6b2",brightCyan:"#00e5e5",white:"#bfbfbf",brightWhite:"#e5e5e5"},pi={foreground:"#f8f8f8",background:"#1b1d1e",cursor:"#fc971f",black:"#1b1d1e",brightBlack:"#505354",red:"#f92672",brightRed:"#ff5995",green:"#4df840",brightGreen:"#b6e354",yellow:"#f4fd22",brightYellow:"#feed6c",blue:"#2757d6",brightBlue:"#3f78ff",magenta:"#8c54fe",brightMagenta:"#9e6ffe",cyan:"#38c8b5",brightCyan:"#23cfd5",white:"#ccccc6",brightWhite:"#f8f8f2"},mi={foreground:"#b5b5b5",background:"#1b1d1e",cursor:"#16b61b",black:"#1b1d1e",brightBlack:"#505354",red:"#269d1b",brightRed:"#8dff2a",green:"#13ce30",brightGreen:"#48ff77",yellow:"#63e457",brightYellow:"#3afe16",blue:"#2525f5",brightBlue:"#506b95",magenta:"#641f74",brightMagenta:"#72589d",cyan:"#378ca9",brightCyan:"#4085a6",white:"#d9d8d1",brightWhite:"#e5e6e1"},Si={foreground:"#4d4d4c",background:"#ffffff",cursor:"#4d4d4c",black:"#000000",brightBlack:"#000000",red:"#c82829",brightRed:"#c82829",green:"#718c00",brightGreen:"#718c00",yellow:"#eab700",brightYellow:"#eab700",blue:"#4271ae",brightBlue:"#4271ae",magenta:"#8959a8",brightMagenta:"#8959a8",cyan:"#3e999f",brightCyan:"#3e999f",white:"#ffffff",brightWhite:"#ffffff"},wi={foreground:"#c5c8c6",background:"#1d1f21",cursor:"#c5c8c6",black:"#000000",brightBlack:"#000000",red:"#cc6666",brightRed:"#cc6666",green:"#b5bd68",brightGreen:"#b5bd68",yellow:"#f0c674",brightYellow:"#f0c674",blue:"#81a2be",brightBlue:"#81a2be",magenta:"#b294bb",brightMagenta:"#b294bb",cyan:"#8abeb7",brightCyan:"#8abeb7",white:"#ffffff",brightWhite:"#ffffff"},yi={foreground:"#ffffff",background:"#002451",cursor:"#ffffff",black:"#000000",brightBlack:"#000000",red:"#ff9da4",brightRed:"#ff9da4",green:"#d1f1a9",brightGreen:"#d1f1a9",yellow:"#ffeead",brightYellow:"#ffeead",blue:"#bbdaff",brightBlue:"#bbdaff",magenta:"#ebbbff",brightMagenta:"#ebbbff",cyan:"#99ffff",brightCyan:"#99ffff",white:"#ffffff",brightWhite:"#ffffff"},Ci={foreground:"#eaeaea",background:"#000000",cursor:"#eaeaea",black:"#000000",brightBlack:"#000000",red:"#d54e53",brightRed:"#d54e53",green:"#b9ca4a",brightGreen:"#b9ca4a",yellow:"#e7c547",brightYellow:"#e7c547",blue:"#7aa6da",brightBlue:"#7aa6da",magenta:"#c397d8",brightMagenta:"#c397d8",cyan:"#70c0b1",brightCyan:"#70c0b1",white:"#ffffff",brightWhite:"#ffffff"},ki={foreground:"#cccccc",background:"#2d2d2d",cursor:"#cccccc",black:"#000000",brightBlack:"#000000",red:"#f2777a",brightRed:"#f2777a",green:"#99cc99",brightGreen:"#99cc99",yellow:"#ffcc66",brightYellow:"#ffcc66",blue:"#6699cc",brightBlue:"#6699cc",magenta:"#cc99cc",brightMagenta:"#cc99cc",cyan:"#66cccc",brightCyan:"#66cccc",white:"#ffffff",brightWhite:"#ffffff"},Ei={foreground:"#31d07b",background:"#24364b",cursor:"#d5d5d5",black:"#2c3f58",brightBlack:"#336889",red:"#be2d26",brightRed:"#dd5944",green:"#1a9172",brightGreen:"#31d07b",yellow:"#db8e27",brightYellow:"#e7d84b",blue:"#325d96",brightBlue:"#34a6da",magenta:"#8a5edc",brightMagenta:"#ae6bdc",cyan:"#35a08f",brightCyan:"#42c3ae",white:"#23d183",brightWhite:"#d5d5d5"},Bi={foreground:"#786b53",background:"#191919",cursor:"#fac814",black:"#321300",brightBlack:"#433626",red:"#b2270e",brightRed:"#ed5d20",green:"#44a900",brightGreen:"#55f238",yellow:"#aa820c",brightYellow:"#f2b732",blue:"#58859a",brightBlue:"#85cfed",magenta:"#97363d",brightMagenta:"#e14c5a",cyan:"#b25a1e",brightCyan:"#f07d14",white:"#786b53",brightWhite:"#ffc800"},Ri={foreground:"#eeeeec",background:"#300a24",cursor:"#bbbbbb",black:"#2e3436",brightBlack:"#555753",red:"#cc0000",brightRed:"#ef2929",green:"#4e9a06",brightGreen:"#8ae234",yellow:"#c4a000",brightYellow:"#fce94f",blue:"#3465a4",brightBlue:"#729fcf",magenta:"#75507b",brightMagenta:"#ad7fa8",cyan:"#06989a",brightCyan:"#34e2e2",white:"#d3d7cf",brightWhite:"#eeeeec"},Li={foreground:"#ffffff",background:"#011116",cursor:"#4afcd6",black:"#022026",brightBlack:"#384451",red:"#b2302d",brightRed:"#ff4242",green:"#00a941",brightGreen:"#2aea5e",yellow:"#59819c",brightYellow:"#8ed4fd",blue:"#459a86",brightBlue:"#61d5ba",magenta:"#00599d",brightMagenta:"#1298ff",cyan:"#5d7e19",brightCyan:"#98d028",white:"#405555",brightWhite:"#58fbd6"},Di={foreground:"#877a9b",background:"#1b1b23",cursor:"#a063eb",black:"#000000",brightBlack:"#5d3225",red:"#b0425b",brightRed:"#ff6388",green:"#37a415",brightGreen:"#29e620",yellow:"#ad5c42",brightYellow:"#f08161",blue:"#564d9b",brightBlue:"#867aed",magenta:"#6c3ca1",brightMagenta:"#a05eee",cyan:"#808080",brightCyan:"#eaeaea",white:"#87799c",brightWhite:"#bfa3ff"},xi={foreground:"#dcdccc",background:"#25234f",cursor:"#ff5555",black:"#25234f",brightBlack:"#709080",red:"#705050",brightRed:"#dca3a3",green:"#60b48a",brightGreen:"#60b48a",yellow:"#dfaf8f",brightYellow:"#f0dfaf",blue:"#5555ff",brightBlue:"#5555ff",magenta:"#f08cc3",brightMagenta:"#ec93d3",cyan:"#8cd0d3",brightCyan:"#93e0e3",white:"#709080",brightWhite:"#ffffff"},Mi={foreground:"#ffffff",background:"#000000",cursor:"#ffffff",black:"#878787",brightBlack:"#555555",red:"#ff6600",brightRed:"#ff0000",green:"#ccff04",brightGreen:"#00ff00",yellow:"#ffcc00",brightYellow:"#ffff00",blue:"#44b4cc",brightBlue:"#0000ff",magenta:"#9933cc",brightMagenta:"#ff00ff",cyan:"#44b4cc",brightCyan:"#00ffff",white:"#f5f5f5",brightWhite:"#e5e5e5"},Ai={foreground:"#708284",background:"#1c1d1f",cursor:"#708284",black:"#56595c",brightBlack:"#45484b",red:"#c94c22",brightRed:"#bd3613",green:"#85981c",brightGreen:"#738a04",yellow:"#b4881d",brightYellow:"#a57705",blue:"#2e8bce",brightBlue:"#2176c7",magenta:"#d13a82",brightMagenta:"#c61c6f",cyan:"#32a198",brightCyan:"#259286",white:"#c9c6bd",brightWhite:"#c9c6bd"},Ti={foreground:"#536870",background:"#fcf4dc",cursor:"#536870",black:"#56595c",brightBlack:"#45484b",red:"#c94c22",brightRed:"#bd3613",green:"#85981c",brightGreen:"#738a04",yellow:"#b4881d",brightYellow:"#a57705",blue:"#2e8bce",brightBlue:"#2176c7",magenta:"#d13a82",brightMagenta:"#c61c6f",cyan:"#32a198",brightCyan:"#259286",white:"#d3d0c9",brightWhite:"#c9c6bd"},Oi={foreground:"#afdab6",background:"#404040",cursor:"#30ff24",black:"#000000",brightBlack:"#fefcfc",red:"#e24346",brightRed:"#e97071",green:"#39b13a",brightGreen:"#9cc090",yellow:"#dae145",brightYellow:"#ddda7a",blue:"#4261c5",brightBlue:"#7b91d6",magenta:"#f920fb",brightMagenta:"#f674ba",cyan:"#2abbd4",brightCyan:"#5ed1e5",white:"#d0b8a3",brightWhite:"#d8c8bb"},Pi={foreground:"#b3b3b3",background:"#000000",cursor:"#53ae71",black:"#000000",brightBlack:"#555555",red:"#cc5555",brightRed:"#ff5555",green:"#55cc55",brightGreen:"#55ff55",yellow:"#cdcd55",brightYellow:"#ffff55",blue:"#5555cc",brightBlue:"#5555ff",magenta:"#cc55cc",brightMagenta:"#ff55ff",cyan:"#7acaca",brightCyan:"#55ffff",white:"#cccccc",brightWhite:"#ffffff"},Ii={foreground:"#dafaff",background:"#1f1726",cursor:"#dd00ff",black:"#000507",brightBlack:"#009cc9",red:"#d94085",brightRed:"#da6bac",green:"#2ab250",brightGreen:"#f4dca5",yellow:"#ffd16f",brightYellow:"#eac066",blue:"#883cdc",brightBlue:"#308cba",magenta:"#ececec",brightMagenta:"#ae636b",cyan:"#c1b8b7",brightCyan:"#ff919d",white:"#fff8de",brightWhite:"#e4838d"},Hi={foreground:"#dedacf",background:"#171717",cursor:"#bbbbbb",black:"#000000",brightBlack:"#313131",red:"#ff615a",brightRed:"#f58c80",green:"#b1e969",brightGreen:"#ddf88f",yellow:"#ebd99c",brightYellow:"#eee5b2",blue:"#5da9f6",brightBlue:"#a5c7ff",magenta:"#e86aff",brightMagenta:"#ddaaff",cyan:"#82fff7",brightCyan:"#b7fff9",white:"#dedacf",brightWhite:"#ffffff"},Wi={foreground:"#999993",background:"#101010",cursor:"#9e9ecb",black:"#333333",brightBlack:"#3d3d3d",red:"#8c4665",brightRed:"#bf4d80",green:"#287373",brightGreen:"#53a6a6",yellow:"#7c7c99",brightYellow:"#9e9ecb",blue:"#395573",brightBlue:"#477ab3",magenta:"#5e468c",brightMagenta:"#7e62b3",cyan:"#31658c",brightCyan:"#6096bf",white:"#899ca1",brightWhite:"#c0c0c0"},Fi={foreground:"#dcdccc",background:"#3f3f3f",cursor:"#73635a",black:"#4d4d4d",brightBlack:"#709080",red:"#705050",brightRed:"#dca3a3",green:"#60b48a",brightGreen:"#c3bf9f",yellow:"#f0dfaf",brightYellow:"#e0cf9f",blue:"#506070",brightBlue:"#94bff3",magenta:"#dc8cc3",brightMagenta:"#ec93d3",cyan:"#8cd0d3",brightCyan:"#93e0e3",white:"#dcdccc",brightWhite:"#ffffff"},Ni={foreground:"#e6e1cf",background:"#0f1419",cursor:"#f29718",black:"#000000",brightBlack:"#323232",red:"#ff3333",brightRed:"#ff6565",green:"#b8cc52",brightGreen:"#eafe84",yellow:"#e7c547",brightYellow:"#fff779",blue:"#36a3d9",brightBlue:"#68d5ff",magenta:"#f07178",brightMagenta:"#ffa3aa",cyan:"#95e6cb",brightCyan:"#c7fffd",white:"#ffffff",brightWhite:"#ffffff"},$i={foreground:"#cdcdcd",background:"#000000",cursor:"#d0d0d0",black:"#000000",brightBlack:"#535353",red:"#d11600",brightRed:"#f4152c",green:"#37c32c",brightGreen:"#01ea10",yellow:"#e3c421",brightYellow:"#ffee1d",blue:"#5c6bfd",brightBlue:"#8cb0f8",magenta:"#dd5be5",brightMagenta:"#e056f5",cyan:"#6eb4f2",brightCyan:"#67ecff",white:"#e0e0e0",brightWhite:"#f4f4f4"},Ui={foreground:"#ffffff",background:"#323232",cursor:"#d6d6d6",black:"#323232",brightBlack:"#535353",red:"#d25252",brightRed:"#f07070",green:"#7fe173",brightGreen:"#9dff91",yellow:"#ffc66d",brightYellow:"#ffe48b",blue:"#4099ff",brightBlue:"#5eb7f7",magenta:"#f680ff",brightMagenta:"#ff9dff",cyan:"#bed6ff",brightCyan:"#dcf4ff",white:"#eeeeec",brightWhite:"#ffffff"},kr={Night_3024:x,AdventureTime:M,Afterglow:O,AlienBlood:R,Argonaut:s,Arthur:n,AtelierSulphurpool:l,Atom:u,Batman:o,Belafonte_Night:a,BirdsOfParadise:f,Blazer:v,Borland:h,Bright_Lights:t,Broadcast:i,Brogrammer:e,C64:r,Chalk:c,Chalkboard:p,Ciapre:g,Cobalt2:S,Cobalt_Neon:d,CrayonPonyFish:w,Dark_Pastel:L,Darkside:B,Desert:A,DimmedMonokai:k,DotGov:I,Dracula:W,Duotone_Dark:U,ENCOM:Y,Earthsong:$,Elemental:y,Elementary:E,Espresso:D,Espresso_Libre:T,Fideloper:F,FirefoxDev:G,Firewatch:K,FishTank:q,Flat:P,Flatland:C,Floraverse:H,ForestBlue:N,FrontEndDelight:z,FunForrest:j,Galaxy:X,Github:Z,Glacier:Q,Grape:ie,Grass:V,Gruvbox_Dark:ue,Hardcore:Se,Harper:we,Highway:ye,Hipster_Green:ve,Homebrew:se,Hurtado:_e,Hybrid:ne,IC_Green_PPL:ge,IC_Orange_PPL:Ce,IR_Black:oe,Jackie_Brown:pe,Japanesque:ae,Jellybeans:be,JetBrains_Darcula:J,Kibble:He,Later_This_Evening:ht,Lavandula:ct,LiquidCarbon:lt,LiquidCarbonTransparent:ft,LiquidCarbonTransparentInverse:dt,Man_Page:ut,Material:_t,MaterialDark:gt,Mathias:bt,Medallion:vt,Misterioso:pt,Molokai:mt,MonaLisa:St,Monokai_Soda:wt,Monokai_Vivid:yt,N0tch2k:Ct,Neopolitan:kt,Neutron:Et,NightLion_v1:Bt,NightLion_v2:Rt,Novel:Lt,Obsidian:Dt,Ocean:xt,OceanicMaterial:Mt,Ollie:At,OneHalfDark:Tt,OneHalfLight:Ot,Pandora:Pt,Paraiso_Dark:It,Parasio_Dark:Ht,PaulMillr:Wt,PencilDark:Ft,PencilLight:Nt,Piatto_Light:$t,Pnevma:Ut,Pro:Gt,Red_Alert:jt,Red_Sands:zt,Rippedcasts:Yt,Royal:Kt,Ryuuko:qt,SeaShells:Vt,Seafoam_Pastel:Xt,Seti:Jt,Shaman:Zt,Slate:Qt,Smyck:ei,SoftServer:ti,Solarized_Darcula:ii,Solarized_Dark:ri,Solarized_Dark_Patched:si,Solarized_Dark_Higher_Contrast:ni,Solarized_Light:oi,SpaceGray:ai,SpaceGray_Eighties:hi,SpaceGray_Eighties_Dull:ci,Spacedust:li,Spiderman:fi,Spring:di,Square:ui,Sundried:_i,Symfonic:gi,Teerb:bi,Terminal_Basic:vi,Thayer_Bright:pi,The_Hulk:mi,Tomorrow:Si,Tomorrow_Night:wi,Tomorrow_Night_Blue:yi,Tomorrow_Night_Bright:Ci,Tomorrow_Night_Eighties:ki,ToyChest:Ei,Treehouse:Bi,Ubuntu:Ri,UnderTheSea:Li,Urple:Di,Vaughn:xi,VibrantInk:Mi,Violet_Dark:Ai,Violet_Light:Ti,WarmNeon:Oi,Wez:Pi,WildCherry:Ii,Wombat:Hi,Wryan:Wi,Zenburn:Fi,ayu:Ni,deep:$i,idleToes:Ui};_.AdventureTime=M,_.Afterglow=O,_.AlienBlood=R,_.Argonaut=s,_.Arthur=n,_.AtelierSulphurpool=l,_.Atom=u,_.Batman=o,_.Belafonte_Night=a,_.BirdsOfParadise=f,_.Blazer=v,_.Borland=h,_.Bright_Lights=t,_.Broadcast=i,_.Brogrammer=e,_.C64=r,_.Chalk=c,_.Chalkboard=p,_.Ciapre=g,_.Cobalt2=S,_.Cobalt_Neon=d,_.CrayonPonyFish=w,_.Dark_Pastel=L,_.Darkside=B,_.Desert=A,_.DimmedMonokai=k,_.DotGov=I,_.Dracula=W,_.Duotone_Dark=U,_.ENCOM=Y,_.Earthsong=$,_.Elemental=y,_.Elementary=E,_.Espresso=D,_.Espresso_Libre=T,_.Fideloper=F,_.FirefoxDev=G,_.Firewatch=K,_.FishTank=q,_.Flat=P,_.Flatland=C,_.Floraverse=H,_.ForestBlue=N,_.FrontEndDelight=z,_.FunForrest=j,_.Galaxy=X,_.Github=Z,_.Glacier=Q,_.Grape=ie,_.Grass=V,_.Gruvbox_Dark=ue,_.Hardcore=Se,_.Harper=we,_.Highway=ye,_.Hipster_Green=ve,_.Homebrew=se,_.Hurtado=_e,_.Hybrid=ne,_.IC_Green_PPL=ge,_.IC_Orange_PPL=Ce,_.IR_Black=oe,_.Jackie_Brown=pe,_.Japanesque=ae,_.Jellybeans=be,_.JetBrains_Darcula=J,_.Kibble=He,_.Later_This_Evening=ht,_.Lavandula=ct,_.LiquidCarbon=lt,_.LiquidCarbonTransparent=ft,_.LiquidCarbonTransparentInverse=dt,_.Man_Page=ut,_.Material=_t,_.MaterialDark=gt,_.Mathias=bt,_.Medallion=vt,_.Misterioso=pt,_.Molokai=mt,_.MonaLisa=St,_.Monokai_Soda=wt,_.Monokai_Vivid=yt,_.N0tch2k=Ct,_.Neopolitan=kt,_.Neutron=Et,_.NightLion_v1=Bt,_.NightLion_v2=Rt,_.Night_3024=x,_.Novel=Lt,_.Obsidian=Dt,_.Ocean=xt,_.OceanicMaterial=Mt,_.Ollie=At,_.OneHalfDark=Tt,_.OneHalfLight=Ot,_.Pandora=Pt,_.Paraiso_Dark=It,_.Parasio_Dark=Ht,_.PaulMillr=Wt,_.PencilDark=Ft,_.PencilLight=Nt,_.Piatto_Light=$t,_.Pnevma=Ut,_.Pro=Gt,_.Red_Alert=jt,_.Red_Sands=zt,_.Rippedcasts=Yt,_.Royal=Kt,_.Ryuuko=qt,_.SeaShells=Vt,_.Seafoam_Pastel=Xt,_.Seti=Jt,_.Shaman=Zt,_.Slate=Qt,_.Smyck=ei,_.SoftServer=ti,_.Solarized_Darcula=ii,_.Solarized_Dark=ri,_.Solarized_Dark_Higher_Contrast=ni,_.Solarized_Dark_Patched=si,_.Solarized_Light=oi,_.SpaceGray=ai,_.SpaceGray_Eighties=hi,_.SpaceGray_Eighties_Dull=ci,_.Spacedust=li,_.Spiderman=fi,_.Spring=di,_.Square=ui,_.Sundried=_i,_.Symfonic=gi,_.Teerb=bi,_.Terminal_Basic=vi,_.Thayer_Bright=pi,_.The_Hulk=mi,_.Tomorrow=Si,_.Tomorrow_Night=wi,_.Tomorrow_Night_Blue=yi,_.Tomorrow_Night_Bright=Ci,_.Tomorrow_Night_Eighties=ki,_.ToyChest=Ei,_.Treehouse=Bi,_.Ubuntu=Ri,_.UnderTheSea=Li,_.Urple=Di,_.Vaughn=xi,_.VibrantInk=Mi,_.Violet_Dark=Ai,_.Violet_Light=Ti,_.WarmNeon=Oi,_.Wez=Pi,_.WildCherry=Ii,_.Wombat=Hi,_.Wryan=Wi,_.Zenburn=Fi,_.ayu=Ni,_.deep=$i,_.default=kr,_.idleToes=Ui,Object.defineProperty(_,"__esModule",{value:!0})})})(rt,rt.exports);var Zi=rt.exports;function Is(b,m){m?(document.documentElement.classList.remove("light"),document.documentElement.classList.add("dark"),b.options.theme={...Zi.MaterialDark,background:"#1E1E1E00",selectionBackground:"#3C3B6F",cursor:"#7877DE"}):(document.documentElement.classList.remove("dark"),document.documentElement.classList.add("light"),b.options.theme={...Zi.Material,background:"#FFFFFF00",selectionBackground:"#CCCCF2",cursor:"#5756D6"})}const pr="__swiftserver__storage_key_theme__",Hs=()=>{const b=localStorage.getItem(pr);return Fs(b)},Ws=b=>{localStorage.setItem(pr,JSON.stringify(b))},Fs=b=>{try{return JSON.parse(b)}catch{return null}},st=Symbol("store-raw"),Re=Symbol("store-node"),he=Symbol("store-has"),mr=Symbol("store-self");function Sr(b){let m=b[me];if(!m&&(Object.defineProperty(b,me,{value:m=new Proxy(b,Us)}),!Array.isArray(b))){const _=Object.keys(b),x=Object.getOwnPropertyDescriptors(b);for(let M=0,O=_.length;M<O;M++){const R=_[M];x[R].get&&Object.defineProperty(b,R,{enumerable:x[R].enumerable,get:x[R].get.bind(m)})}}return m}function Ye(b){let m;return b!=null&&typeof b=="object"&&(b[me]||!(m=Object.getPrototypeOf(b))||m===Object.prototype||Array.isArray(b))}function Oe(b,m=new Set){let _,x,M,O;if(_=b!=null&&b[st])return _;if(!Ye(b)||m.has(b))return b;if(Array.isArray(b)){Object.isFrozen(b)?b=b.slice(0):m.add(b);for(let R=0,s=b.length;R<s;R++)M=b[R],(x=Oe(M,m))!==M&&(b[R]=x)}else{Object.isFrozen(b)?b=Object.assign({},b):m.add(b);const R=Object.keys(b),s=Object.getOwnPropertyDescriptors(b);for(let n=0,l=R.length;n<l;n++)O=R[n],!s[O].get&&(M=b[O],(x=Oe(M,m))!==M&&(b[O]=x))}return b}function Ke(b,m){let _=b[m];return _||Object.defineProperty(b,m,{value:_=Object.create(null)}),_}function Pe(b,m,_){if(b[m])return b[m];const[x,M]=Ee(_,{equals:!1,internal:!0});return x.$=M,b[m]=x}function Ns(b,m){const _=Reflect.getOwnPropertyDescriptor(b,m);return!_||_.get||!_.configurable||m===me||m===Re||(delete _.value,delete _.writable,_.get=()=>b[me][m]),_}function wr(b){Qe()&&Pe(Ke(b,Re),mr)()}function $s(b){return wr(b),Reflect.ownKeys(b)}const Us={get(b,m,_){if(m===st)return b;if(m===me)return _;if(m===Gi)return wr(b),_;const x=Ke(b,Re),M=x[m];let O=M?M():b[m];if(m===Re||m===he||m==="__proto__")return O;if(!M){const R=Object.getOwnPropertyDescriptor(b,m);Qe()&&(typeof O!="function"||b.hasOwnProperty(m))&&!(R&&R.get)&&(O=Pe(x,m,O)())}return Ye(O)?Sr(O):O},has(b,m){return m===st||m===me||m===Gi||m===Re||m===he||m==="__proto__"?!0:(Qe()&&Pe(Ke(b,he),m)(),m in b)},set(){return!0},deleteProperty(){return!0},ownKeys:$s,getOwnPropertyDescriptor:Ns};function qe(b,m,_,x=!1){if(!x&&b[m]===_)return;const M=b[m],O=b.length;_===void 0?(delete b[m],b[he]&&b[he][m]&&M!==void 0&&b[he][m].$()):(b[m]=_,b[he]&&b[he][m]&&M===void 0&&b[he][m].$());let R=Ke(b,Re),s;if((s=Pe(R,m,M))&&s.$(()=>_),Array.isArray(b)&&b.length!==O){for(let n=b.length;n<O;n++)(s=R[n])&&s.$();(s=Pe(R,"length",O))&&s.$(b.length)}(s=R[mr])&&s.$()}function yr(b,m){const _=Object.keys(m);for(let x=0;x<_.length;x+=1){const M=_[x];qe(b,M,m[M])}}function Gs(b,m){if(typeof m=="function"&&(m=m(b)),m=Oe(m),Array.isArray(m)){if(b===m)return;let _=0,x=m.length;for(;_<x;_++){const M=m[_];b[_]!==M&&qe(b,_,M)}qe(b,"length",x)}else yr(b,m)}function Ae(b,m,_=[]){let x,M=b;if(m.length>1){x=m.shift();const R=typeof x,s=Array.isArray(b);if(Array.isArray(x)){for(let n=0;n<x.length;n++)Ae(b,[x[n]].concat(m),_);return}else if(s&&R==="function"){for(let n=0;n<b.length;n++)x(b[n],n)&&Ae(b,[n].concat(m),_);return}else if(s&&R==="object"){const{from:n=0,to:l=b.length-1,by:u=1}=x;for(let o=n;o<=l;o+=u)Ae(b,[o].concat(m),_);return}else if(m.length>1){Ae(b[x],m,[x].concat(_));return}M=b[x],_=[x].concat(_)}let O=m[0];typeof O=="function"&&(O=O(M,_),O===M)||x===void 0&&O==null||(O=Oe(O),x===void 0||Ye(M)&&Ye(O)&&!Array.isArray(O)?yr(M,O):qe(b,x,O))}function js(...[b,m]){const _=Oe(b||{}),x=Array.isArray(_),M=Sr(_);function O(...R){xr(()=>{x&&R.length===1?Gs(_,R[0]):Ae(_,R)})}return[M,O]}class zs{featureStore=js({searchBar:[!1,{}]});constructor(){}getFeature=m=>this.featureStore[0][m];isFeatureEnabled=m=>this.getFeature(m)[0];enableFeature=(m,_)=>{const[x,M]=this.featureStore;M(m,([O,R])=>[!0,{...R,..._}])};disableFeature=m=>{const[_,x]=this.featureStore;x(m,([M,O])=>[!1,O])};toggleFeatureEnable=m=>{this.isFeatureEnabled(m)?this.disableFeature(m):this.enableFeature(m)};getAllFeatures(){return Object.keys(this.featureStore[0])}}const nt=new zs;function Ys(b){window.fit=()=>{Ve.fit()},window.term=b,window.terminal=b,window.send=_=>{const x={magic:"command",msg:_};window.webkit?.messageHandlers.callbackHandler.postMessage(x)};let m=null;window.setTheme=_=>{const x=document.createElement("style"),{fontFamily:M,fontSize:O,...R}=_;x.innerHTML=`
  .xterm-rows {
    
  }`,M&&(b.options.fontFamily=M),O&&(b.options.fontSize=O),document.head.appendChild(x),m&&m.remove(),m=x,Ws(_),b.refresh(0,b.rows-1)},window.manager=nt}window.setXTermTheme=b=>{ce.options.theme=b};const Ve=new Ms.FitAddon,Cr=new As.SearchAddon;_r.Terminal.prototype.writeBase64=function(b){this.write(Os(b))};const ce=(()=>{const b=Hs(),m=new _r.Terminal({allowTransparency:!0,theme:{background:"transparent"},rendererType:"dom",fontFamily:b?.fontFamily||"monospace",fontSize:b?.fontSize||16});return m.loadAddon(Ve),m.loadAddon(Cr),m.onTitleChange(_=>{const x={magic:"title",msg:_};window.webkit?.messageHandlers.callbackHandler.postMessage(x)}),m.onData(_=>{const x={magic:"data",msg:_};vr||m.write(_),window.webkit?.messageHandlers.callbackHandler.postMessage(x)}),m.onBell(()=>{const _={magic:"bell",msg:"asd"};window.webkit?.messageHandlers.callbackHandler.postMessage(_)}),Is(m,window.matchMedia("(prefers-color-scheme: dark)").matches),Ys(m),console.log(`%c SwiftServer Terminal v${Ts} %c`,"color: #fff; margin: 1em 0; padding: 5px 0; background: #2ab;","margin: 1em 0; padding: 5px 0; background: #efefef;"),m})(),Ks="_xterm_1dtpk_1",qs="_focus_1dtpk_16",Vs="_bar_1dtpk_24",Xs="_icon_1dtpk_31",Js="_enable_1dtpk_35",Be={xterm:Ks,"search-bar-wrapper":"_search-bar-wrapper_1dtpk_10",focus:qs,bar:Vs,icon:Xs,enable:Js};var Zs=at("<div id=xterm>");const Qs=()=>{let b;Ne(()=>{ce.open(b),Ve.fit(),ce.focus()});let m;return Ne(()=>{m=new ResizeObserver(Ds(()=>{Ve.fit();const _={cols:ce.cols,rows:ce.rows},x={magic:"size",msg:JSON.stringify(_)};console.log("resize",x),window.webkit?.messageHandlers.callbackHandler.postMessage(x)},100)),m.observe(b)}),ir(()=>{m.disconnect()}),(()=>{var _=Zs(),x=b;return typeof x=="function"?je(x,_):b=_,fe(()=>hr(_,Be.xterm)),_})()};var en=at('<svg preserveAspectRatio="xMidYMid meet"viewBox="0 0 24 24"width=1.2em height=1.2em><path fill=currentColor d="M20.06 18a3.99 3.99 0 0 1-.2-.89c-.67.7-1.48 1.05-2.41 1.05c-.83 0-1.52-.24-2.05-.71c-.53-.45-.8-1.06-.8-1.79c0-.88.33-1.56 1-2.05c.67-.49 1.61-.73 2.83-.73h1.4v-.64c0-.49-.15-.88-.45-1.17c-.3-.29-.75-.43-1.33-.43c-.52 0-.95.12-1.3.36c-.35.25-.52.54-.52.89h-1.46c0-.43.15-.84.45-1.24c.28-.4.71-.71 1.22-.94c.51-.21 1.06-.35 1.69-.35c.98 0 1.74.24 2.29.73s.84 1.16.86 2.02V16c0 .8.1 1.42.3 1.88V18h-1.52m-2.4-1.12c.45 0 .88-.11 1.29-.32c.4-.21.7-.49.88-.83v-1.57H18.7c-1.77 0-2.66.47-2.66 1.41c0 .43.15.73.46.96c.3.23.68.35 1.16.35m-12.2-3.17h4.07L7.5 8.29l-2.04 5.42M6.64 6h1.72l4.71 12h-1.93l-.97-2.57H4.82L3.86 18H1.93L6.64 6M2 20h11v2H2v-2Z">');const tn=(b={})=>(()=>{var m=en();return Xr(m,b,!0,!0),m})();var rn=at('<div><input type=text class=text-sm><div class="ml-2 px-1 flex flex-shrink-0 items-center relative dark:text-light-300"><span class="flex cursor-pointer">');const sn=()=>{let b,m;const[_,x]=Ee(!1),[M,O]=Ee(!1),[R,s]=Ee(!1),[n,l]=Ee(!1),[u,o]=Ee("");Ne(()=>{if(!nt.isFeatureEnabled("searchBar"))return;const v=window.document.documentElement;v.onkeydown=a()});function a(){return v=>{(v.metaKey||v.ctrlKey)&&v.key==="f"&&(x(!0),requestAnimationFrame(()=>{m.focus()}),v.stopPropagation(),v.preventDefault()),v.key==="Escape"&&(M()||x(!1))}}ir(()=>{document.documentElement.onkeydown=null}),Dr(()=>{nt.isFeatureEnabled("searchBar")?document.documentElement.onkeydown=a():(x(!1),s(!1),document.documentElement.onkeydown=null)});const f=v=>{Cr.findNext(v??u(),{caseSensitive:n()})};return tr(()=>{u(),n(),f()}),(()=>{var v=rn(),h=v.firstChild,t=h.nextSibling,i=t.firstChild,e=b;typeof e=="function"?je(e,v):b=v,h.$$input=c=>{const p=c.target.value;o(p)},h.addEventListener("compositionend",c=>{O(!1)}),h.addEventListener("compositionstart",c=>{O(!0)}),h.$$keydown=c=>{const p=c.target.value;c.key==="Enter"&&f(p)},h.addEventListener("blur",()=>{s(!1)}),h.addEventListener("focus",()=>{s(!0)});var r=m;return typeof r=="function"?je(r,h):m=h,i.$$click=()=>{l(!n()),m.focus()},cr(i,Ge(tn,{})),fe(c=>{var p={[Be["search-bar-wrapper"]]:!0,active:_(),[Be.focus]:R()},g={[Be.bar]:!0},S={[Be.icon]:!0,[Be.enable]:n()};return c.e=We(v,p,c.e),c.t=We(h,g,c.t),c.a=We(i,S,c.a),c},{e:void 0,t:void 0,a:void 0}),fe(()=>h.value=u()),v})()};ar(["keydown","input","click"]);const nn=()=>{Ne(()=>{vr||(ce.write(`\x1B[31mHello world\x1B[0m
`),ce.write(`\x1B[?1l\x1B>\x1B[?2004l\r\r
\x1B]2;ls --color=tty\x07\x1B]1;ls\x07`),ce.write("fisher.fish  install.sh  \x1B[0m\x1B[01;34mmx\x1B[0m  \x1B[01;34mnode_modules\x1B[0m  package.json  package-lock.json"),ce.write("\r\x1B[0m\x1B[27m\x1B[24m\x1B[J\x1B[01;32m➜  \x1B[36m~\x1B[00m "),document.body.classList.add("bg-light-50","dark:bg-dark-300"))})},on=()=>(nn(),[Ge(Qs,{}),Ge(sn,{})]);zr(()=>Ge(on,{}),document.getElementById("root"));
